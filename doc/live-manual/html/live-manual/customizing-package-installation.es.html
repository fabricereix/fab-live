<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>
    customizing-package-installation -
    Manual de Live Systems
  </title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <meta name="dc.title" content="Manual de Live Systems" />
  <meta name="dc.author" content="Proyecto Live  Systems &#60;debian-live@lists.debian.org&#62;" />
  <meta name="dc.publisher" content="Live Systems Project &#60;debian-live@lists.debian.org&#62;" />
  <meta name="dc.date" content="22.09.2015"  />
  <meta name="dc.rights" content="Copyright: Copyright (C) 2006-2015 Live Systems Project \\ License: Este programa es software libre: puede ser redistribuido y/o modificado bajo los t&#233;rminos de la GNU General Public License publicada por la Free Software Foundation, bien de la versi&#243;n 3 de la Licencia, o (a su elecci&#243;n) cualquier versi&#243;n posterior. \\  \\ Este programa se distribuye con la esperanza de que sea &#251;til, pero SIN NINGUNA GARANT&#205;A, incluso sin la garant&#237;a impl&#237;cita de COMERCIALIZACI&#211;N o IDONEIDAD PARA UN PROP&#211;SITO PARTICULAR. Consulte la GNU General Public License para m&#225;s detalles. \\  \\ Deber&#237;a haber recibido una copia de la General Public License GNU junto con este programa. Si no, vea http://www.gnu.org/licenses/. \\  \\ El texto completo de la GNU Licencia P&#251;blica General se pueden encontrar en /usr/share/common-licenses/GPL-3" />

  <meta name="generator" content="SiSU 7.1.8 of 2016w08/5 (2016-02-26) (n*x and Ruby!)" />
    <link rel="generator" href="http://www.sisudoc.org/" />
  <link rel="shortcut icon" href="../_sisu/image/rb7.ico" />

  <link href="../../_sisu/css/html.css" rel="stylesheet">
</head>
<body lang="es">
<a name="top" id="top"></a><table summary="segment navigation band with banner" bgcolor="#ffffff" width="100%"><tr>
<td width="20%" align="left">
 <table summary="home button / home information" border="0" cellpadding="3" cellspacing="0">
 <tr><td align="left" bgcolor="#ffffff">
  <p class="tiny_left"><a href="http://debian-live.alioth.debian.org/manual" target="_top">
    Live manual
  </a></p>
  <p class="tiny_left"><a href="http://debian-live.alioth.debian.org" target="_top">
    Live Systems
  </a></p>
 </td></tr>
 </table>
</td>
<td width="75%" align="center">
  
<table summary="segment navigation available documents types: toc,doc,pdf,concordance" border="0" cellpadding="3" cellspacing="0">
<tr>
<td align="center" bgcolor="#ffffff">
  
  
</tr></table>
</td>
<td width="5%" align="right">
  <table summary="segment navigation pre/next" border="0" cellpadding="3" cellspacing="0">
<tr>
<td align="center" bgcolor="#ffffff">
  <a href="customization-overview.es.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_prev_red.png" alt="&lt;&lt;&nbsp;previous" />
  </a>
</td>
<td align="center" bgcolor="#ffffff">
  <a href="toc.es.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_up_red.png" alt="toc" />
  </a>
</td>
<td align="center" bgcolor="#ffffff">
  <a href="customizing-contents.es.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_next_red.png" alt="next&nbsp;&gt;&gt;" />
  </a>
</td>
<td>
</td></tr>
</table>
</td></tr>
</table><div class="toc"><h1 class="minitoc">
    Manual de Live Systems
  </h1>

<h1 class="minitoc">
    Acerca de este manual
  </h1>

<h1 class="minitoc">
    Acerca de este manual
  </h1>

<h4 class="minitoc">
      <a href="about-manual.es.html" target="_top">
    1. Acerca de este manual
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="about-manual.es.html#8">
    1.1 Para el impaciente.
  </a>
  </h5>

<h5 class="minitoc">
      <a href="about-manual.es.html#12">
    1.2 Términos
  </a>
  </h5>

<h5 class="minitoc">
      <a href="about-manual.es.html#29">
    1.3 Autores
  </a>
  </h5>

<h5 class="minitoc">
      <a href="about-manual.es.html#44">
    1.4 Cómo contribuir a este documento
  </a>
  </h5>

<h6 class="minitoc">
      <a href="about-manual.es.html#46">
  1.4.1 Aplicar cambios
</a>
  </h6>

<h6 class="minitoc">
      <a href="about-manual.es.html#60">
  1.4.2 Traducción
</a>
  </h6>

<h1 class="minitoc">
    Contribuir al Live Systems Project
  </h1>

<h4 class="minitoc">
      <a href="about-project.es.html" target="_top">
    2. Acerca del Live Systems Project
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="about-project.es.html#75">
    2.1 Motivación
  </a>
  </h5>

<h6 class="minitoc">
      <a href="about-project.es.html#76">
  2.1.1 Desventajas de los sistemas en vivo actuales
</a>
  </h6>

<h6 class="minitoc">
      <a href="about-project.es.html#86">
  2.1.2 El porqué de crear un sistema en vivo propio.
</a>
  </h6>

<h5 class="minitoc">
      <a href="about-project.es.html#94">
    2.2 Filosofía
  </a>
  </h5>

<h6 class="minitoc">
      <a href="about-project.es.html#95">
  2.2.1 Solamente paquetes sin modificación alguna de Debian «main»
</a>
  </h6>

<h6 class="minitoc">
      <a href="about-project.es.html#99">
  2.2.2 Sin configuración especial para el sistema en vivo
</a>
  </h6>

<h5 class="minitoc">
      <a href="about-project.es.html#103">
    2.3 Contacto
  </a>
  </h5>

<h1 class="minitoc">
    Usuario
  </h1>

<h1 class="minitoc">
    Instalación
  </h1>

<h4 class="minitoc">
      <a href="installation.es.html" target="_top">
    3. Instalación
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="installation.es.html#110">
    3.1 Requisitos
  </a>
  </h5>

<h5 class="minitoc">
      <a href="installation.es.html#118">
    3.2 Instalación de live-build
  </a>
  </h5>

<h6 class="minitoc">
      <a href="installation.es.html#124">
  3.2.1 Desde el repositorio Debian.
</a>
  </h6>

<h6 class="minitoc">
      <a href="installation.es.html#127">
  3.2.2 A partir del código fuente
</a>
  </h6>

<h6 class="minitoc">
      <a href="installation.es.html#138">
  3.2.3 A partir de «instantáneas»
</a>
  </h6>

<h5 class="minitoc">
      <a href="installation.es.html#140">
    3.3 Instalación de live-boot y live-config
  </a>
  </h5>

<h6 class="minitoc">
      <a href="installation.es.html#142">
  3.3.1 Desde el repositorio Debian.
</a>
  </h6>

<h6 class="minitoc">
      <a href="installation.es.html#144">
  3.3.2 A partir del código fuente
</a>
  </h6>

<h6 class="minitoc">
      <a href="installation.es.html#156">
  3.3.3 A partir de «instantáneas»
</a>
  </h6>

<h1 class="minitoc">
    Conceptos básicos
  </h1>

<h4 class="minitoc">
      <a href="the-basics.es.html" target="_top">
    4. Conceptos básicos
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="the-basics.es.html#163">
    4.1 ¿Qué es un sistema en vivo?
  </a>
  </h5>

<h5 class="minitoc">
      <a href="the-basics.es.html#171">
    4.2 Descarga de imágenes prefabricadas
  </a>
  </h5>

<h5 class="minitoc">
      <a href="the-basics.es.html#173">
    4.3 Uso del servicio de creación de imágenes web
  </a>
  </h5>

<h6 class="minitoc">
      <a href="the-basics.es.html#175">
  4.3.1 Uso y advertencias del servicio de creación de imágenes web
</a>
  </h6>

<h5 class="minitoc">
      <a href="the-basics.es.html#179">
    4.4 Primeros pasos: creación de una imagen ISO híbrida
  </a>
  </h5>

<h5 class="minitoc">
      <a href="the-basics.es.html#190">
    4.5 Usar una imagen ISO híbrida
  </a>
  </h5>

<h6 class="minitoc">
      <a href="the-basics.es.html#192">
  4.5.1 Grabar una imagen ISO en un medio físico.
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.es.html#195">
  4.5.2 Copiar una imagen ISO híbrida a un dispositivo  USB
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.es.html#200">
  4.5.3 Usar el espacio libre en el dispositivo USB
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.es.html#207">
  4.5.4 Arrancar el medio en vivo
</a>
  </h6>

<h5 class="minitoc">
      <a href="the-basics.es.html#211">
    4.6 Usar una máquina virtual para pruebas
  </a>
  </h5>

<h6 class="minitoc">
      <a href="the-basics.es.html#218">
  4.6.1 Probar una imagen ISO con QEMU
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.es.html#225">
  4.6.2 Probar una imagen ISO con VirtualBox
</a>
  </h6>

<h5 class="minitoc">
      <a href="the-basics.es.html#233">
    4.7 Construir y utilizar una imágen HDD
  </a>
  </h5>

<h5 class="minitoc">
      <a href="the-basics.es.html#245">
    4.8 Creación de una imagen de arranque en red
  </a>
  </h5>

<h6 class="minitoc">
      <a href="the-basics.es.html#258">
  4.8.1 Servidor DHCP
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.es.html#262">
  4.8.2 Servidor TFTP
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.es.html#267">
  4.8.3 Servidor NFS
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.es.html#275">
  4.8.4 Cómo probar el arranque en red
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.es.html#278">
  4.8.5 Qemu
</a>
  </h6>

<h5 class="minitoc">
      <a href="the-basics.es.html#284">
    4.9 Arrancar desde internet
  </a>
  </h5>

<h6 class="minitoc">
      <a href="the-basics.es.html#286">
  4.9.1 Conseguir los ficheros para arrancar desde internet
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.es.html#292">
  4.9.2 Arrancar imágenes webboot
</a>
  </h6>

<h1 class="minitoc">
    Descripción general de las herramientas
  </h1>

<h4 class="minitoc">
      <a href="overview-of-tools.es.html" target="_top">
    5. Descripción general de las herramientas
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="overview-of-tools.es.html#300">
    5.1 El paquete live-build
  </a>
  </h5>

<h6 class="minitoc">
      <a href="overview-of-tools.es.html#310">
  5.1.1 El comando <tt>lb config</tt>
</a>
  </h6>

<h6 class="minitoc">
      <a href="overview-of-tools.es.html#320">
  5.1.2 El comando <tt>lb build</tt>
</a>
  </h6>

<h6 class="minitoc">
      <a href="overview-of-tools.es.html#322">
  5.1.3 El comando <tt>lb clean</tt>
</a>
  </h6>

<h5 class="minitoc">
      <a href="overview-of-tools.es.html#324">
    5.2 El paquete live-boot
  </a>
  </h5>

<h5 class="minitoc">
      <a href="overview-of-tools.es.html#328">
    5.3 El paquete live-config
  </a>
  </h5>

<h1 class="minitoc">
    Gestionar una configuración
  </h1>

<h4 class="minitoc">
      <a href="managing-a-configuration.es.html" target="_top">
    6. Gestionar una configuración
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="managing-a-configuration.es.html#333">
    6.1 Gestionar cambios en la configuración
  </a>
  </h5>

<h6 class="minitoc">
      <a href="managing-a-configuration.es.html#335">
  6.1.1 ¿Por qué utilizar scripts auto? ¿Qué hacen?
</a>
  </h6>

<h6 class="minitoc">
      <a href="managing-a-configuration.es.html#338">
  6.1.2 Usar scripts auto de ejemplo
</a>
  </h6>

<h5 class="minitoc">
      <a href="managing-a-configuration.es.html#345">
    6.2 Clonar una configuración publicada a través de  Git
  </a>
  </h5>

<h1 class="minitoc">
    Personalización de contenidos
  </h1>

<h4 class="minitoc">
      <a href="customization-overview.es.html" target="_top">
    7. Descripción general de la personalización.
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customization-overview.es.html#359">
    7.1 Configuración en el momento de la creación vs en el momento del arranque
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customization-overview.es.html#362">
    7.2 Etapas de la creación
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customization-overview.es.html#365">
    7.3 Opciones para lb config en ficheros
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customization-overview.es.html#367">
    7.4 Tareas de personalización
  </a>
  </h5>

<h1 class="minitoc">
    Personalización de la instalación de paquetes
  </h1>

<h4 class="minitoc">
      <a href="customizing-package-installation.es.html" target="_top">
    8. Personalización de la instalación de  paquetes
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customizing-package-installation.es.html#372">
    8.1 Origen de los paquetes
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#373">
  8.1.1 Distribución, áreas de archivo y modo
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#380">
  8.1.2 Réplicas de Distribución Debian
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#382">
  8.1.3 Réplicas de Distribution utilizadas  durante la creación
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#386">
  8.1.4 Réplicas de distribución Debian utilizadas en la ejecución.
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#389">
  8.1.5 Repositorios adicionales
</a>
  </h6>

<h5 class="minitoc">
      <a href="customizing-package-installation.es.html#397">
    8.2 Selección de los paquetes a instalar
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#399">
  8.2.1 Listas de paquetes
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#402">
  8.2.2 Utilizar metapaquetes
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#410">
  8.2.3 Listas de paquetes locales
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#414">
  8.2.4 Listas de paquetes locales para la etapa binary
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#416">
  8.2.5 Generar listas de paquetes
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#420">
  8.2.6 Utilización de condiciones dentro de las listas de paquetes
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#429">
  8.2.7 Eliminación paquetes durante la instalación
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#431">
  8.2.8 Tareas de Escritorio e Idioma
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#436">
  8.2.9 Versión y tipo de kernel
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#441">
  8.2.10 Kernels personalizados
</a>
  </h6>

<h5 class="minitoc">
      <a href="customizing-package-installation.es.html#449">
    8.3 Instalar paquetes modificados  o de terceros
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#456">
  8.3.1 Método <tt>packages.chroot</tt> para instalar paquetes personalizados
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#463">
  8.3.2 Método de repositorio APT para instalar paquetes personalizados
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#466">
  8.3.3 Paquetes personalizados y APT
</a>
  </h6>

<h5 class="minitoc">
      <a href="customizing-package-installation.es.html#469">
    8.4 Configurar APT en la creación
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#471">
  8.4.1 Utilizar apt o aptitude
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#475">
  8.4.2 Utilización de un proxy con APT
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#478">
  8.4.3 Ajuste de APT para ahorrar espacio
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#487">
  8.4.4 Pasar opciones a apt o a aptitude
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#492">
  8.4.5 APT pinning
</a>
  </h6>

<h1 class="minitoc">
    Personalización de contenidos
  </h1>

<h4 class="minitoc">
      <a href="customizing-contents.es.html" target="_top">
    9. Personalización de contenidos
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customizing-contents.es.html#501">
    9.1 Includes
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-contents.es.html#506">
  9.1.1 Includes locales en Live/chroot
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-contents.es.html#513">
  9.1.2 Includes locales en Binary
</a>
  </h6>

<h5 class="minitoc">
      <a href="customizing-contents.es.html#517">
    9.2 Scripts gancho (Hooks)
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-contents.es.html#520">
  9.2.1 Scripts gancho locales en el chroot
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-contents.es.html#522">
  9.2.2 Scripts gancho locales en Binary
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-contents.es.html#524">
  9.2.3 Scripts gancho en tiempo de arranque
</a>
  </h6>

<h5 class="minitoc">
      <a href="customizing-contents.es.html#526">
    9.3 Preconfiguración de las preguntas de Debconf
  </a>
  </h5>

<h1 class="minitoc">
    Personalización del comportamiento en tiempo de ejecución.
  </h1>

<h4 class="minitoc">
      <a href="customizing-run-time-behaviours.es.html" target="_top">
    10. Personalización del comportamiento en  tiempo de ejecución.
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customizing-run-time-behaviours.es.html#532">
    10.1 Personalización del usuario por defecto del sistema en vivo
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customizing-run-time-behaviours.es.html#541">
    10.2 Personalización de las variantes locales e  idioma
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customizing-run-time-behaviours.es.html#558">
    10.3 Persistencia
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-run-time-behaviours.es.html#580">
  10.3.1 El fichero persistence.conf
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-run-time-behaviours.es.html#585">
  10.3.2 Utilizar varios medios persistentes
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-run-time-behaviours.es.html#591">
  10.3.3 Utilizar persistencia con cifrado
</a>
  </h6>

<h1 class="minitoc">
    Personalización de la imagen binaria
  </h1>

<h4 class="minitoc">
      <a href="customizing-binary.es.html" target="_top">
    11. Personalización de la imagen binaria
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customizing-binary.es.html#619">
    11.1 Gestores de arranque
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customizing-binary.es.html#626">
    11.2 Metadatos ISO
  </a>
  </h5>

<h1 class="minitoc">
    Personalización del Instalador de Debian
  </h1>

<h4 class="minitoc">
      <a href="customizing-installer.es.html" target="_top">
    12. Personalización del Instalador de Debian
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customizing-installer.es.html#636">
    12.1 Tipos de imágenes según el instalador
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customizing-installer.es.html#648">
    12.2 Personalizando el Instalador de Debian mediante preconfiguración
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customizing-installer.es.html#651">
    12.3 Personalizar el contenido del Instalador de Debian
  </a>
  </h5>

<h1 class="minitoc">
    Proyecto
  </h1>

<h1 class="minitoc">
    Contribuir al proyecto
  </h1>

<h4 class="minitoc">
      <a href="contributing-to-project.es.html" target="_top">
    13. Contribuir al proyecto
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="contributing-to-project.es.html#667">
    13.1 Realizar cambios
  </a>
  </h5>

<h5 class="minitoc">
      <a href="contributing-to-project.es.html#682">
    13.2 Traducción de las páginas de manual
  </a>
  </h5>

<h1 class="minitoc">
    Cómo informar acerca de errores.
  </h1>

<h4 class="minitoc">
      <a href="bugs.es.html" target="_top">
    14. Informes de errores.
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="bugs.es.html#698">
    14.1 Problemas conocidos
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.es.html#703">
    14.2 Reconstruir desde cero
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.es.html#705">
    14.3 Utilizar paquetes actualizados
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.es.html#707">
    14.4 Recopilar información
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.es.html#724">
    14.5 Aislar el fallo si es posible
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.es.html#726">
    14.6 Utilizar el paquete correcto sobre el que informar del error
  </a>
  </h5>

<h6 class="minitoc">
      <a href="bugs.es.html#729">
  14.6.1 En la preinstalación (bootstrap) en tiempo de creación.
</a>
  </h6>

<h6 class="minitoc">
      <a href="bugs.es.html#732">
  14.6.2 Mientras se instalan paquetes en tiempo de creación.
</a>
  </h6>

<h6 class="minitoc">
      <a href="bugs.es.html#736">
  14.6.3 En tiempo de arranque
</a>
  </h6>

<h6 class="minitoc">
      <a href="bugs.es.html#738">
  14.6.4 En tiempo de ejecución
</a>
  </h6>

<h5 class="minitoc">
      <a href="bugs.es.html#740">
    14.7 Hacer la investigación
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.es.html#744">
    14.8 Dónde informar de los fallos
  </a>
  </h5>

<h1 class="minitoc">
    Estilo de código
  </h1>

<h4 class="minitoc">
      <a href="coding-style.es.html" target="_top">
    15. Estilo de código
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="coding-style.es.html#751">
    15.1 Compatibilidad
  </a>
  </h5>

<h5 class="minitoc">
      <a href="coding-style.es.html#756">
    15.2 Sangrado
  </a>
  </h5>

<h5 class="minitoc">
      <a href="coding-style.es.html#758">
    15.3 Ajuste de líneas
  </a>
  </h5>

<h5 class="minitoc">
      <a href="coding-style.es.html#770">
    15.4 Variables
  </a>
  </h5>

<h5 class="minitoc">
      <a href="coding-style.es.html#789">
    15.5 Miscelánea
  </a>
  </h5>

<h1 class="minitoc">
    Procedimientos
  </h1>

<h4 class="minitoc">
      <a href="procedures.es.html" target="_top">
    16. Procedimientos
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="procedures.es.html#797">
    16.1 Principales lanzamientos
  </a>
  </h5>

<h5 class="minitoc">
      <a href="procedures.es.html#803">
    16.2 Nuevas versiones
  </a>
  </h5>

<h6 class="minitoc">
      <a href="procedures.es.html#807">
  16.2.1 Última actualización de una versión Debian
</a>
  </h6>

<h6 class="minitoc">
      <a href="procedures.es.html#809">
  16.2.2 Plantilla para anunciar nuevas versiones.
</a>
  </h6>

<h1 class="minitoc">
    Repositorios Git
  </h1>

<h4 class="minitoc">
      <a href="git-repositories.es.html" target="_top">
    17. Repositorios Git
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="git-repositories.es.html#829">
    17.1 Manejo de múltiples repositorios
  </a>
  </h5>

<h1 class="minitoc">
    Ejemplos
  </h1>

<h1 class="minitoc">
    Ejemplos
  </h1>

<h4 class="minitoc">
      <a href="examples.es.html" target="_top">
    18. Ejemplos
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="examples.es.html#837">
    18.1 Uso de los ejemplos
  </a>
  </h5>

<h5 class="minitoc">
      <a href="examples.es.html#841">
    18.2 Tutorial 1: Una imagen predeterminada
  </a>
  </h5>

<h5 class="minitoc">
      <a href="examples.es.html#850">
    18.3 Tutorial 2: Una utilidad de navegador web
  </a>
  </h5>

<h5 class="minitoc">
      <a href="examples.es.html#858">
    18.4 Tutorial 3: Una imagen personalizada
  </a>
  </h5>

<h6 class="minitoc">
      <a href="examples.es.html#861">
  18.4.1 Primera revisión
</a>
  </h6>

<h6 class="minitoc">
      <a href="examples.es.html#875">
  18.4.2 Segunda revisión
</a>
  </h6>

<h5 class="minitoc">
      <a href="examples.es.html#887">
    18.5 Un cliente VNC kiosk
  </a>
  </h5>

<h5 class="minitoc">
      <a href="examples.es.html#901">
    18.6 Una imagen básica para un pendrive USB de 128MB
  </a>
  </h5>

<h5 class="minitoc">
      <a href="examples.es.html#912">
    18.7 Un escritorio GNOME con variante local e instalador
  </a>
  </h5>

<h1 class="minitoc">
    Apéndice
  </h1>

<h1 class="minitoc">
    Style guide
  </h1>

<h4 class="minitoc">
      <a href="style-guide.es.html" target="_top">
    19. Guía de estilo
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="style-guide.es.html#927">
    19.1 Instrucciones para los autores
  </a>
  </h5>

<h6 class="minitoc">
      <a href="style-guide.es.html#930">
  19.1.1 Aspectos lingüísticos
</a>
  </h6>

<h6 class="minitoc">
      <a href="style-guide.es.html#963">
  19.1.2 Procedimientos
</a>
  </h6>

<h5 class="minitoc">
      <a href="style-guide.es.html#1002">
    19.2 Directrices para los traductores
  </a>
  </h5>

<h6 class="minitoc">
      <a href="style-guide.es.html#1006">
  19.2.1 Consejos de traducción
</a>
  </h6>

<h1 class="minitoc">
    <b><a href="metadata.es.html">Metadata</a></b>
  </h1>

<h4 class="minitoc">
      <a href="metadata.es.html" target="_top">
    SiSU Metadata, document information
  </a> 
  </h4>
</div><div class="content">
<h1 class="tiny">
    Manual de Live Systems
  </h1>
</div><div class="content">
<h1 class="tiny">
    Personalización de la instalación de paquetes
  </h1>
</div><div class="content"><div class="substance">
  <label class="ocn"><a href="#370" class="lnkocn">370</a></label>
  <h1 class="norm" id="370"><a name="370"></a>
    8. Personalización de la instalación de  paquetes
  </h1>
</div><div class="substance">
  <label class="ocn"><a href="#371" class="lnkocn">371</a></label>
  <p class="i0" id="371">
    Quizás la tarea más básica de personalización de un sistema en vivo es la selección de paquetes que serán incluidos en la imagen. Este capítulo orienta a través de las diferentes opciones de <i>live-build</i> que, en el momento de la creación de la imagen, personalizan la instalación de paquetes. Las opciones que seleccionan la distribucion base y las áreas del archivo a utilizar son las que más influyen a la hora de conocer qué paquetes estarán disponibles para su instalación en la imagen. Para asegurar una buena velocidad de descarga de paquetes, se debería elegir el repositorio más cercano. Se pueden añadir repositorios para backports, experimentales, paquetes personalizados o incluir ficheros de paquetes directamente. Se pueden definir listas de paquetes personalizadas, incluyendo metapaquetes que instalarán muchos paquetes relacionados, como por ejemplo paquetes de un entorno de escritorio o lenguaje particular. Por último existen varias opciones que dan algún control sobre cuando son instalados los paquetes por la herramienta <i>apt</i> o la herramienta <i>aptitude</i>, según sea la elegida. Estas opciones pueden ser útiles si se utiliza un proxy, se quiere desactivar la instalación de paquetes recomendados para ahorrar espacio o se necesita controlar las versiones de los paquetes a instalar mediante APT pinning, por nombrar algunas posibilidades.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#372" class="lnkocn">372</a></label>
  <p class="bold" id="372"><a name="372"></a> <a id="hc8.1"></a>
    <a name="c8.1" ></a><a name="h8.1" ></a>8.1 Origen de los paquetes
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#373" class="lnkocn">373</a></label>
  <p class="bold" id="373"><a name="373"></a> <a id="hc8.1.1"></a>
    <a name="c8.1.1" ></a><a name="h8.1.1" ></a>8.1.1 Distribución, áreas de archivo y modo
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#374" class="lnkocn">374</a></label>
  <p class="i0" id="374">
    La distribución seleccionada tiene gran impacto en qué paquetes están disponibles para incluir en la imagen. Se debe indicar el nombre en clave de la distribución, que por defecto es <b>buster</b> para la versión <b>buster</b> de <i>live-build</i>. Se puede especificar cualquier nombre de distribución disponible en los repositorios indicando su nombre en clave. (Para más detalles ver  <a href="about-manual.es.html#terms">Términos</a>).  La opción <tt>--distribution</tt> no solamente influencia la fuente de los paquetes dentro del archivo, sino que instruye a <i>live-build</i> a comportarse tal y como se necesita para construir cada una de las distribuciones. Por ejemplo, para construir la versión <b>inestable</b>, <b>sid</b>, se debe indicar:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#375" class="lnkocn">375</a></label>
  <p class="code" id="375">
    $ lb config --distribution sid<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#376" class="lnkocn">376</a></label>
  <p class="i0" id="376">
    Las áreas del archivo Debian son la principal división de paquetes dentro de una distribución dada. En Debian las áreas del archivo establecidas son <tt>main</tt>, <tt>contrib</tt> y <tt>non-free</tt>. Solamente los paquetes contenidos en <tt>main</tt> son parte de la distribución Debian. Ésta es el área definida por defecto en <i>live-build</i>. Se pueden indicar uno o más valores tal y como se muestra en el siguiente ejemplo:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#377" class="lnkocn">377</a></label>
  <p class="code" id="377">
    $ lb config --archive-areas "main contrib non-free"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#378" class="lnkocn">378</a></label>
  <p class="i0" id="378">
    Experimentalmente se da soporte a alguna distribución derivada de Debian mediante la opción <tt>--mode</tt>. Por defecto, esta opción toma el valor <tt>debian</tt> sólo si se está construyendo en un sistema Debian o en un sistema desconocido. Si se utiliza <tt>lb config</tt> en cualquiera de las distribuciones derivadas a las que se da soporte, por defecto se construirá una imagen de esa distribución derivada. Por ejemplo, si <tt>lb config</tt> se ejecuta en modo <tt>ubuntu</tt> se utilizará el nombre de esa distribución y las áreas de archivos específicas de esa distribución derivada en lugar de los propios de Debian y <i>live-build</i> modificará su comportamiento para adecuarlo al modo seleccionado.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#379" class="lnkocn">379</a></label>
  <p class="i0" id="379">
    <b>Nota:</b> La ayuda a los usuarios de las distribuciones para las cuales se añadieron estos modos son responsabilidad de los desarrolladores de dichas distribuciones. El Live Systems Project proporciona ayuda al desarrollo de la mejor manera posible, basándose en la información recogida de dichas distribuciones derivadas a pesar de que no desarrolla ni da soporte a las mismas.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#380" class="lnkocn">380</a></label>
  <p class="bold" id="380"><a name="380"></a> <a id="hc8.1.2"></a>
    <a name="c8.1.2" ></a><a name="h8.1.2" ></a>8.1.2 Réplicas de Distribución Debian
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#381" class="lnkocn">381</a></label>
  <p class="i0" id="381">
    Los repositorios de Debian están replicados en una gran red alrededor del mundo, de manera que se puede seleccionar la réplica más cercana con el fin de obtener la mejor velocidad de descarga. Cada una de las opciones <tt>--mirror-*</tt> gobierna qué réplica de repositorio Debian se utiliza en las diferentes etapas de creación. Si se recuerda de  <a href="customization-overview.es.html#stages-of-the-build">Etapas de la creación</a>,  en la etapa <b>bootstrap</b> es cuando se crea el directorio chroot con un sistema mínimo mediante la herramienta <i>debootstrap</i>, y en la etapa <b>chroot</b> es cuando el directorio chroot es completado con los paquetes necesarios para crear el sistema de ficheros que será utilizado en el sistema en vivo. A cada una de estas etapas le corresponde su propia opción <tt>--mirror-*</tt>. Posteriormente, en la etapa <b>binary</b> se utilizarán las réplicas Debian indicadas en los valores de las opciones <tt>--mirror-binary</tt> y <tt>--mirror-binary-security</tt> en lugar de utilizar los indicados para las etapas anteriores.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#382" class="lnkocn">382</a></label>
  <p class="bold" id="382"><a name="382"></a> <a id="hdistribution-mirrors-build-time"></a>
    <a name="h8.1.3" ></a><a name="distribution-mirrors-build-time" ></a>8.1.3 Réplicas de Distribution utilizadas  durante la creación
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#383" class="lnkocn">383</a></label>
  <p class="i0" id="383">
    Para indicar qué réplicas deben ser utilizadas en el momento de crear la imagen es suficiente con utilizar las opciones <tt>--mirror-bootstrap</tt> y <tt>--mirror-chroot-security</tt> como se muestra a continuación.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#384" class="lnkocn">384</a></label>
  <p class="code" id="384">
    $ lb config --mirror-bootstrap http://localhost/debian/ \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--mirror-chroot-security http://localhost/debian-security/<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#385" class="lnkocn">385</a></label>
  <p class="i0" id="385">
    El valor indicado en <tt>--mirror-chroot</tt> es utilizado como valor por defecto para la opción <tt>--mirror-bootstrap</tt> si esta no es especificada.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#386" class="lnkocn">386</a></label>
  <p class="bold" id="386"><a name="386"></a> <a id="hc8.1.4"></a>
    <a name="c8.1.4" ></a><a name="h8.1.4" ></a>8.1.4 Réplicas de distribución Debian utilizadas en la ejecución.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#387" class="lnkocn">387</a></label>
  <p class="i0" id="387">
    Las opciones <tt>--mirror-binary*</tt> gobiernan las réplicas configuradas en la imagen binaria que serán utilizadas para instalar paquetes adicionales mientras se ejecuta el sistema en vivo. Por defecto se utiliza <tt>httpredir.debian.org</tt>, que es un servicio que selecciona la réplica más cercana basándose, entre otras cosas, en la familia de la IP del usuario y de la disponibilidad de la réplica. Es una elección bastante acertada siempre que no se pueda predecir que réplica será la mejor para todos los usuarios. También se puede especificar valores personalizados como se muestra en el siguiente ejemplo. Una imagen construida con esta configuración solamente sería accesible a los usuarios de una red donde "<tt>mirror</tt>" fuese alcanzable.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#388" class="lnkocn">388</a></label>
  <p class="code" id="388">
    $ lb config --mirror-binary http://mirror/debian/ \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--mirror-binary-security http://mirror/debian-security/ \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--mirror-binary-backports http://mirror/debian-backports/<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#389" class="lnkocn">389</a></label>
  <p class="bold" id="389"><a name="389"></a> <a id="hadditional-repositories"></a>
    <a name="h8.1.5" ></a><a name="additional-repositories" ></a>8.1.5 Repositorios adicionales
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#390" class="lnkocn">390</a></label>
  <p class="i0" id="390">
    Se pueden añadir más repositorios, ampliando la lista de paquetes seleccionables más alla de aquellos disponibles para la distribución indicada, como pueden ser paquetes de backports, paquetes experimentales o personalizados. Para configurar repositorios adicionales se debe crear los ficheros <tt>config/archives/your-repository.list.chroot</tt> y/o <tt>config/archives/your-repository.list.binary</tt>. Al igual que en las opciones <tt>--mirror-*</tt>, estos ficheros gobiernan los repositorios utilizados en las etapas <b>chroot</b> y <b>binary</b> respectivamente, esto es, los repositorios que serán utilizados cuando se ejecute el sistema en vivo.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#391" class="lnkocn">391</a></label>
  <p class="i0" id="391">
    Por ejemplo, <tt>config/archives/live.list.chroot</tt> permite instalar paquetes de las instantáneas del repositorio Debian Live en el momento de crear la imagen.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#392" class="lnkocn">392</a></label>
  <p class="code" id="392">
    deb http://debian-live.alioth.debian.org/ sid-snapshots main contrib non-free<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#393" class="lnkocn">393</a></label>
  <p class="i0" id="393">
    Si se añade la misma línea a <tt>config/archives/live.list.binary</tt>, el repositorio será añadido al directorio <tt>/etc/apt/sources.list.d/</tt> del sistema en vivo.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#394" class="lnkocn">394</a></label>
  <p class="i0" id="394">
    Estos ficheros serán seleccionados automáticamente si existen.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#395" class="lnkocn">395</a></label>
  <p class="i0" id="395">
    Se debería también incluir en el fichero <tt>config/archives/your-repository.key.{binary,chroot}</tt> la clave GPG a utilizar para firmar dicho repositorio.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#396" class="lnkocn">396</a></label>
  <p class="i0" id="396">
    En caso de necesitar un APT pinning personalizado, las preferencias de APT se pueden colocar mediante ficheros <tt>config/archives/your-repository.pref.{binary,chroot}</tt>, y serán añadidos automáticamente al sistema en vivo en el directorio <tt>/etc/apt/preferences.d/</tt>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#397" class="lnkocn">397</a></label>
  <p class="bold" id="397"><a name="397"></a> <a id="hchoosing-packages-to-install"></a>
    <a name="h8.2" ></a><a name="choosing-packages-to-install" ></a>8.2 Selección de los paquetes a instalar
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#398" class="lnkocn">398</a></label>
  <p class="i0" id="398">
    Hay varias maneras de seleccionar qué paquetes serán instalados por <i>live-build</i> en la imagen que cubren una variedad de necesidades diversas. Se puede nombrar paquetes individuales para instalar en una lista de paquetes. También se puede utilizar metapaquetes en esas listas, o selecionarlas utilizando campos de ficheros de control de paquetes. Por último, también se pueden utilizar ficheros de paquetes de prueba o experimentales obtenidos antes de que aparezcan en los repositorios oficiales simplemente depositando estos ficheros directamente en el árbol de directorios <tt>config/</tt>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#399" class="lnkocn">399</a></label>
  <p class="bold" id="399"><a name="399"></a> <a id="hpackage-lists"></a>
    <a name="h8.2.1" ></a><a name="package-lists" ></a>8.2.1 Listas de paquetes
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#400" class="lnkocn">400</a></label>
  <p class="i0" id="400">
    Las listas de paquetes proporcionan una potente forma de expresar qué paquetes deberían ser instalados. La sintaxis de las listas soporta las expresiones condicionales, que facilitan la creación de listas, adaptando su utilización a diversas configuraciones. También se pueden añadir nombre de paquetes en la listas utilizando shell helpers en tiempo de construcción.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#401" class="lnkocn">401</a></label>
  <p class="i0" id="401">
    <b>Nota:</b>  El comportamiento de <i>live-build</i> cuando se especifica un paquete que no existe es determinado por lo que se haya configurado en la utilidad APT. Para más detalles ver  <a href="customizing-package-installation.es.html#choosing-apt-or-aptitude">Utilizar apt o aptitude</a>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#402" class="lnkocn">402</a></label>
  <p class="bold" id="402"><a name="402"></a> <a id="husing-metapackages"></a>
    <a name="h8.2.2" ></a><a name="using-metapackages" ></a>8.2.2 Utilizar metapaquetes
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#403" class="lnkocn">403</a></label>
  <p class="i0" id="403">
    La manera más sencilla de rellenar una lista de paquetes es utilizar una tarea metapaquete mantenida por una distribución. Por ejemplo:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#404" class="lnkocn">404</a></label>
  <p class="code" id="404">
    $ lb config<br>
$ echo task-gnome-desktop &gt; config/package-lists/desktop.list.chroot<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#405" class="lnkocn">405</a></label>
  <p class="i0" id="405">
    Esto reemplaza el antiguo método de listas predefinidas compatible con <tt>live-build</tt> 2.x. A diferencia de las listas predefinidas, los metapaquetes de tareas no son específicos del proyecto Live Systems. Por el contrario, son mantenidas por grupos de especialistas que trabajan en la distribución y por lo tanto, reflejan el consenso de cada grupo acerca de qué paquetes sirven mejor a las necesidades de los usuarios. Además, abarcan una gama mucho más amplia de casos de uso que las listas predefinidas a las que sustituyen.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#406" class="lnkocn">406</a></label>
  <p class="i0" id="406">
    Todos los metapaquetes de tareas tienen el prefijo <tt>task-</tt>, por lo que una forma rápida de determinar cuales están disponibles (aunque puede contener un puñado de entradas falsas que coincidan con el nombre, pero que no son metapaquetes) es buscar el nombre del paquete con:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#407" class="lnkocn">407</a></label>
  <p class="code" id="407">
    $ apt-cache search --names-only ^task-<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#408" class="lnkocn">408</a></label>
  <p class="i0" id="408">
    Además de éstos, se encuentran otros metapaquetes con diversos fines. Algunos son subconjuntos de paquetes de tareas más amplias, como <tt>gnome-core</tt>, mientras que otros son partes especializadas individuales de un Debian Pure Blend, como los metapaquetes <tt>education-*</tt>. Para tener una lista de todos los metapaquetes en el archivo, instalar el paquete <tt>debtags</tt> y listar todos los paquetes con la etiqueta <tt>role::metapackage</tt> de la siguiente manera:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#409" class="lnkocn">409</a></label>
  <p class="code" id="409">
    $ debtags search role::metapackage<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#410" class="lnkocn">410</a></label>
  <p class="bold" id="410"><a name="410"></a> <a id="hc8.2.3"></a>
    <a name="c8.2.3" ></a><a name="h8.2.3" ></a>8.2.3 Listas de paquetes locales
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#411" class="lnkocn">411</a></label>
  <p class="i0" id="411">
    Ya sea incluyendo metapaquetes en una lista, paquetes individuales, o una combinación de ambos, todas las listas de paquetes locales se deben almacenar en <tt>config/package-lists/</tt>. Ya que se puede utilizar más de una lista, esto se presta muy bien a los diseños modulares. Por ejemplo, se puede dedicar una lista a una elección particular de escritorio, la otra a una colección de paquetes relacionados que puedan ser fácilmente utilizados sobre un escritorio diferente. Esto permite experimentar con diferentes combinaciones de conjuntos de paquetes con un mínimo esfuerzo, así como compartir listas comunes entre diferentes proyectos de imágenes en vivo.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#412" class="lnkocn">412</a></label>
  <p class="i0" id="412">
    Para que sean procesadas, las listas de paquetes que se depositen en este directorio deben tener la extensión <tt>.list</tt> además de la extensión de la etapa <tt>.chroot</tt> o <tt>.binary</tt> para indicar a qué etapa corresponde la lista.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#413" class="lnkocn">413</a></label>
  <p class="i0" id="413">
    <b>Nota:</b> Si no se especifica el sufijo, la lista será usada en las dos etapas. En consecuencia, es conveniente especificar <tt>.list.chroot</tt> de modo que los paquetes se instalen únicamente en el sistema en vivo y no exista otra copia extra del paquete <tt>.deb</tt>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#414" class="lnkocn">414</a></label>
  <p class="bold" id="414"><a name="414"></a> <a id="hc8.2.4"></a>
    <a name="c8.2.4" ></a><a name="h8.2.4" ></a>8.2.4 Listas de paquetes locales para la etapa binary
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#415" class="lnkocn">415</a></label>
  <p class="i0" id="415">
    Para crear una lista para la etapa «binary» crear un fichero con el sufijo <tt>.list.binary</tt> en <tt>config/package-lists/</tt>. Estos paquetes no son instalados en el sistema en vivo, pero son incluidos en <tt>pool/</tt>. El uso típico de una de estas lista sería para una de las variantes de instalador normal («non-live» N.del T.). Tal y como se mencionaba anteriormente, si se desea usar la misma lista para la etapa «chroot» basta con solamente añadir el sufijo <tt>.list</tt>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#416" class="lnkocn">416</a></label>
  <p class="bold" id="416"><a name="416"></a> <a id="hgenerated-package-lists"></a>
    <a name="h8.2.5" ></a><a name="generated-package-lists" ></a>8.2.5 Generar listas de paquetes
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#417" class="lnkocn">417</a></label>
  <p class="i0" id="417">
    A veces ocurre que la mejor manera de crear una lista es generarla con un script. Cualquier línea que comience con un signo de exclamación indica un comando que se ejecutará dentro del chroot cuando la imagen se construya. Por ejemplo, se podría incluir la línea <tt>! grep-aptavail -n -sPackage -FPriority standard | sort</tt> en una lista de paquetes para producir una lista ordenada de los paquetes disponibles con <tt>Priority: standard</tt>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#418" class="lnkocn">418</a></label>
  <p class="i0" id="418">
    De hecho, la selección de paquetes con la orden <tt>grep-aptavail</tt> (del paquete <tt>dctrl-tools</tt>) es tan útil que <tt>live-build</tt> proporciona un script de ayuda llamado <tt>Packages</tt>. Este script acepta dos argumentos: <tt>field</tt> y <tt>pattern</tt>. Por lo tanto, se puede crear una lista con los siguientes contenidos:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#419" class="lnkocn">419</a></label>
  <p class="code" id="419">
    $ lb config<br>
$ echo '! Packages Priority standard' &gt; config/package-lists/standard.list.chroot<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#420" class="lnkocn">420</a></label>
  <p class="bold" id="420"><a name="420"></a> <a id="hc8.2.6"></a>
    <a name="c8.2.6" ></a><a name="h8.2.6" ></a>8.2.6 Utilización de condiciones dentro de las listas de paquetes
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#421" class="lnkocn">421</a></label>
  <p class="i0" id="421">
    En las sentencias condicionales de las listas de paquetes pueden utilizarse cualquier variable disponible en <tt>config/*</tt> (excepto las que tienen el prefijo <tt>LB_</tt>). En general esto significa que puede utilizarse cualquier opción válida para <tt>lb config</tt> cambiando las letras minúsculas por mayúsculas y los guiones por barras bajas. En la práctica solamente tiene sentido utilizar aquellas variables relacionadas con la selección de paquetes, como pueden ser <tt>DISTRIBUTION</tt>, <tt>ARCHITECTURES</tt> o <tt>ARCHIVE_AREAS</tt>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#422" class="lnkocn">422</a></label>
  <p class="i0" id="422">
    Por ejemplo, para instalar el paquete <tt>ia32-libs</tt> si se ha especificado la arquitectura amd64 (<tt>--architectures amd64</tt>) se puede utilizar:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#423" class="lnkocn">423</a></label>
  <p class="code" id="423">
    #if ARCHITECTURES amd64<br>
ia32-libs<br>
#endif<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#424" class="lnkocn">424</a></label>
  <p class="i0" id="424">
    En la expresión condicional pueden utilizarse varios valores. Por ejemplo para instalar el paquete <i>memtest86+</i> si la arquitectura es i386 (<tt>--architectures i386</tt>) o es amd64 (<tt>--architectures amd64</tt>) se puede especificar:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#425" class="lnkocn">425</a></label>
  <p class="code" id="425">
    #if ARCHITECTURES i386 amd64<br>
memtest86+<br>
#endif<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#426" class="lnkocn">426</a></label>
  <p class="i0" id="426">
    En la expresión condicional también pueden utilizarse variables que pueden contener más de un valor. Por ejemplo para instalar <i>vrms</i> si se utilizan las áreas del archivo <tt>contrib</tt> o <tt>non-free</tt> mediante la opción <tt>--archive-areas</tt> se puede indicar:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#427" class="lnkocn">427</a></label>
  <p class="code" id="427">
    #if ARCHIVE_AREAS contrib non-free<br>
vrms<br>
#endif<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#428" class="lnkocn">428</a></label>
  <p class="i0" id="428">
    No se permite el anidamiento de estructuras condicionales.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#429" class="lnkocn">429</a></label>
  <p class="bold" id="429"><a name="429"></a> <a id="hc8.2.7"></a>
    <a name="c8.2.7" ></a><a name="h8.2.7" ></a>8.2.7 Eliminación paquetes durante la instalación
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#430" class="lnkocn">430</a></label>
  <p class="i0" id="430">
    Se puede crear listas de paquetes en ficheros con los sufijos <tt>.list.chroot_live</tt> y <tt>.list.chroot_install</tt> dentro del directorio <tt>config/package-lists</tt>. Si existe una lista «live» y una lista «install» los paquetes de la lista <tt>.list.chroot_live</tt> se eliminan con un script gancho después de la instalación (si el usuario utiliza el instalador). Los paquetes de la lista <tt>.list.chroot_install</tt> estarán presentes tanto en el sistema en vivo como en el sistema instalado. Este es un caso especial para el instalador y puede ser útil si se tiene <tt>--debian-installer live</tt> establecido en la configuración y se desea eliminar paquetes específicos del sistema en vivo durante la instalación.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#431" class="lnkocn">431</a></label>
  <p class="bold" id="431"><a name="431"></a> <a id="hdesktop-and-language-tasks"></a>
    <a name="h8.2.8" ></a><a name="desktop-and-language-tasks" ></a>8.2.8 Tareas de Escritorio e Idioma
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#432" class="lnkocn">432</a></label>
  <p class="i0" id="432">
    Las tareas de escritorio y de idioma son casos especiales que necesitan un poco de planificación y configuración extra. Si el medio de instalación fue preparado para una clase particular de entorno de escritorio, el Instalador de Debian instalará automáticamente la tarea de entorno de escritorio correspondiente. Para ello existen las tareas internas <tt>gnome-desktop</tt>, <tt>kde-desktop</tt>, <tt>lxde-desktop</tt> y <tt>xfce-desktop</tt> pero ninguna de ellas son presentadas en el menú de <tt>tasksel</tt>. De igual forma, las tareas para idiomas tampoco son presentadas en el menú de <tt>tasksel</tt>, pero la selección del idioma, al inicio de la instalación repercute en la selección de las correspondientes tareas del idioma.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#433" class="lnkocn">433</a></label>
  <p class="i0" id="433">
    Cuando se desarolla una imagen de escritorio, la imagen normalmente arranca directamente a un escritorio de trabajo, las opciones de escritorio y de idioma por defecto han sido elegidas en tiempo de creación, no en tiempo de ejecución como en el caso del instalador de Debian. Eso no quiere decir que una imagen en vivo no pueda ser creada para admitir múltiples escritorios o varios idiomas y ofrecer al usuario una elección, pero ese no es un comportamiento por defecto de <i>live-build</i>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#434" class="lnkocn">434</a></label>
  <p class="i0" id="434">
    Ya que no se ha previsto la instalación automática de tareas de idiomas, que incluyen cosas tales como tipos de letra específicos de cada lengua o paquetes de métodos de entrada, si se quiere incluirlos, es necesario especificarlo en la configuración. Por ejemplo, una imagen de escritorio GNOME que contenga soporte para el alemán podría incluir los siguientes metapaquetes de tareas:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#435" class="lnkocn">435</a></label>
  <p class="code" id="435">
    $ lb config<br>
$ echo "task-gnome-desktop task-laptop" &gt;&gt; config/package-lists/my.list.chroot<br>
$ echo "task-german task-german-desktop task-german-gnome-desktop" &gt;&gt; config/package-lists/my.list.chroot<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#436" class="lnkocn">436</a></label>
  <p class="bold" id="436"><a name="436"></a> <a id="hkernel-flavour-and-version"></a>
    <a name="h8.2.9" ></a><a name="kernel-flavour-and-version" ></a>8.2.9 Versión y tipo de kernel
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#437" class="lnkocn">437</a></label>
  <p class="i0" id="437">
    Dependiendo de la arquitectura, se incluyen por defecto en las imágenes uno o más tipos de kernels. Se puede elegir entre diferentes tipos utilizando la opción <tt>--linux-flavours</tt>. Cada tipo tiene el sufijo de la raíz predeterminada <tt>linux-image</tt> para formar el nombre de cada metapaquete que a su vez depende del paquete del kernel exacto que debe incluirse en la imagen.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#438" class="lnkocn">438</a></label>
  <p class="i0" id="438">
    Así, por defecto, una imagen de arquitectura <tt>amd64</tt> incluirá el metapaquete <tt>linux-image-amd64</tt> y una imagen de arquitectura <tt>i386</tt> incluirá el metapaquete <tt>linux-image-586</tt>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#439" class="lnkocn">439</a></label>
  <p class="i0" id="439">
    Cuando hay más de una versión diferente del paquete del kernel disponible en los archivos configurados, se puede especificar el nombre de un paquete del kernel diferente con la opción <tt>--linux-packages</tt>. Por ejemplo, suponer que se está construyendo una image de arquitectura <tt>amd64</tt> y se quiere añadir el archivo experimental a fin de realizar pruebas. Para que se pueda instalar el kernel <tt>linux-image-3.18.0-trunk-amd64</tt>, se podría configurar la imagen de la siguiente manera:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#440" class="lnkocn">440</a></label>
  <p class="code" id="440">
    $ lb config --linux-packages linux-image-3.18.0-trunk<br>
$ echo "deb http://ftp.debian.org/debian/ experimental main" &gt; config/archives/experimental.list.chroot<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#441" class="lnkocn">441</a></label>
  <p class="bold" id="441"><a name="441"></a> <a id="hcustom-kernels"></a>
    <a name="h8.2.10" ></a><a name="custom-kernels" ></a>8.2.10 Kernels personalizados
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#442" class="lnkocn">442</a></label>
  <p class="i0" id="442">
    Se pueden crear e incluir kernels personalizados, pero hay que tener en cuenta que <i>live-build</i> sólo soporta los kernels que se integran en el sistema de gestión de paquetes de Debian y no es compatible con kernels que no esten en paquetes <tt>.deb</tt>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#443" class="lnkocn">443</a></label>
  <p class="i0" id="443">
    La manera apropiada y recomendada de implementar los propios paquetes del kernel es seguir las instrucciones del <tt>kernel-handbook</tt>. Recordar modificar el ABI y los sufijos de los tipos del kernel e incluir los paquetes del kernel completo en un repositorio que coincidan con los paquetes <tt>linux</tt> y <tt>linux-latest</tt>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#444" class="lnkocn">444</a></label>
  <p class="i0" id="444">
    Si se opta por construir los paquetes del kernel sin los metapaquetes adecuados, es necesario especificar una raíz <tt>--linux-packages</tt> apropiada como se indica en  <a href="customizing-package-installation.es.html#kernel-flavour-and-version">Versión y tipo de kernel</a>.  Tal y como se explica en  <a href="customizing-package-installation.es.html#installing-modified-or-third-party-packages">Instalar paquetes modificados o de terceros</a>,  es mejor si se incluyen los paquetes del kernel personalizado en un repositorio propio, aunque las alternativas discutidas en esa sección también funcionan.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#445" class="lnkocn">445</a></label>
  <p class="i0" id="445">
    Está más allá del alcance de este documento dar consejos sobre cómo personalizar un kernel. Sin embargo, se debe por lo menos, asegurarse de que la configuración cumple los siguientes requisitos mínimos:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#446" class="lnkocn">446</a></label>
  <ul>
  <li class="bullet" id="446">
    Utilizar un ramdisk inicial.
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#447" class="lnkocn">447</a></label>
  <ul>
  <li class="bullet" id="447">
    Incluir el módulo de unión de sistemas de ficheros (normalmente <tt>aufs</tt>).
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#448" class="lnkocn">448</a></label>
  <ul>
  <li class="bullet" id="448">
    Incluir todos los módulos de sistemas de ficheros requeridos por la configuración (normalmente <tt>squashfs</tt>).
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#449" class="lnkocn">449</a></label>
  <p class="bold" id="449"><a name="449"></a> <a id="hinstalling-modified-or-third-party-packages"></a>
    <a name="h8.3" ></a><a name="installing-modified-or-third-party-packages" ></a>8.3 Instalar paquetes modificados  o de terceros
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#450" class="lnkocn">450</a></label>
  <p class="i0" id="450">
    Si bien está en contra de la filosofía de un sistema en vivo, en ocasiones es necesario crear un sistema con versiones de paquetes modificados a partir de los disponibles en el repositorio de Debian. Estos paquetes pueden modificar características existentes o dar soporte a características adicionales, idiomas y marcas, o eliminar elementos existentes en los paquetes que no son de interes. De manera similar, se pueden incluir paquetes «de terceros» para añadir funcionalidades a medida o propietarias.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#451" class="lnkocn">451</a></label>
  <p class="i0" id="451">
    En esta sección no se describe la creación o mantenimiento de paquetes personalizados. Puede ser interesante una lectura del método descrito por Joachim Breitner 'How to fork privately' en ‹<a href="http://www.joachim-breitner.de/blog/archives/282-How-to-fork-privately.html" target="_top">http://www.joachim-breitner.de/blog/archives/282-How-to-fork-privately.html</a>›. La guía del nuevo desarrollador de Debian en ‹<a href="https://www.debian.org/doc/maint-guide/" target="_top">https://www.debian.org/doc/maint-guide/</a>› describe la creación de paquetes a medida.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#452" class="lnkocn">452</a></label>
  <p class="i0" id="452">
    Existen dos formas de instalar paquetes personalizados:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#453" class="lnkocn">453</a></label>
  <ul>
  <li class="bullet" id="453">
    <tt>packages.chroot</tt>
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#454" class="lnkocn">454</a></label>
  <ul>
  <li class="bullet" id="454">
    Utilizando un repositorio APT personalizado
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#455" class="lnkocn">455</a></label>
  <p class="i0" id="455">
    El método <tt>packages.chroot</tt> es el más simple para añadir paquetes personalizados. Es muy útil para personalizaciones «rápidas» pero tiene unos cuantos inconvenientes mientras que la utilización de un repositorio APT personalizado es más lento de poner en marcha.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#456" class="lnkocn">456</a></label>
  <p class="bold" id="456"><a name="456"></a> <a id="hc8.3.1"></a>
    <a name="c8.3.1" ></a><a name="h8.3.1" ></a>8.3.1 Método <tt>packages.chroot</tt> para instalar paquetes personalizados
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#457" class="lnkocn">457</a></label>
  <p class="i0" id="457">
    Para instalar paquetes personalizados solamente hay que copiar el paquete en el directorio <tt>config/packages.chroot/</tt>. Los paquetes contenidos en este directorio serán automáticamente instalados en el sistema en vivo durante el proceso de creación. No es necesario especificar nada más.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#458" class="lnkocn">458</a></label>
  <p class="i0" id="458">
    Los paquetes <b>deben</b> nombrarse de la forma prescrita. La forma más simple es usar <tt>dpkg-name</tt>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#459" class="lnkocn">459</a></label>
  <p class="i0" id="459">
    El método <tt>packages.chroot</tt> para la instalación de paquetes personalizados tiene desventajas:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#460" class="lnkocn">460</a></label>
  <ul>
  <li class="bullet" id="460">
    No es posible utilizar secure APT.
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#461" class="lnkocn">461</a></label>
  <ul>
  <li class="bullet" id="461">
    Se deben depositar todos los paquetes apropiados en el directorio <tt>config/packages.chroot/</tt>.
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#462" class="lnkocn">462</a></label>
  <ul>
  <li class="bullet" id="462">
    No es adecuado para almacenar configuraciones en vivo en un control de versiones.
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#463" class="lnkocn">463</a></label>
  <p class="bold" id="463"><a name="463"></a> <a id="hc8.3.2"></a>
    <a name="c8.3.2" ></a><a name="h8.3.2" ></a>8.3.2 Método de repositorio APT para instalar paquetes personalizados
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#464" class="lnkocn">464</a></label>
  <p class="i0" id="464">
    A diferencia del método <tt>packages.chroot</tt>, cuando se utiliza el método de repositorio APT personalizado se debe asegurar que se especifica dónde se deben buscar los paquetes a instalar. Para más información ver  <a href="customizing-package-installation.es.html#choosing-packages-to-install">Selección de los paquetes a instalar</a>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#465" class="lnkocn">465</a></label>
  <p class="i0" id="465">
    Aunque crear un repositorio APT para instalar paquetes personalizados puede parecer un esfuerzo innecesaro, la infraestructurar puede ser fácilmente reutilizada posteriormente para ofrecer nuevas versiones de los paquetes.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#466" class="lnkocn">466</a></label>
  <p class="bold" id="466"><a name="466"></a> <a id="hc8.3.3"></a>
    <a name="c8.3.3" ></a><a name="h8.3.3" ></a>8.3.3 Paquetes personalizados y APT
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#467" class="lnkocn">467</a></label>
  <p class="i0" id="467">
    <i>live-build</i> utiliza APT para instalar todos los paquetes en el sistema en vivo, así que hereda sus comportamientos. Un punto a resaltar es que (asumiendo una configuración de APT por defecto) dado un paquete en dos repositorios diferentes con diferentes números de versiones, APT seleccionará para instalar el paquete con número de versión superior.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#468" class="lnkocn">468</a></label>
  <p class="i0" id="468">
    Esta sería una buena razón para incrementar el número de version en los ficheros <tt>debian/changelog</tt> de los paquetes personalizados y así asegurar que serán estos los paquetes instalados en lugar de los contenidos en los repositorios oficiales de Debian. Esto puede también lograrse alterando las preferencias de pinning de APT del sistema en vivo. Para más información ver  <a href="customizing-package-installation.es.html#apt-pinning">APT pinning</a>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#469" class="lnkocn">469</a></label>
  <p class="bold" id="469"><a name="469"></a> <a id="hc8.4"></a>
    <a name="c8.4" ></a><a name="h8.4" ></a>8.4 Configurar APT en la creación
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#470" class="lnkocn">470</a></label>
  <p class="i0" id="470">
    Se puede configurar APT mediante varias opciones que se aplicarán en el momento de crear la imagen. (La configuración que APT utilizará cuando se ejecute el sistema en vivo puede ser configurada de la manera que habitualmente se utiliza para introducir contenidos del sistema en vivo, esto es, incluyendo las configuraciones apropiadas en el directorio <tt>config/includes.chroot/</tt>.) Se puede encontrar una lista completa de las opciones para configurar APT en la página de manual de <tt>lb_config</tt>. Son aquellas opciones que comienzan con <tt>apt</tt>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#471" class="lnkocn">471</a></label>
  <p class="bold" id="471"><a name="471"></a> <a id="hchoosing-apt-or-aptitude"></a>
    <a name="h8.4.1" ></a><a name="choosing-apt-or-aptitude" ></a>8.4.1 Utilizar apt o aptitude
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#472" class="lnkocn">472</a></label>
  <p class="i0" id="472">
    Se puede seleccionar qué herramienta se utilizará para instalar paquetes, <i>apt</i> o <i>aptitude</i>, en el momento de crear la imagen mediante la opción <tt>--apt</tt> de <tt>lb config</tt>. Esta selección definirá el comportamiento preferido en la instalación de paquetes, siendo la mayor diferencia la manera de tratar los paquetes no disponibles.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#473" class="lnkocn">473</a></label>
  <ul>
  <li class="bullet" id="473">
    <tt>apt</tt>: Con este método, si se especifica un paquete no existente, la instalación fallará. Es el comportamiento por defecto.
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#474" class="lnkocn">474</a></label>
  <ul>
  <li class="bullet" id="474">
    <tt>aptitude</tt>: Con este método, si se especifica un paquete no existente, la instalación continuará sin error.
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#475" class="lnkocn">475</a></label>
  <p class="bold" id="475"><a name="475"></a> <a id="hc8.4.2"></a>
    <a name="c8.4.2" ></a><a name="h8.4.2" ></a>8.4.2 Utilización de un proxy con APT
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#476" class="lnkocn">476</a></label>
  <p class="i0" id="476">
    Un problema habitual en la configuración de APT es tratar con la creación de una imagen desde detras de un proxy. Se puede especificar dicho proxy con las opciones <tt>--apt-ftp-proxy</tt> o <tt>--apt-http-proxy</tt>. Por ejemplo:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#477" class="lnkocn">477</a></label>
  <p class="code" id="477">
    $ lb config --apt-http-proxy http://proxy/<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#478" class="lnkocn">478</a></label>
  <p class="bold" id="478"><a name="478"></a> <a id="htweaking-apt-to-save-space"></a>
    <a name="h8.4.3" ></a><a name="tweaking-apt-to-save-space" ></a>8.4.3 Ajuste de APT para ahorrar espacio
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#479" class="lnkocn">479</a></label>
  <p class="i0" id="479">
    En ocasiones es necesario ahorrar un poco de espacio en el medio de instalación. Las dos opciones descritas a continuación pueden ser de interes.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#480" class="lnkocn">480</a></label>
  <p class="i0" id="480">
    Si no se desea incluir los índices de APT en la imagen creada se puede utilizar la siguiente opción:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#481" class="lnkocn">481</a></label>
  <p class="code" id="481">
    $ lb config --apt-indices false<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#482" class="lnkocn">482</a></label>
  <p class="i0" id="482">
    Esto no modificará el comportamiento de las entradas definidas en <tt>/etc/apt/sources.list</tt>, sino que solo afecta a si exitirán o no ficheros de índice en el directorio <tt>/var/lib/apt</tt>. El compromiso viene de que APT necesita estos ficheros índices para funcionar en el sistema en vivo, así que, si no existen, el usuario deberá ejecutar la orden <tt>apt-get update</tt> para crear estos índices antes de poder ejecutar una orden del tipo <tt>apt-cache search</tt> o <tt>apt-get install</tt>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#483" class="lnkocn">483</a></label>
  <p class="i0" id="483">
    Si la instalación de los paquetes recomendados aumenta demasiado el tamaño de la imagen, siempre y cuando se esté preparado para hacer frente a las consecuencias que se mencionan a continuación, se puede desactivar el valor por defecto de esta opción de APT con:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#484" class="lnkocn">484</a></label>
  <p class="code" id="484">
    $ lb config --apt-recommends false<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#485" class="lnkocn">485</a></label>
  <p class="i0" id="485">
    La consecuencia más importante de desactivar los «recommends» es que <tt>live-boot</tt> y <tt>live-config</tt> recomiendan algunos paquetes que proporcionan una funcionalidad importante y que son utilizados por la mayoría de las configuraciones en vivo, como por ejemplo <tt>user-setup</tt> recomendado por <tt>live-config</tt> que se utiliza para crear el usuario en vivo. En todas menos en las circunstancias más excepcionales es necesario volver a añadir por lo menos algunos de los «recommends» en las listas de paquetes o de lo contrario la imagen no funcionará como se espera, si es que funciona en lo más minimo. Mirar los paquetes recomendados por cada uno de los paquetes <tt>live-*</tt> incluidos en la construcción y si no se está seguro de que es lo que se puede omitir, volver a agregarlo utilizando las listas de paquetes.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#486" class="lnkocn">486</a></label>
  <p class="i0" id="486">
    La consecuencia más general es que, si no se instalan los paquetes recomendados para un paquete dado, esto es «los paquetes que supuestamente deberían encontrase intalados si un paquete ya lo está» (Debian Policy Manual, seccion 7.2), algún paquete que supuestamente debería estar instalado será omitido. Por lo tanto, se sugiere que si se desactiva esta opción, se revise las diferencias en las listas de paquetes instalados (ver el fichero <tt>binary.packages</tt> generado por <tt>lb build</tt>) y que se vuelva a incluir en la lista cualquier paquete que deba ser instalado. Si se considera que el número de paquetes a descartar es pequeño, se recomienda que la opción se deje activada y que se utilice una prioridad pin negativa de APT en dichos paquetes y así evitar que sean instalados tal y como se explica en  <a href="customizing-package-installation.es.html#apt-pinning">APT pinning</a>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#487" class="lnkocn">487</a></label>
  <p class="bold" id="487"><a name="487"></a> <a id="hc8.4.4"></a>
    <a name="c8.4.4" ></a><a name="h8.4.4" ></a>8.4.4 Pasar opciones a apt o a aptitude
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#488" class="lnkocn">488</a></label>
  <p class="i0" id="488">
    Si no hay una opción <tt>lb config</tt> para modificar el comportamiento de APT en la forma que se necesita, utilizar <tt>--apt-options</tt> o <tt>--aptitude-options</tt> para pasar opciones a la herramienta APT configurada. Consultar las páginas de manual <tt>apt</tt> y <tt>aptitude</tt> para más detalles. Tener en cuenta que ambas opciones tienen valores por defecto que tendran que mantenerse, además de las opciones que se pueden especificar. Así, por ejemplo, supongamos que se ha incluido algo con fines de prueba de <tt>snapshot.debian.org</tt> y se desea especificar <tt>Acquire::Check-Valid-Until=false</tt> para que APT esté feliz con el fichero <tt>Release</tt> caducado, se haría como en el ejemplo siguiente, añadiendo la opción de nuevo después del valor por defecto <tt>--yes</tt>:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#489" class="lnkocn">489</a></label>
  <p class="code" id="489">
    $ lb config --apt-options "--yes -oAcquire::Check-Valid-Until=false"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#490" class="lnkocn">490</a></label>
  <p class="i0" id="490">
    Consultar las páginas de manual para entender completamente estas opciones y cuándo utilizarlas. Esto es sólo un ejemplo y no debe ser interpretado como consejo para configurar la imagen. Esta opción no sería apropiada para, por ejemplo, una versión final de una imagen en vivo.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#491" class="lnkocn">491</a></label>
  <p class="i0" id="491">
    Para configuraciones más complicadas que implican opciones <tt>apt.conf</tt> puede ser necesario crear un fichero <tt>config/apt/apt.conf</tt>. Ver tambien las otras opciones <tt>apt-*</tt> para tener algunos atajos convenientes para las opciones que se necesitan con frecuencia.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#492" class="lnkocn">492</a></label>
  <p class="bold" id="492"><a name="492"></a> <a id="hapt-pinning"></a>
    <a name="h8.4.5" ></a><a name="apt-pinning" ></a>8.4.5 APT pinning
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#493" class="lnkocn">493</a></label>
  <p class="i0" id="493">
    Como información básica, sería recomendable leer la página de manual <tt>apt_preferences(5)</tt>. APT pinning puede ser configurado o en tiempo de creación de la imagen, creando los ficheros <tt>config/archives/*.pref</tt>, <tt>config/archives/*.pref.chroot</tt>, y <tt>config/apt/preferences</tt>. o en tiempo de ejecución del sistema en vivo creando el fichero <tt>config/includes.chroot/etc/apt/preferences</tt>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#494" class="lnkocn">494</a></label>
  <p class="i0" id="494">
    Supongamos que se está creando un sistema en vivo basado en <b>buster</b> pero se necesita instalar todos los paquetes "live" que terminan instalados en la imagen binaria final desde la versión inestable «<b>sid</b>» en el momento de crear la imagen. Se deberá añadir <b>sid</b> a los orígenes (sources) de APT y fijar (pin) los paquetes live con una prioridad más alta pero todos los otros paquetes con una prioridad más baja que la prioridad por defecto de manera que solamente los paquetes fijados sean instalados desde <b>sid</b> mientras que el resto será obtenido desde la distribución base, <b>buster</b>. Esto se puede realizar de la siguiente forma:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#495" class="lnkocn">495</a></label>
  <p class="code" id="495">
    $ echo "deb http://mirror/debian/ sid main" &gt; config/archives/sid.list.chroot<br>
$ cat &gt;&gt; config/archives/sid.pref.chroot &lt;&lt; EOF<br>
Package: live-*<br>
Pin: release n=sid<br>
Pin-Priority: 600<br><br>
Package: *<br>
Pin: release n=sid<br>
Pin-Priority: 1<br>
EOF<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#496" class="lnkocn">496</a></label>
  <p class="i0" id="496">
    Una prioridad pin negativa previene la instalación de un paquete, como puede ser el caso de que no se desee que un paquete recomendado por otro sea instalado al instalar el primero. Supongamos que se está creando una imagen LXDE añadiendo <tt>task-lxde-desktop</tt> en <tt>config/package-lists/desktop.list.chroot</tt>, pero no se desea preguntar al usuario si desea almacenar las claves wifi en el keyring. Este metapaquete depende de <i>lxde-core</i>, el cual recomienda <i>gksu</i> que a su vez recomienda <i>gnome-keyring</i>. Así que el objetivo es omitir la instalación del paquete <i>gnome-keyring</i>, que puede conseguirse añadiendo un fichero con el siguiente contenido a <tt>config/apt/preferences</tt>:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#497" class="lnkocn">497</a></label>
  <p class="code" id="497">
    Package: gnome-keyring<br>
Pin: version *<br>
Pin-Priority: -1<br>
  </p>
</div></div><br><div class="main_column">
  <table summary="segment navigation band" bgcolor="#ffffff" width="100%"><tr>
  <td width="70%" align="center">
    
<table summary="segment navigation available documents types: toc,doc,pdf,concordance" border="0" cellpadding="3" cellspacing="0">
<tr>
<td align="center" bgcolor="#ffffff">
  
  
</tr></table>
  </td>
  <td width="5%" align="right">
    <table summary="segment navigation pre/next" border="0" cellpadding="3" cellspacing="0">
<tr>
<td align="center" bgcolor="#ffffff">
  <a href="customization-overview.es.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_prev_red.png" alt="&lt;&lt;&nbsp;previous" />
  </a>
</td>
<td align="center" bgcolor="#ffffff">
  <a href="toc.es.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_up_red.png" alt="toc" />
  </a>
</td>
<td align="center" bgcolor="#ffffff">
  <a href="customizing-contents.es.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_next_red.png" alt="next&nbsp;&gt;&gt;" />
  </a>
</td>
<td>
</td></tr>
</table>
  </td></tr>
  </table>
  
</div><div class="main_column">

<a name="bottom" id="bottom"></a>
<a name="end" id="end"></a>
</div></div></body>
</html>