<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>
    customizing-run-time-behaviours -
    Live システムマニュアル
  </title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <meta name="dc.title" content="Live システムマニュアル" />
  <meta name="dc.author" content="Live システムプロジェクト &#60;debian-live@lists.debian.org&#62;" />
  <meta name="dc.publisher" content="Live システムプロジェクト &#60;debian-live@lists.debian.org&#62;" />
  <meta name="dc.date" content="2015-09-22"  />
  <meta name="dc.rights" content="Copyright: Copyright (C) 2006-2015 Live Systems Project \\ License: This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. \\  \\ This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details. \\  \\ You should have received a copy of the GNU General Public License along with this program. If not, see http://www.gnu.org/licenses/. \\  \\ The complete text of the GNU General Public License can be found in /usr/share/common-licenses/GPL-3 file." />

  <meta name="generator" content="SiSU 7.1.8 of 2016w08/5 (2016-02-26) (n*x and Ruby!)" />
    <link rel="generator" href="http://www.sisudoc.org/" />
  <link rel="shortcut icon" href="../_sisu/image/rb7.ico" />

  <link href="../../_sisu/css/html.css" rel="stylesheet">
</head>
<body lang="ja">
<a name="top" id="top"></a><table summary="segment navigation band with banner" bgcolor="#ffffff" width="100%"><tr>
<td width="20%" align="left">
 <table summary="home button / home information" border="0" cellpadding="3" cellspacing="0">
 <tr><td align="left" bgcolor="#ffffff">
  <p class="tiny_left"><a href="http://debian-live.alioth.debian.org/manual" target="_top">
    Live manual
  </a></p>
  <p class="tiny_left"><a href="http://debian-live.alioth.debian.org" target="_top">
    Live Systems
  </a></p>
 </td></tr>
 </table>
</td>
<td width="75%" align="center">
  
<table summary="segment navigation available documents types: toc,doc,pdf,concordance" border="0" cellpadding="3" cellspacing="0">
<tr>
<td align="center" bgcolor="#ffffff">
  
  
</tr></table>
</td>
<td width="5%" align="right">
  <table summary="segment navigation pre/next" border="0" cellpadding="3" cellspacing="0">
<tr>
<td align="center" bgcolor="#ffffff">
  <a href="customizing-contents.ja.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_prev_red.png" alt="&lt;&lt;&nbsp;previous" />
  </a>
</td>
<td align="center" bgcolor="#ffffff">
  <a href="toc.ja.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_up_red.png" alt="toc" />
  </a>
</td>
<td align="center" bgcolor="#ffffff">
  <a href="customizing-binary.ja.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_next_red.png" alt="next&nbsp;&gt;&gt;" />
  </a>
</td>
<td>
</td></tr>
</table>
</td></tr>
</table><div class="toc"><h1 class="minitoc">
    Live システムマニュアル
  </h1>

<h1 class="minitoc">
    About
  </h1>

<h1 class="minitoc">
    このマニュアルについて
  </h1>

<h4 class="minitoc">
      <a href="about-manual.ja.html" target="_top">
    1. このマニュアルについて
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="about-manual.ja.html#8">
    1.1 せっかちな人向け
  </a>
  </h5>

<h5 class="minitoc">
      <a href="about-manual.ja.html#12">
    1.2 用語
  </a>
  </h5>

<h5 class="minitoc">
      <a href="about-manual.ja.html#29">
    1.3 著者
  </a>
  </h5>

<h5 class="minitoc">
      <a href="about-manual.ja.html#44">
    1.4 この文書への貢献
  </a>
  </h5>

<h6 class="minitoc">
      <a href="about-manual.ja.html#46">
  1.4.1 変更の適用
</a>
  </h6>

<h6 class="minitoc">
      <a href="about-manual.ja.html#60">
  1.4.2 翻訳
</a>
  </h6>

<h1 class="minitoc">
    Live システムプロジェクトへの貢献
  </h1>

<h4 class="minitoc">
      <a href="about-project.ja.html" target="_top">
    2. Live システムプロジェクトについて
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="about-project.ja.html#75">
    2.1 動機
  </a>
  </h5>

<h6 class="minitoc">
      <a href="about-project.ja.html#76">
  2.1.1 現在の Live システムの問題点
</a>
  </h6>

<h6 class="minitoc">
      <a href="about-project.ja.html#86">
  2.1.2 自身の Live システムを作成する理由
</a>
  </h6>

<h5 class="minitoc">
      <a href="about-project.ja.html#94">
    2.2 哲学
  </a>
  </h5>

<h6 class="minitoc">
      <a href="about-project.ja.html#95">
  2.2.1 Debian「main」の変更しないパッケージしか使いません
</a>
  </h6>

<h6 class="minitoc">
      <a href="about-project.ja.html#99">
  2.2.2 Live システム固有のパッケージ設定はありません
</a>
  </h6>

<h5 class="minitoc">
      <a href="about-project.ja.html#103">
    2.3 連絡先
  </a>
  </h5>

<h1 class="minitoc">
    ユーザ
  </h1>

<h1 class="minitoc">
    インストール
  </h1>

<h4 class="minitoc">
      <a href="installation.ja.html" target="_top">
    3. インストール
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="installation.ja.html#110">
    3.1 要件
  </a>
  </h5>

<h5 class="minitoc">
      <a href="installation.ja.html#118">
    3.2 live-build のインストール
  </a>
  </h5>

<h6 class="minitoc">
      <a href="installation.ja.html#124">
  3.2.1 Debian リポジトリから
</a>
  </h6>

<h6 class="minitoc">
      <a href="installation.ja.html#127">
  3.2.2 ソースから
</a>
  </h6>

<h6 class="minitoc">
      <a href="installation.ja.html#138">
  3.2.3 「スナップショット」から
</a>
  </h6>

<h5 class="minitoc">
      <a href="installation.ja.html#140">
    3.3 live-boot と live-config のインストール
  </a>
  </h5>

<h6 class="minitoc">
      <a href="installation.ja.html#142">
  3.3.1 Debian リポジトリから
</a>
  </h6>

<h6 class="minitoc">
      <a href="installation.ja.html#144">
  3.3.2 ソースから
</a>
  </h6>

<h6 class="minitoc">
      <a href="installation.ja.html#156">
  3.3.3 「スナップショット」から
</a>
  </h6>

<h1 class="minitoc">
    基本
  </h1>

<h4 class="minitoc">
      <a href="the-basics.ja.html" target="_top">
    4. 基本
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="the-basics.ja.html#163">
    4.1 Live システムとは何?
  </a>
  </h5>

<h5 class="minitoc">
      <a href="the-basics.ja.html#171">
    4.2 ビルド済みイメージのダウンロード
  </a>
  </h5>

<h5 class="minitoc">
      <a href="the-basics.ja.html#173">
    4.3 ウェブ Live イメージビルダーの利用
  </a>
  </h5>

<h6 class="minitoc">
      <a href="the-basics.ja.html#175">
  4.3.1 ウェブビルダーの使い方と注意
</a>
  </h6>

<h5 class="minitoc">
      <a href="the-basics.ja.html#179">
    4.4 最初の段階: ISO hybrid イメージのビルド
  </a>
  </h5>

<h5 class="minitoc">
      <a href="the-basics.ja.html#190">
    4.5 ISO hybrid Live イメージの利用
  </a>
  </h5>

<h6 class="minitoc">
      <a href="the-basics.ja.html#192">
  4.5.1 ISOイメージの実際のメディアへの書き込み
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.ja.html#195">
  4.5.2 ISO hybrid イメージのUSBメモリへのコピー
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.ja.html#200">
  4.5.3 USBメモリの空きスペースの利用
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.ja.html#207">
  4.5.4 Live メディアのブート
</a>
  </h6>

<h5 class="minitoc">
      <a href="the-basics.ja.html#211">
    4.6 仮想マシンを利用したテスト
  </a>
  </h5>

<h6 class="minitoc">
      <a href="the-basics.ja.html#218">
  4.6.1 QEMU でのISOイメージのテスト
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.ja.html#225">
  4.6.2 VirtualBox でのISOイメージのテスト
</a>
  </h6>

<h5 class="minitoc">
      <a href="the-basics.ja.html#233">
    4.7 HDDイメージのビルド及び利用
  </a>
  </h5>

<h5 class="minitoc">
      <a href="the-basics.ja.html#245">
    4.8 netboot イメージのビルド
  </a>
  </h5>

<h6 class="minitoc">
      <a href="the-basics.ja.html#258">
  4.8.1 DHCP サーバ
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.ja.html#262">
  4.8.2 TFTP サーバ
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.ja.html#267">
  4.8.3 NFSサーバ
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.ja.html#275">
  4.8.4 ネットワーク経由のブートをテストする方法
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.ja.html#278">
  4.8.5 Qemu
</a>
  </h6>

<h5 class="minitoc">
      <a href="the-basics.ja.html#284">
    4.9 ウェブブート
  </a>
  </h5>

<h6 class="minitoc">
      <a href="the-basics.ja.html#286">
  4.9.1 ウェブブートファイルの取得
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.ja.html#292">
  4.9.2 ウェブブートイメージの起動
</a>
  </h6>

<h1 class="minitoc">
    ツールの概要
  </h1>

<h4 class="minitoc">
      <a href="overview-of-tools.ja.html" target="_top">
    5. ツールの概要
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="overview-of-tools.ja.html#300">
    5.1 live-build パッケージ
  </a>
  </h5>

<h6 class="minitoc">
      <a href="overview-of-tools.ja.html#310">
  5.1.1 <tt>lb config</tt> コマンド
</a>
  </h6>

<h6 class="minitoc">
      <a href="overview-of-tools.ja.html#320">
  5.1.2 <tt>lb build</tt> コマンド
</a>
  </h6>

<h6 class="minitoc">
      <a href="overview-of-tools.ja.html#322">
  5.1.3 <tt>lb clean</tt> コマンド
</a>
  </h6>

<h5 class="minitoc">
      <a href="overview-of-tools.ja.html#324">
    5.2 live-boot パッケージ
  </a>
  </h5>

<h5 class="minitoc">
      <a href="overview-of-tools.ja.html#328">
    5.3 live-config パッケージ
  </a>
  </h5>

<h1 class="minitoc">
    設定の管理
  </h1>

<h4 class="minitoc">
      <a href="managing-a-configuration.ja.html" target="_top">
    6. 設定の管理
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="managing-a-configuration.ja.html#333">
    6.1 設定変更への対応
  </a>
  </h5>

<h6 class="minitoc">
      <a href="managing-a-configuration.ja.html#335">
  6.1.1 自動化スクリプトを使う理由は? それは何をするもの?
</a>
  </h6>

<h6 class="minitoc">
      <a href="managing-a-configuration.ja.html#338">
  6.1.2 自動化スクリプトの使用例
</a>
  </h6>

<h5 class="minitoc">
      <a href="managing-a-configuration.ja.html#345">
    6.2 Git経由で公開されている設定の複製
  </a>
  </h5>

<h1 class="minitoc">
    収録内容の独自化
  </h1>

<h4 class="minitoc">
      <a href="customization-overview.ja.html" target="_top">
    7. 独自化の概要
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customization-overview.ja.html#359">
    7.1 ビルド時とブート時の設定
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customization-overview.ja.html#362">
    7.2 ビルド段階
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customization-overview.ja.html#365">
    7.3 ファイルによる lb config の補完
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customization-overview.ja.html#367">
    7.4 独自化タスク
  </a>
  </h5>

<h1 class="minitoc">
    インストールするパッケージの独自化
  </h1>

<h4 class="minitoc">
      <a href="customizing-package-installation.ja.html" target="_top">
    8. インストールするパッケージの独自化
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customizing-package-installation.ja.html#372">
    8.1 パッケージソース
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#373">
  8.1.1 ディストリビューション、アーカイブ領域とモード
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#380">
  8.1.2 ディストリビューションミラー
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#382">
  8.1.3 ビルド時に利用するディストリビューションミラー
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#386">
  8.1.4 実行時に利用するディストリビューションミラー
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#389">
  8.1.5 追加リポジトリ
</a>
  </h6>

<h5 class="minitoc">
      <a href="customizing-package-installation.ja.html#397">
    8.2 インストールするパッケージの選択
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#399">
  8.2.1 パッケージ一覧
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#402">
  8.2.2 メタパッケージの利用
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#410">
  8.2.3 ローカルパッケージ一覧
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#414">
  8.2.4 ローカルバイナリパッケージ一覧
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#416">
  8.2.5 生成されたパッケージ一覧
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#420">
  8.2.6 条件付き内部パッケージ一覧の利用
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#429">
  8.2.7 インストール時のパッケージの削除
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#431">
  8.2.8 デスクトップ及び言語タスク
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#436">
  8.2.9 カーネルのフレーバー (種類) とバージョン
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#441">
  8.2.10 独自のカーネル
</a>
  </h6>

<h5 class="minitoc">
      <a href="customizing-package-installation.ja.html#449">
    8.3 変更したあるいはサードパーティ製パッケージのインストール
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#456">
  8.3.1 <tt>packages.chroot</tt> を利用した独自のパッケージのインストール
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#463">
  8.3.2 APTリポジトリを利用した独自パッケージのインストール
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#466">
  8.3.3 独自パッケージとAPT
</a>
  </h6>

<h5 class="minitoc">
      <a href="customizing-package-installation.ja.html#469">
    8.4 ビルド時のAPT設定
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#471">
  8.4.1 apt と aptitude の選択
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#475">
  8.4.2 APTでのプロキシの利用
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#478">
  8.4.3 APTの調整による容量節約
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#487">
  8.4.4 apt や aptitude へのオプションの受け渡し
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ja.html#492">
  8.4.5 APTのピン止め
</a>
  </h6>

<h1 class="minitoc">
    収録内容の独自化
  </h1>

<h4 class="minitoc">
      <a href="customizing-contents.ja.html" target="_top">
    9. 収録内容の独自化
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customizing-contents.ja.html#501">
    9.1 Includes
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-contents.ja.html#506">
  9.1.1 Live/chroot ローカルインクルード
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-contents.ja.html#513">
  9.1.2 バイナリローカルインクルード
</a>
  </h6>

<h5 class="minitoc">
      <a href="customizing-contents.ja.html#517">
    9.2 フック
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-contents.ja.html#520">
  9.2.1 chroot ローカルフック
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-contents.ja.html#522">
  9.2.2 バイナリローカルフック
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-contents.ja.html#524">
  9.2.3 ブート時フック
</a>
  </h6>

<h5 class="minitoc">
      <a href="customizing-contents.ja.html#526">
    9.3 Debconf 質問の preseed
  </a>
  </h5>

<h1 class="minitoc">
    実行時の挙動の独自化
  </h1>

<h4 class="minitoc">
      <a href="customizing-run-time-behaviours.ja.html" target="_top">
    10. 実行時の挙動の独自化
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customizing-run-time-behaviours.ja.html#532">
    10.1 live ユーザの独自化
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customizing-run-time-behaviours.ja.html#541">
    10.2 ロケールと言語の独自化
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customizing-run-time-behaviours.ja.html#558">
    10.3 保持機能
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-run-time-behaviours.ja.html#580">
  10.3.1 persistence.conf ファイル
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-run-time-behaviours.ja.html#585">
  10.3.2 保持先を複数使いたい場合
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-run-time-behaviours.ja.html#591">
  10.3.3 暗号化した保持先の利用
</a>
  </h6>

<h1 class="minitoc">
    バイナリイメージの独自化
  </h1>

<h4 class="minitoc">
      <a href="customizing-binary.ja.html" target="_top">
    11. バイナリイメージの独自化
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customizing-binary.ja.html#619">
    11.1 ブートローダ
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customizing-binary.ja.html#626">
    11.2 ISO メタ情報
  </a>
  </h5>

<h1 class="minitoc">
    Debian インストーラの独自化
  </h1>

<h4 class="minitoc">
      <a href="customizing-installer.ja.html" target="_top">
    12. Debian インストーラの独自化
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customizing-installer.ja.html#636">
    12.1 Debian インストーラの種類
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customizing-installer.ja.html#648">
    12.2 preseed による Debian インストーラの独自化
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customizing-installer.ja.html#651">
    12.3 Debian インストーラの収録内容の独自化
  </a>
  </h5>

<h1 class="minitoc">
    プロジェクト
  </h1>

<h1 class="minitoc">
    プロジェクトへの貢献
  </h1>

<h4 class="minitoc">
      <a href="contributing-to-project.ja.html" target="_top">
    13. プロジェクトへの貢献
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="contributing-to-project.ja.html#667">
    13.1 変更を加える
  </a>
  </h5>

<h5 class="minitoc">
      <a href="contributing-to-project.ja.html#682">
    13.2 man ページの翻訳
  </a>
  </h5>

<h1 class="minitoc">
    バグの報告
  </h1>

<h4 class="minitoc">
      <a href="bugs.ja.html" target="_top">
    14. バグの報告
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="bugs.ja.html#698">
    14.1 既知の問題
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.ja.html#703">
    14.2 最初から再ビルド
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.ja.html#705">
    14.3 最新のパッケージを使う
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.ja.html#707">
    14.4 情報収集
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.ja.html#724">
    14.5 可能であれば失敗している状況を分離する
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.ja.html#726">
    14.6 正しいパッケージに対してバグを報告する
  </a>
  </h5>

<h6 class="minitoc">
      <a href="bugs.ja.html#729">
  14.6.1 ビルド時のパッケージ収集中
</a>
  </h6>

<h6 class="minitoc">
      <a href="bugs.ja.html#732">
  14.6.2 ビルド時のパッケージインストール中
</a>
  </h6>

<h6 class="minitoc">
      <a href="bugs.ja.html#736">
  14.6.3 ブート時
</a>
  </h6>

<h6 class="minitoc">
      <a href="bugs.ja.html#738">
  14.6.4 実行時
</a>
  </h6>

<h5 class="minitoc">
      <a href="bugs.ja.html#740">
    14.7 調査してください
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.ja.html#744">
    14.8 バグの報告先
  </a>
  </h5>

<h1 class="minitoc">
    コーディングスタイル
  </h1>

<h4 class="minitoc">
      <a href="coding-style.ja.html" target="_top">
    15. コーディングスタイル
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="coding-style.ja.html#751">
    15.1 互換性
  </a>
  </h5>

<h5 class="minitoc">
      <a href="coding-style.ja.html#756">
    15.2 インデント
  </a>
  </h5>

<h5 class="minitoc">
      <a href="coding-style.ja.html#758">
    15.3 改行
  </a>
  </h5>

<h5 class="minitoc">
      <a href="coding-style.ja.html#770">
    15.4 変数
  </a>
  </h5>

<h5 class="minitoc">
      <a href="coding-style.ja.html#789">
    15.5 その他
  </a>
  </h5>

<h1 class="minitoc">
    手順
  </h1>

<h4 class="minitoc">
      <a href="procedures.ja.html" target="_top">
    16. 手順
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="procedures.ja.html#797">
    16.1 主要リリース
  </a>
  </h5>

<h5 class="minitoc">
      <a href="procedures.ja.html#803">
    16.2 ポイントリリース
  </a>
  </h5>

<h6 class="minitoc">
      <a href="procedures.ja.html#807">
  16.2.1 ある Debian リリースの最後のポイントリリース
</a>
  </h6>

<h6 class="minitoc">
      <a href="procedures.ja.html#809">
  16.2.2 ポイントリリース告知用テンプレート
</a>
  </h6>

<h1 class="minitoc">
    Gitリポジトリ
  </h1>

<h4 class="minitoc">
      <a href="git-repositories.ja.html" target="_top">
    17. Gitリポジトリ
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="git-repositories.ja.html#827">
    17.1 リポジトリを複数処理
  </a>
  </h5>

<h1 class="minitoc">
    例
  </h1>

<h1 class="minitoc">
    例
  </h1>

<h4 class="minitoc">
      <a href="examples.ja.html" target="_top">
    18. 例
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="examples.ja.html#835">
    18.1 例の使用
  </a>
  </h5>

<h5 class="minitoc">
      <a href="examples.ja.html#839">
    18.2 チュートリアル 1: デフォルトイメージ
  </a>
  </h5>

<h5 class="minitoc">
      <a href="examples.ja.html#848">
    18.3 チュートリアル 2: ウェブブラウザユーティリティ
  </a>
  </h5>

<h5 class="minitoc">
      <a href="examples.ja.html#856">
    18.4 チュートリアル 3: 私的イメージ
  </a>
  </h5>

<h6 class="minitoc">
      <a href="examples.ja.html#859">
  18.4.1 最初の改訂
</a>
  </h6>

<h6 class="minitoc">
      <a href="examples.ja.html#873">
  18.4.2 2回目の改訂
</a>
  </h6>

<h5 class="minitoc">
      <a href="examples.ja.html#885">
    18.5 VNC 公衆クライアント
  </a>
  </h5>

<h5 class="minitoc">
      <a href="examples.ja.html#899">
    18.6 128MB USB メモリ向けの基本イメージ
  </a>
  </h5>

<h5 class="minitoc">
      <a href="examples.ja.html#910">
    18.7 地域化した GNOME デスクトップとインストーラ
  </a>
  </h5>

<h1 class="minitoc">
    付録
  </h1>

<h1 class="minitoc">
    スタイルガイド
  </h1>

<h4 class="minitoc">
      <a href="style-guide.ja.html" target="_top">
    19. スタイルガイド
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="style-guide.ja.html#925">
    19.1 著者向けガイドライン
  </a>
  </h5>

<h6 class="minitoc">
      <a href="style-guide.ja.html#928">
  19.1.1 言語特性
</a>
  </h6>

<h6 class="minitoc">
      <a href="style-guide.ja.html#961">
  19.1.2 手順
</a>
  </h6>

<h5 class="minitoc">
      <a href="style-guide.ja.html#1000">
    19.2 翻訳者向けガイドライン
  </a>
  </h5>

<h6 class="minitoc">
      <a href="style-guide.ja.html#1004">
  19.2.1 翻訳の手がかり
</a>
  </h6>

<h1 class="minitoc">
    <b><a href="metadata.ja.html">Metadata</a></b>
  </h1>

<h4 class="minitoc">
      <a href="metadata.ja.html" target="_top">
    SiSU Metadata, document information
  </a> 
  </h4>
</div><div class="content">
<h1 class="tiny">
    Live システムマニュアル
  </h1>
</div><div class="content">
<h1 class="tiny">
    実行時の挙動の独自化
  </h1>
</div><div class="content"><div class="substance">
  <label class="ocn"><a href="#530" class="lnkocn">530</a></label>
  <h1 class="norm" id="530"><a name="530"></a>
    10. 実行時の挙動の独自化
  </h1>
</div><div class="substance">
  <label class="ocn"><a href="#531" class="lnkocn">531</a></label>
  <p class="i0" id="531">
    実行時に行われる設定は全て <i>live-config</i> により行われます。ユーザが関心を持つであろう <i>live-config</i> の最も一般的なオプションから一部を説明します。オプションの全容は <i>live-config</i> の man ページにあります。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#532" class="lnkocn">532</a></label>
  <p class="bold" id="532"><a name="532"></a> <a id="hc10.1"></a>
    <a name="c10.1" ></a><a name="h10.1" ></a>10.1 live ユーザの独自化
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#533" class="lnkocn">533</a></label>
  <p class="i0" id="533">
    重要な検討事項が1つあり、live ユーザはブート時に <i>live-boot</i> により作成され、ビルド時に <i>live-build</i> により作成されるのではないということです。この影響は  <a href="customizing-contents.ja.html#live-chroot-local-includes">Live/chroot ローカルインクルード</a>  で説明しているように、ビルドで live ユーザに関連する内容が導入されるところだけにはとどまらず、live ユーザに関連するグループや権限にも影響します。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#534" class="lnkocn">534</a></label>
  <p class="i0" id="534">
    <i>live-config</i> を設定できる複数の方法で live ユーザの所属する追加のグループを指定できます。例えば live ユーザを <tt>fuse</tt> グループに追加するには <tt>config/includes.chroot/etc/live/config/user-setup.conf</tt> ファイルに
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#535" class="lnkocn">535</a></label>
  <p class="code" id="535">
    LIVE_USER_DEFAULT_GROUPS="audio cdrom dip floppy video plugdev netdev powerdev scanner bluetooth fuse"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#536" class="lnkocn">536</a></label>
  <p class="i0" id="536">
    を追加するかブートパラメータとして <tt>live-config.user-default-groups=audio,cdrom,dip,floppy,video,plugdev,netdev,powerdev,scanner,bluetooth,fuse</tt> と指定します。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#537" class="lnkocn">537</a></label>
  <p class="i0" id="537">
    デフォルトのユーザ名「user」やデフォルトのパスワード「live」を変更することもできます。何らかの理由で変更したい場合は以下のようにして簡単に変更できます:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#538" class="lnkocn">538</a></label>
  <p class="i0" id="538">
    デフォルトのユーザ名を変更するには単に設定で指定します:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#539" class="lnkocn">539</a></label>
  <p class="code" id="539">
    $ lb config --bootappend-live "boot=live components username=live-user"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#540" class="lnkocn">540</a></label>
  <p class="i0" id="540">
    デフォルトのパスワードを変更できる1つの方法は <a href="customizing-contents.ja.html#boot-time-hooks">ブート時フック</a>  で説明しているフックを使います。そのためには <tt>/usr/share/doc/live-config/examples/hooks</tt> から「passwd」を使い、適当な名前 (例えば 2000-passwd) で保存してそれを <tt>config/includes.chroot/lib/live/config/</tt> に追加します。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#541" class="lnkocn">541</a></label>
  <p class="bold" id="541"><a name="541"></a> <a id="hcustomizing-locale-and-language"></a>
    <a name="h10.2" ></a><a name="customizing-locale-and-language" ></a>10.2 ロケールと言語の独自化
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#542" class="lnkocn">542</a></label>
  <p class="i0" id="542">
    Live システムがブートする際、2つの段階で言語が関わってきます:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#543" class="lnkocn">543</a></label>
  <ul>
  <li class="bullet" id="543">
    ロケール生成
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#544" class="lnkocn">544</a></label>
  <ul>
  <li class="bullet" id="544">
    キーボードの設定
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#545" class="lnkocn">545</a></label>
  <p class="i0" id="545">
    Live システムをビルドする際のデフォルトのロケールは <tt>locales=en_US.UTF-8</tt> となっています。生成したいロケールの定義には <tt>lb config</tt> の <tt>--bootappend-live</tt> オプションで <tt>locales</tt> パラメータを指定します。例えば
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#546" class="lnkocn">546</a></label>
  <p class="code" id="546">
    $ lb config --bootappend-live "boot=live components locales=de_CH.UTF-8"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#547" class="lnkocn">547</a></label>
  <p class="i0" id="547">
    ロケールをコンマで区切って複数指定することもできます。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#548" class="lnkocn">548</a></label>
  <p class="i0" id="548">
    このパラメータも以下に示すキーボード設定用パラメータと同様にカーネルコマンドラインで指定できます。ロケールは <tt>言語_国</tt> (デフォルトのエンコーディングを使う場合) または完全な <tt>言語_国.エンコーディング</tt> の形式で指定できます。サポートしているロケールやそれぞれで利用されるエンコーディングの一覧は <tt>/usr/share/i18n/SUPPORTED</tt> にあります。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#549" class="lnkocn">549</a></label>
  <p class="i0" id="549">
    コンソールとXキーボードの設定はどちらも <tt>live-config</tt> により <tt>console-setup</tt> パッケージを使って行われます。設定には <tt>--bootappend-live</tt> オプション経由で <tt>keyboard-layouts</tt>、<tt>keyboard-variants</tt>、<tt>keyboard-options</tt>、<tt>keyboard-model</tt> ブートパラメータを利用します。それぞれの有効なオプションは <tt>/usr/share/X11/xkb/rules/base.lst</tt> にあります。ある言語向けのレイアウトや配列を見つけるには、その言語の英語名やその言語が話されている国を検索してみてください。例:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#550" class="lnkocn">550</a></label>
  <p class="code" id="550">
    $ egrep -i '(^!|german.*switzerland)' /usr/share/X11/xkb/rules/base.lst<br>
! model<br>
! layout<br>
&nbsp;&nbsp;&nbsp;ch&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;German (Switzerland)<br>
! variant<br>
&nbsp;&nbsp;&nbsp;legacy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ch: German (Switzerland, legacy)<br>
&nbsp;&nbsp;&nbsp;de_nodeadkeys&nbsp;&nbsp;&nbsp;ch: German (Switzerland, eliminate dead keys)<br>
&nbsp;&nbsp;&nbsp;de_sundeadkeys&nbsp;&nbsp;ch: German (Switzerland, Sun dead keys)<br>
&nbsp;&nbsp;&nbsp;de_mac&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ch: German (Switzerland, Macintosh)<br>
! option<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#551" class="lnkocn">551</a></label>
  <p class="i0" id="551">
    それぞれの配列の説明に、適合するレイアウトが示されていることに注意してください。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#552" class="lnkocn">552</a></label>
  <p class="i0" id="552">
    レイアウトだけを設定する必要があることはよくあります。例えばXで利用するドイツ語のロケールファイル及びスイスのドイツ語のキーボードレイアウトを利用する場合:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#553" class="lnkocn">553</a></label>
  <p class="code" id="553">
    $ lb config --bootappend-live "boot=live components locales=de_CH.UTF-8 keyboard-layouts=ch"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#554" class="lnkocn">554</a></label>
  <p class="i0" id="554">
    非常に具体的な事例ですが他のパラメータを同時に指定することもできます。例えばフランス語のシステムを用意して TypeMatrix EZ-Reach 2030 USB キーボードで (Bepo と呼ばれる) フランス語用の Dvorak 配置を使う場合:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#555" class="lnkocn">555</a></label>
  <p class="code" id="555">
    $ lb config --bootappend-live \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"boot=live components locales=fr_FR.UTF-8 keyboard-layouts=fr keyboard-variants=bepo keyboard-model=tm2030usb"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#556" class="lnkocn">556</a></label>
  <p class="i0" id="556">
    値を1つだけ受け付ける <tt>keyboard-model</tt> は例外ですが、他の <tt>keyboard-*</tt> オプションではそれぞれに値をコンマで区切って複数指定することもできます。<tt>XKBMODEL</tt> や <tt>XKBLAYOUT</tt>、<tt>XKBVARIANT</tt>、<tt>XKBOPTIONS</tt> 変数の詳細や例については <tt>keyboard(5)</tt> man ページを見てください。<tt>keyboard-variants</tt> に複数の値を指定した場合、1つずつ <tt>keyboard-layouts</tt> の値 (<tt>setxkbmap(1)</tt> の <tt>-variant</tt> オプション参照) との照合が行われます。空白の値も使えます。例えばデフォルトとして米国向けの QWERTY、それとは別に米国向けの Dvorak、の2つの配列を指定する場合:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#557" class="lnkocn">557</a></label>
  <p class="code" id="557">
    $ lb config --bootappend-live \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"boot=live components keyboard-layouts=us,us keyboard-variants=,dvorak"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#558" class="lnkocn">558</a></label>
  <p class="bold" id="558"><a name="558"></a> <a id="hpersistence"></a>
    <a name="h10.3" ></a><a name="persistence" ></a>10.3 保持機能
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#559" class="lnkocn">559</a></label>
  <p class="i0" id="559">
    典型的なライブCDというものは CD-ROM 等の読み取り専用メディアから起動するインストール済みシステムで、書き込みや変更は起動したホストハードウェアの再起動により消え去ります。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#560" class="lnkocn">560</a></label>
  <p class="i0" id="560">
    Live システムはそれを一般化したものであり、CD以外のメディアもサポートしますが、デフォルトの挙動としては読み取り専用であり、そのシステムで実行時に行ったことは全てシャットダウンにより失われるものだと考えるべきです。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#561" class="lnkocn">561</a></label>
  <p class="i0" id="561">
    「保持機能」というのは、実行時にシステムに行ったことの一部あるいは全てを保存し、リブート後に引き継ぐための様々な策の共通の呼び名です。それが機能する仕組みを理解するためには、読み取り専用メディアからブート、実行している場合でもファイルやディレクトリへの変更が書き込み可能メディア、標準的にはRAMディスク (tmpfs) に書かれ、RAMディスクのデータはリブート後には残らないのだ、ということを知っておくと良いでしょう。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#562" class="lnkocn">562</a></label>
  <p class="i0" id="562">
    このRAMディスクに保存されるデータは、ローカルストレージメディアやネットワーク共有、あるいはマルチセッションで (再)書き込み可能な CD/DVD のセッション等の書き込み可能な保持用メディアに保存する必要があります。こういったメディアは Live システムで様々な方法でサポートされています。また、特別なブートパラメータ <tt>persistence</tt> をブート時に指定する必要があるということも重要です。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#563" class="lnkocn">563</a></label>
  <p class="i0" id="563">
    ブートパラメータ <tt>persistence</tt> がセットされている (と同時に <tt>nopersistence</tt> がセットされていない) 場合、保持用ボリューム用のローカルストレージメディア (例えばハードディスクやUSBドライブ) がブート中に調査されます。<i>live-boot</i>(7) man ページで説明している特定のブートパラメータを指定することにより、利用する保持用ボリュームの種類を制限できます。保持用ボリュームは以下のどれかになります:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#564" class="lnkocn">564</a></label>
  <ul>
  <li class="bullet" id="564">
    GPT名により識別されるパーティション
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#565" class="lnkocn">565</a></label>
  <ul>
  <li class="bullet" id="565">
    ファイルシステムラベルにより識別されるファイルシステム
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#566" class="lnkocn">566</a></label>
  <ul>
  <li class="bullet" id="566">
    読み取り可能な任意のファイルシステム (異質のOSの NTFS パーティションも利用可) の最上位に置かれている、ファイル名により識別されるイメージファイル
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#567" class="lnkocn">567</a></label>
  <p class="i0" id="567">
    オーバーレイ用のボリュームラベルは <tt>persistence</tt> でないといけません。さらにその最上位に、ボリュームの保持を完全に制御するのに利用する <tt>persistence.conf</tt> というファイルが置かれていない限り無視されます。これは言うに及ばず、リブート後に保持用ボリュームに保存する対象となるディレクトリを指定します。さらなる詳細については  <a href="customizing-run-time-behaviours.ja.html#persistence-conf">persistence.conf ファイル</a>  を見てください。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#568" class="lnkocn">568</a></label>
  <p class="i0" id="568">
    保持用に利用するボリュームを用意する方法についていくつか例を示します。これは例えばハードディスクやUSBメモリに例えば
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#569" class="lnkocn">569</a></label>
  <p class="code" id="569">
    # mkfs.ext4 -L persistence /dev/sdb1<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#570" class="lnkocn">570</a></label>
  <p class="i0" id="570">
    により作成した ext4 パーティションを利用できます。 <a href="the-basics.ja.html#using-usb-extra-space">USBメモリの空きスペースの利用</a>  も見てください。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#571" class="lnkocn">571</a></label>
  <p class="i0" id="571">
    デバイスに既存のパーティションがある場合は以下に示すどれかによりラベルを変更するだけで準備は終わりです:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#572" class="lnkocn">572</a></label>
  <p class="code" id="572">
    # tune2fs -L persistence /dev/sdb1 # for ext2,3,4 filesystems<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#573" class="lnkocn">573</a></label>
  <p class="i0" id="573">
    保持用に利用する ext4 ベースのイメージファイルの作成例:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#574" class="lnkocn">574</a></label>
  <p class="code" id="574">
    $ dd if=/dev/null of=persistence bs=1 count=0 seek=1G # for a 1GB sized image file<br>
$ /sbin/mkfs.ext4 -F persistence<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#575" class="lnkocn">575</a></label>
  <p class="i0" id="575">
    イメージファイル作成後、例えば <tt>/usr</tt> を保持させる場合に、保存するのはディレクトリに対する変更だけで、<tt>/usr</tt> の内容を丸ごと保存したいわけではない、という場合、「union」オプションを利用できます。イメージファイルがホームディレクトリに置かれている場合はハードドライブのファイルシステム最上位にコピーして <tt>/mnt</tt> にマウントします:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#576" class="lnkocn">576</a></label>
  <p class="code" id="576">
    # cp persistence /<br>
# mount -t ext4 /persistence /mnt<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#577" class="lnkocn">577</a></label>
  <p class="i0" id="577">
    それから、内容を追加する <tt>persistence.conf</tt> ファイルを作成してイメージファイルのマウントを解除します。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#578" class="lnkocn">578</a></label>
  <p class="code" id="578">
    # echo "/usr union" &gt;&gt; /mnt/persistence.conf<br>
# umount /mnt<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#579" class="lnkocn">579</a></label>
  <p class="i0" id="579">
    ブートパラメータ「persistence」を指定して Live メディアでリブートします。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#580" class="lnkocn">580</a></label>
  <p class="bold" id="580"><a name="580"></a> <a id="hpersistence-conf"></a>
    <a name="h10.3.1" ></a><a name="persistence-conf" ></a>10.3.1 persistence.conf ファイル
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#581" class="lnkocn">581</a></label>
  <p class="i0" id="581">
    <tt>persistence</tt> のラベルを付けられたボリュームは <tt>persistence.conf</tt> ファイルを使って、任意のディレクトリを保持するように設定します。ボリュームのファイルシステム最上位に置かれているこのファイルは保持するディレクトリや方法を制御します。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#582" class="lnkocn">582</a></label>
  <p class="i0" id="582">
    独自のオーバーレイマウントの設定方法は persistence.conf(5) man ページで詳細に説明されていますが、ほとんどの場合簡単な例で十分なはずです。/dev/sdb1 パーティションの ext4 ファイルシステムにホームディレクトリとAPTキャッシュを保持させる場合:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#583" class="lnkocn">583</a></label>
  <p class="code" id="583">
    # mkfs.ext4 -L persistence /dev/sdb1<br>
# mount -t ext4 /dev/sdb1 /mnt<br>
# echo "/home" &gt;&gt; /mnt/persistence.conf<br>
# echo "/var/cache/apt" &gt;&gt; /mnt/persistence.conf<br>
# umount /mnt<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#584" class="lnkocn">584</a></label>
  <p class="i0" id="584">
    それからリブートします。最初のブート中に <tt>/home</tt> と <tt>/var/cache/apt</tt> の内容が保持用ボリュームにコピーされ、以後のこのディレクトリへの変更は全て保持用ボリュームに残ります。<tt>persistence.conf</tt> ファイルに列挙するパスには空白文字や特別なパス構成要素 <tt>.</tt> and <tt>..</tt> を含めることは一切できないことに注意してください。また、<tt>/lib</tt> や <tt>/lib/live</tt> (はそのサブディレクトリを含めて)、<tt>/</tt> は独自マウントを使って保持させることができません。この制約の回避策として、<tt>persistence.conf</tt> ファイルに <tt>/ union</tt> を追加すると完全な保持を実現できます。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#585" class="lnkocn">585</a></label>
  <p class="bold" id="585"><a name="585"></a> <a id="hc10.3.2"></a>
    <a name="c10.3.2" ></a><a name="h10.3.2" ></a>10.3.2 保持先を複数使いたい場合
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#586" class="lnkocn">586</a></label>
  <p class="i0" id="586">
    複数の保存先を使う方法は複数あります。目的の明確な例として、複数のボリュームを同時に使う場合と1つだけを選択して使う場合を取り上げます。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#587" class="lnkocn">587</a></label>
  <p class="i0" id="587">
    異なる (個別の <tt>persistence.conf</tt> ファイルを利用する) 独自オーバーレイボリュームを複数同時に利用できますが、同一のディレクトリを保持させる設定のボリュームが複数ある場合はその中から1つだけが利用されます。ある2つのマウントが「入り組んでいる」(つまり他にマウントしたディレクトリ以下のサブディレクトリとしてマウントする) ような場合には子孫側ディレクトリよりも前に親側ディレクトリがマウントされるため、他のマウントにより見えなくなるマウントは発生しません。入り組んでいる独自マウントが同一の <tt>persistence.conf</tt> ファイルで指定されている場合は問題があります。そういった状況が実際に必要な場合の処理方法については persistence.conf(5) man ページを見てください (ヒント: 通常は必要ありません)。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#588" class="lnkocn">588</a></label>
  <p class="i0" id="588">
    ありそうな事例: ユーザデータ、つまり <tt>/home</tt> とスーパーユーザのデータ、つまり <tt>/root</tt> を異なるパーティションに保存するため <tt>persistence</tt> ラベルの付いたパーティションを2つ作成し、それぞれに <tt>persistence.conf</tt> ファイルを1つはユーザのファイルを保存する最初のパーティション向けに <tt># echo "/home" &gt; persistence.conf</tt>、もう1つはスーパーユーザのファイルを保存する2つ目のパーティション向けに <tt># echo "/root" &gt; persistence.conf</tt> として作成します。最後に、ブートパラメータとして <tt>persistence</tt> を使います。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#589" class="lnkocn">589</a></label>
  <p class="i0" id="589">
    別の位置やテストのために例えば <tt>private</tt> と <tt>work</tt> のようにして同一の種類で複数の保持先が必要な場合、ブートパラメータ <tt>persistence</tt> と合わせてブートパラメータ <tt>persistence-label</tt> を使うと、複数でそれぞれ一意となる保持用メディアを使えるようになります。例として、ブラウザのブックマークその他の個人用データ用に <tt>private</tt> のラベルを付けられた保持用パーティションを使いたい場合、ブートパラメータとして <tt>persistence</tt> <tt>persistence-label=private</tt> を使います。そして文書や研究プロジェクトその他の仕事関係のデータ用にはブートパラメータとして <tt>persistence</tt> <tt>persistence-label=work</tt> を使います。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#590" class="lnkocn">590</a></label>
  <p class="i0" id="590">
    各ボリューム <tt>private</tt> 及び <tt>work</tt> にはそれぞれ最上位に <tt>persistence.conf</tt> ファイルが必要だということは重要ですので覚えておいてください。古い名前でこういったラベルを使う方法についてさらなる情報が <i>live-boot</i> man ページにあります。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#591" class="lnkocn">591</a></label>
  <p class="bold" id="591"><a name="591"></a> <a id="hc10.3.3"></a>
    <a name="c10.3.3" ></a><a name="h10.3.3" ></a>10.3.3 暗号化した保持先の利用
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#592" class="lnkocn">592</a></label>
  <p class="i0" id="592">
    保持機能を使うことには重要なデータが漏洩する危険がいくらか存在します。特に保持するデータがUSBメモリや外付ハードドライブ等のポータブル機器に保存される場合は。そういった場合には暗号化が便利です。手順が多いために全体として複雑に見えるかもしれませんが、<i>live-boot</i> で暗号化したパーティションを扱うのは実際には簡単です。サポートしている <b>luks</b> という種類の暗号化を利用するためには、暗号化したパーティションを作成する側と暗号化した保持用パーティションを利用する Live システムの両方のマシンに <i>cryptsetup</i> をインストールする必要があります。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#593" class="lnkocn">593</a></label>
  <p class="i0" id="593">
    マシンへの <i>cryptsetup</i> のインストール:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#594" class="lnkocn">594</a></label>
  <p class="code" id="594">
    # apt-get install cryptsetup<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#595" class="lnkocn">595</a></label>
  <p class="i0" id="595">
    Live システムに <i>cryptsetup</i> をインストールするには、パッケージ一覧に追加します:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#596" class="lnkocn">596</a></label>
  <p class="code" id="596">
    $ lb config<br>
$ echo "cryptsetup" &gt; config/package-lists/encryption.list.chroot<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#597" class="lnkocn">597</a></label>
  <p class="i0" id="597">
    <i>cryptsetup</i> を備えた Live システムが出来たら、基本的に必要なのは新しいパーティションを作成して暗号化し、<tt>persistence</tt> と <tt>persistence-encryption=luks</tt> パラメータを指定してブートするだけです。既にこの段階を予測し、通常の手順に沿ったブートパラメータを追加してあります:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#598" class="lnkocn">598</a></label>
  <p class="code" id="598">
    $ lb config --bootappend-live "boot=live components persistence persistence-encryption=luks"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#599" class="lnkocn">599</a></label>
  <p class="i0" id="599">
    暗号化についてよく理解していない人たちのために詳細を見て行きましょう。以下の例では <tt>/dev/sdc2</tt> に対応するUSBメモリ上のパーティションを利用します。自分で使う際にはどのパーティションになるのか判断する必要があることに注意してください。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#600" class="lnkocn">600</a></label>
  <p class="i0" id="600">
    最初の段階はUSBメモリを接続してそれがどのデバイスになるのか判断することです。<i>live-manual</i> で推奨するデバイス一覧方法では <tt>ls -l /dev/disk/by-id</tt> を使います。それから新しいパーティションを作成、さらにパスフレーズを使って暗号化します:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#601" class="lnkocn">601</a></label>
  <p class="code" id="601">
    # cryptsetup --verify-passphrase luksFormat /dev/sdc2<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#602" class="lnkocn">602</a></label>
  <p class="i0" id="602">
    仮想デバイスマッパーから luks パーティションを開きます。好きな名前を使ってください。ここでは例として <b>live</b> を使います:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#603" class="lnkocn">603</a></label>
  <p class="code" id="603">
    # cryptsetup luksOpen /dev/sdc2 live<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#604" class="lnkocn">604</a></label>
  <p class="i0" id="604">
    次の段階はファイルシステムを作成する前にデバイスをゼロで埋めることです:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#605" class="lnkocn">605</a></label>
  <p class="code" id="605">
    # dd if=/dev/zero of=/dev/mapper/live<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#606" class="lnkocn">606</a></label>
  <p class="i0" id="606">
    これでファイルシステムを作成する準備ができました。ラベル <tt>persistence</tt> の指定を追加しているためこのデバイスはブート時に保持用としてマウントされるということに注意してください。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#607" class="lnkocn">607</a></label>
  <p class="code" id="607">
    # mkfs.ext4 -L persistence /dev/mapper/live<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#608" class="lnkocn">608</a></label>
  <p class="i0" id="608">
    準備を続けるにはデバイスをマウントする必要があります。例として <tt>/mnt</tt> にマウントします。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#609" class="lnkocn">609</a></label>
  <p class="code" id="609">
    # mount /dev/mapper/live /mnt<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#610" class="lnkocn">610</a></label>
  <p class="i0" id="610">
    そしてパーティション最上位に <tt>persistence.conf</tt> ファイルを作成します。これは前に説明したように必ず必要です。 <a href="customizing-run-time-behaviours.ja.html#persistence-conf">persistence.conf ファイル</a>  を見てください。
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#611" class="lnkocn">611</a></label>
  <p class="code" id="611">
    # echo "/ union" &gt; /mnt/persistence.conf<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#612" class="lnkocn">612</a></label>
  <p class="i0" id="612">
    それからマウントポイントのマウントを解除します:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#613" class="lnkocn">613</a></label>
  <p class="code" id="613">
    # umount /mnt<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#614" class="lnkocn">614</a></label>
  <p class="i0" id="614">
    オプションですがパーティションに追加したばかりのデータを安全にしておくと良いでしょう。デバイスを閉じます:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#615" class="lnkocn">615</a></label>
  <p class="code" id="615">
    # cryptsetup luksClose live<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#616" class="lnkocn">616</a></label>
  <p class="i0" id="616">
    手順をまとめます。これまでに、暗号化を有効化した Live システムを作成しました。これは  <a href="the-basics.ja.html#copying-iso-hybrid-to-usb">ISO hybrid イメージのUSBメモリへのコピー</a>  で説明しているようにUSBメモリにコピーできます。暗号化したパーティションも作成しました。これは同一のUSBメモリに置いて持ち運べます。保持先として利用する暗号化パーティションを設定しました。あと必要なのは Live システムをブートするだけです。ブート時に <i>live-boot</i> は保持用として利用する暗号化したパーティションのパスフレーズを質問し、マウントします。
  </p>
</div></div><br><div class="main_column">
  <table summary="segment navigation band" bgcolor="#ffffff" width="100%"><tr>
  <td width="70%" align="center">
    
<table summary="segment navigation available documents types: toc,doc,pdf,concordance" border="0" cellpadding="3" cellspacing="0">
<tr>
<td align="center" bgcolor="#ffffff">
  
  
</tr></table>
  </td>
  <td width="5%" align="right">
    <table summary="segment navigation pre/next" border="0" cellpadding="3" cellspacing="0">
<tr>
<td align="center" bgcolor="#ffffff">
  <a href="customizing-contents.ja.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_prev_red.png" alt="&lt;&lt;&nbsp;previous" />
  </a>
</td>
<td align="center" bgcolor="#ffffff">
  <a href="toc.ja.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_up_red.png" alt="toc" />
  </a>
</td>
<td align="center" bgcolor="#ffffff">
  <a href="customizing-binary.ja.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_next_red.png" alt="next&nbsp;&gt;&gt;" />
  </a>
</td>
<td>
</td></tr>
</table>
  </td></tr>
  </table>
  
</div><div class="main_column">

<a name="bottom" id="bottom"></a>
<a name="end" id="end"></a>
</div></div></body>
</html>