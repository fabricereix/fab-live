<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>
    customizing-run-time-behaviours -
    Manual de Live Systems
  </title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <meta name="dc.title" content="Manual de Live Systems" />
  <meta name="dc.author" content="Projecte Live Systems &#60;debian-live@lists.debian.org&#62;" />
  <meta name="dc.publisher" content="Projecte Live Systems &#60;debian-live@lists.debian.org&#62;" />
  <meta name="dc.date" content="22.09.2015"  />
  <meta name="dc.rights" content="Copyright: Copyright (C) 2006-2015 Live Systems Project \\ License: Aquest programa &#233;s un programari lliure: es pot redistribuir i/o modificar sota els termes de la Llic&#232;ncia P&#251;blica General de la GNU com &#233;s publicada per la Free Software Foundation, ja sigui la versi&#243; 3 de la Llic&#232;ncia, o (si ho preferiu) qualsevol versi&#243; posterior. \\  \\ Aquest programa es distribueix amb l'esperan&#231;a que sigui &#251;til, per&#242; sense cap garantia, fins i tot sense la garantia impl&#237;cita de COMERCIALITZACI&#211; o ADEQUACI&#211; PER A PROP&#210;SITS DETERMINATS. Vegeu la Llic&#232;ncia General P&#251;blica de la GNU per a m&#233;s detalls. \\  \\ Haurieu de rebre una c&#242;pia de la Llic&#232;ncia P&#251;blica General de la GNU amb aquest programa. Si no &#233;s aix&#237;, consulteu http://www.gnu.org/licenses/. \\  \\ El text complet de la Llic&#232;ncia P&#251;blica General de la GNU es pot trobar a /usr/share/common-licenses/GPL-3." />

  <meta name="generator" content="SiSU 7.1.8 of 2016w08/5 (2016-02-26) (n*x and Ruby!)" />
    <link rel="generator" href="http://www.sisudoc.org/" />
  <link rel="shortcut icon" href="../_sisu/image/rb7.ico" />

  <link href="../../_sisu/css/html.css" rel="stylesheet">
</head>
<body lang="ca">
<a name="top" id="top"></a><table summary="segment navigation band with banner" bgcolor="#ffffff" width="100%"><tr>
<td width="20%" align="left">
 <table summary="home button / home information" border="0" cellpadding="3" cellspacing="0">
 <tr><td align="left" bgcolor="#ffffff">
  <p class="tiny_left"><a href="http://debian-live.alioth.debian.org/manual" target="_top">
    Live manual
  </a></p>
  <p class="tiny_left"><a href="http://debian-live.alioth.debian.org" target="_top">
    Live Systems
  </a></p>
 </td></tr>
 </table>
</td>
<td width="75%" align="center">
  
<table summary="segment navigation available documents types: toc,doc,pdf,concordance" border="0" cellpadding="3" cellspacing="0">
<tr>
<td align="center" bgcolor="#ffffff">
  
  
</tr></table>
</td>
<td width="5%" align="right">
  <table summary="segment navigation pre/next" border="0" cellpadding="3" cellspacing="0">
<tr>
<td align="center" bgcolor="#ffffff">
  <a href="customizing-contents.ca.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_prev_red.png" alt="&lt;&lt;&nbsp;previous" />
  </a>
</td>
<td align="center" bgcolor="#ffffff">
  <a href="toc.ca.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_up_red.png" alt="toc" />
  </a>
</td>
<td align="center" bgcolor="#ffffff">
  <a href="customizing-binary.ca.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_next_red.png" alt="next&nbsp;&gt;&gt;" />
  </a>
</td>
<td>
</td></tr>
</table>
</td></tr>
</table><div class="toc"><h1 class="minitoc">
    Manual de Live Systems
  </h1>

<h1 class="minitoc">
    Sobre aquest manual
  </h1>

<h1 class="minitoc">
    Sobre aquest manual
  </h1>

<h4 class="minitoc">
      <a href="about-manual.ca.html" target="_top">
    1. Sobre aquest manual
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="about-manual.ca.html#8">
    1.1 Per als impacients
  </a>
  </h5>

<h5 class="minitoc">
      <a href="about-manual.ca.html#12">
    1.2 Termes
  </a>
  </h5>

<h5 class="minitoc">
      <a href="about-manual.ca.html#29">
    1.3 Autors
  </a>
  </h5>

<h5 class="minitoc">
      <a href="about-manual.ca.html#44">
    1.4 Contribuir a aquest document
  </a>
  </h5>

<h6 class="minitoc">
      <a href="about-manual.ca.html#46">
  1.4.1 Aplicar canvis
</a>
  </h6>

<h6 class="minitoc">
      <a href="about-manual.ca.html#60">
  1.4.2 Traducció
</a>
  </h6>

<h1 class="minitoc">
    Sobre el Live Systems Project
  </h1>

<h4 class="minitoc">
      <a href="about-project.ca.html" target="_top">
    2. Sobre el Live Systems Project
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="about-project.ca.html#75">
    2.1 Motivació
  </a>
  </h5>

<h6 class="minitoc">
      <a href="about-project.ca.html#76">
  2.1.1 Què passa amb els sistemes vius actuals
</a>
  </h6>

<h6 class="minitoc">
      <a href="about-project.ca.html#86">
  2.1.2 Per què crear el nostre pròpi sistema viu?
</a>
  </h6>

<h5 class="minitoc">
      <a href="about-project.ca.html#94">
    2.2 Filosofia
  </a>
  </h5>

<h6 class="minitoc">
      <a href="about-project.ca.html#95">
  2.2.1 Només paquets Debian sense modificacions de la secció "main"
</a>
  </h6>

<h6 class="minitoc">
      <a href="about-project.ca.html#99">
  2.2.2 Paquets del sistema viu sense cap configuració
</a>
  </h6>

<h5 class="minitoc">
      <a href="about-project.ca.html#103">
    2.3 Contacte
  </a>
  </h5>

<h1 class="minitoc">
    Usuari
  </h1>

<h1 class="minitoc">
    Instal·lació
  </h1>

<h4 class="minitoc">
      <a href="installation.ca.html" target="_top">
    3. Instal·lació
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="installation.ca.html#110">
    3.1 Requisits
  </a>
  </h5>

<h5 class="minitoc">
      <a href="installation.ca.html#118">
    3.2 Instal·lació de live-build
  </a>
  </h5>

<h6 class="minitoc">
      <a href="installation.ca.html#124">
  3.2.1 Des del repositori de Debian
</a>
  </h6>

<h6 class="minitoc">
      <a href="installation.ca.html#127">
  3.2.2 A partir del codi font
</a>
  </h6>

<h6 class="minitoc">
      <a href="installation.ca.html#138">
  3.2.3 A partir d'instantànies
</a>
  </h6>

<h5 class="minitoc">
      <a href="installation.ca.html#140">
    3.3 Instal.lació de live-boot i live-config
  </a>
  </h5>

<h6 class="minitoc">
      <a href="installation.ca.html#142">
  3.3.1 Des del repositori de Debian
</a>
  </h6>

<h6 class="minitoc">
      <a href="installation.ca.html#144">
  3.3.2 A partir del codi font
</a>
  </h6>

<h6 class="minitoc">
      <a href="installation.ca.html#156">
  3.3.3 A partir d'instantànies
</a>
  </h6>

<h1 class="minitoc">
    Conceptes bàsics
  </h1>

<h4 class="minitoc">
      <a href="the-basics.ca.html" target="_top">
    4. Conceptes bàsics
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="the-basics.ca.html#163">
    4.1 Què és un sistema viu?
  </a>
  </h5>

<h5 class="minitoc">
      <a href="the-basics.ca.html#171">
    4.2 Descàrrega d'imatges prefabricades
  </a>
  </h5>

<h5 class="minitoc">
      <a href="the-basics.ca.html#173">
    4.3 Ús del servei de construcció d'imatges en viu web
  </a>
  </h5>

<h6 class="minitoc">
      <a href="the-basics.ca.html#175">
  4.3.1 Ús i advertències sobre el servei web
</a>
  </h6>

<h5 class="minitoc">
      <a href="the-basics.ca.html#179">
    4.4 Primers passos: construcció d'una imatge ISO híbrida
  </a>
  </h5>

<h5 class="minitoc">
      <a href="the-basics.ca.html#190">
    4.5 Usar una imatge ISO híbrida en viu
  </a>
  </h5>

<h6 class="minitoc">
      <a href="the-basics.ca.html#192">
  4.5.1 Gravar una imatge ISO en un medi físic
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.ca.html#195">
  4.5.2 Copiar una imatge ISO híbrida en un dispositiu  USB
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.ca.html#200">
  4.5.3 Utilitzar l'espai lliure en una memòria USB
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.ca.html#207">
  4.5.4 Arrencar el medi en viu
</a>
  </h6>

<h5 class="minitoc">
      <a href="the-basics.ca.html#211">
    4.6 Utilitzar una màquina virtual per a fer proves
  </a>
  </h5>

<h6 class="minitoc">
      <a href="the-basics.ca.html#218">
  4.6.1 Provar una imatge ISO amb QEMU
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.ca.html#225">
  4.6.2 Provar una imatge ISO amb VirtualBox
</a>
  </h6>

<h5 class="minitoc">
      <a href="the-basics.ca.html#233">
    4.7 Construir i utilitzar una imatge HDD
  </a>
  </h5>

<h5 class="minitoc">
      <a href="the-basics.ca.html#245">
    4.8 Construir una imatge netboot
  </a>
  </h5>

<h6 class="minitoc">
      <a href="the-basics.ca.html#258">
  4.8.1 Servidor DHCP
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.ca.html#262">
  4.8.2 Servidor TFTP
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.ca.html#267">
  4.8.3 Servidor NFS
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.ca.html#275">
  4.8.4 Com provar l'arrencada en xarxa
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.ca.html#278">
  4.8.5 Qemu
</a>
  </h6>

<h5 class="minitoc">
      <a href="the-basics.ca.html#284">
    4.9 Webbooting
  </a>
  </h5>

<h6 class="minitoc">
      <a href="the-basics.ca.html#286">
  4.9.1 Obtenir els fitxers webboot
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.ca.html#292">
  4.9.2 Arrencar imatges webboot
</a>
  </h6>

<h1 class="minitoc">
    Descripció general de les eines
  </h1>

<h4 class="minitoc">
      <a href="overview-of-tools.ca.html" target="_top">
    5. Descripció general de les eines
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="overview-of-tools.ca.html#300">
    5.1 El paquet live-build
  </a>
  </h5>

<h6 class="minitoc">
      <a href="overview-of-tools.ca.html#310">
  5.1.1 L'ordre <tt>lb config</tt>
</a>
  </h6>

<h6 class="minitoc">
      <a href="overview-of-tools.ca.html#320">
  5.1.2 L'ordre <tt>lb build</tt>
</a>
  </h6>

<h6 class="minitoc">
      <a href="overview-of-tools.ca.html#322">
  5.1.3 L'ordre <tt>lb clean</tt>
</a>
  </h6>

<h5 class="minitoc">
      <a href="overview-of-tools.ca.html#324">
    5.2 El paquet live-boot
  </a>
  </h5>

<h5 class="minitoc">
      <a href="overview-of-tools.ca.html#328">
    5.3 El paquet live-config
  </a>
  </h5>

<h1 class="minitoc">
    Gestió d'una configuració
  </h1>

<h4 class="minitoc">
      <a href="managing-a-configuration.ca.html" target="_top">
    6. Gestió d'una configuració
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="managing-a-configuration.ca.html#333">
    6.1 Gestionar canvis en la configuració
  </a>
  </h5>

<h6 class="minitoc">
      <a href="managing-a-configuration.ca.html#335">
  6.1.1 Per què utilitzar scripts auto? Què fan?
</a>
  </h6>

<h6 class="minitoc">
      <a href="managing-a-configuration.ca.html#338">
  6.1.2 Utilitzar scripts auto d'exemple
</a>
  </h6>

<h5 class="minitoc">
      <a href="managing-a-configuration.ca.html#345">
    6.2 Clonar una configuració publicada via Git
  </a>
  </h5>

<h1 class="minitoc">
    Personalització dels continguts
  </h1>

<h4 class="minitoc">
      <a href="customization-overview.ca.html" target="_top">
    7. Visió general de la personalització
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customization-overview.ca.html#359">
    7.1 Configuració durant la construcció vs. durant l'arrencada
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customization-overview.ca.html#362">
    7.2 Etapes de la construcció
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customization-overview.ca.html#365">
    7.3 Suplementar lb config amb fitxers
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customization-overview.ca.html#367">
    7.4 Tasques de personalització
  </a>
  </h5>

<h1 class="minitoc">
    Personalització de la instal·lació de paquets
  </h1>

<h4 class="minitoc">
      <a href="customizing-package-installation.ca.html" target="_top">
    8. Personalització de la instal·lació de  paquets
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customizing-package-installation.ca.html#372">
    8.1 Fonts dels paquets
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#373">
  8.1.1 Distribució, àrees d'arxiu i mode
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#380">
  8.1.2 Miralls de distribució
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#382">
  8.1.3 Miralls de distribució utilitzats en temps  de construcció
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#386">
  8.1.4 Miralls de distribució utilitzats en temps d'execució
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#389">
  8.1.5 Repositoris addicionals
</a>
  </h6>

<h5 class="minitoc">
      <a href="customizing-package-installation.ca.html#397">
    8.2 Selecció dels paquets a instal·lar
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#399">
  8.2.1 Llistes de paquets
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#402">
  8.2.2 Ús dels metapaquets
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#410">
  8.2.3 Llistes locals de paquets
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#414">
  8.2.4 Llistes locals de paquets per a l'etapa binary
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#416">
  8.2.5 Generar llistes de paquets
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#420">
  8.2.6 Ús de condicionals dins de les llistes de paquets
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#429">
  8.2.7 Eliminar paquets durant la instal·lació
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#431">
  8.2.8 Tasques d'escriptori i llenguatge
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#436">
  8.2.9 Tipus i versió del nucli
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#441">
  8.2.10 Nuclis personalitzats
</a>
  </h6>

<h5 class="minitoc">
      <a href="customizing-package-installation.ca.html#449">
    8.3 Instal·lació de paquets  modificats o de tercers
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#456">
  8.3.1 Fer servir <tt>packages.chroot</tt> per a instaŀar paquets personalitzats
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#463">
  8.3.2 Fer servir un repositori APT per a instal·lar paquets personalitzats
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#466">
  8.3.3 Paquets personalitzats i APT
</a>
  </h6>

<h5 class="minitoc">
      <a href="customizing-package-installation.ca.html#469">
    8.4 Configurar APT en temps de construcció
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#471">
  8.4.1 Elegir apt o aptitude
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#475">
  8.4.2 L'ús d'un proxy amb APT
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#478">
  8.4.3 Afinar APT per a estalviar espai
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#487">
  8.4.4 Passar opcions per a apt o aptitude
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.ca.html#492">
  8.4.5 APT pinning
</a>
  </h6>

<h1 class="minitoc">
    Personalització dels continguts
  </h1>

<h4 class="minitoc">
      <a href="customizing-contents.ca.html" target="_top">
    9. Personalització dels continguts
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customizing-contents.ca.html#501">
    9.1 Includes
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-contents.ca.html#506">
  9.1.1 Live/chroot local includes
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-contents.ca.html#513">
  9.1.2 Binary local includes
</a>
  </h6>

<h5 class="minitoc">
      <a href="customizing-contents.ca.html#517">
    9.2 Scripts ganxo (Hooks)
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-contents.ca.html#520">
  9.2.1 Chroot local hooks
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-contents.ca.html#522">
  9.2.2 Binary local hooks
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-contents.ca.html#524">
  9.2.3 Scripts ganxo en temps d'arrencada
</a>
  </h6>

<h5 class="minitoc">
      <a href="customizing-contents.ca.html#526">
    9.3 Preconfiguració de les preguntes de Debconf
  </a>
  </h5>

<h1 class="minitoc">
    Personalització dels comportaments en temps d'execució
  </h1>

<h4 class="minitoc">
      <a href="customizing-run-time-behaviours.ca.html" target="_top">
    10. Personalització dels comportaments en  temps d'execució
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customizing-run-time-behaviours.ca.html#532">
    10.1 Personalitzar l'usuari en viu
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customizing-run-time-behaviours.ca.html#541">
    10.2 Personalització de l'entorn local i el  llenguatge
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customizing-run-time-behaviours.ca.html#558">
    10.3 Persistència
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-run-time-behaviours.ca.html#580">
  10.3.1 El fitxer persistence.conf
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-run-time-behaviours.ca.html#585">
  10.3.2 Utilitzar diversos medis persistents
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-run-time-behaviours.ca.html#591">
  10.3.3 Persistència amb xifratge
</a>
  </h6>

<h1 class="minitoc">
    Personalització de la imatge binària
  </h1>

<h4 class="minitoc">
      <a href="customizing-binary.ca.html" target="_top">
    11. Personalització de la imatge binària
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customizing-binary.ca.html#619">
    11.1 Carregadors d'arrencada
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customizing-binary.ca.html#626">
    11.2 metadades ISO
  </a>
  </h5>

<h1 class="minitoc">
    Personalització de l'instal·lador de debian
  </h1>

<h4 class="minitoc">
      <a href="customizing-installer.ca.html" target="_top">
    12. Personalització de l'instal·lador de debian
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customizing-installer.ca.html#636">
    12.1 Tipus d'instal·lador de Debian
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customizing-installer.ca.html#648">
    12.2 Personalització de l'instal·lador de Debian amb preconfiguració
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customizing-installer.ca.html#651">
    12.3 Personalitzar el contingut de l'instal·lador de Debian
  </a>
  </h5>

<h1 class="minitoc">
    Projecte
  </h1>

<h1 class="minitoc">
    Contribuir al projecte
  </h1>

<h4 class="minitoc">
      <a href="contributing-to-project.ca.html" target="_top">
    13. Contribuir al projecte
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="contributing-to-project.ca.html#667">
    13.1 Fer canvis
  </a>
  </h5>

<h5 class="minitoc">
      <a href="contributing-to-project.ca.html#682">
    13.2 Traducció de pàgines dels manuals
  </a>
  </h5>

<h1 class="minitoc">
    Informar dels errors
  </h1>

<h4 class="minitoc">
      <a href="bugs.ca.html" target="_top">
    14. Informar dels errors
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="bugs.ca.html#698">
    14.1 Problemes coneguts
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.ca.html#703">
    14.2 Reconstruir des de zero
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.ca.html#705">
    14.3 Fer servir paquets actualitzats
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.ca.html#707">
    14.4 Recopilar informació
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.ca.html#724">
    14.5 Aïllar el cas que falla, si és possible
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.ca.html#726">
    14.6 Utilitzar el paquet correcte per a informar de l'error
  </a>
  </h5>

<h6 class="minitoc">
      <a href="bugs.ca.html#729">
  14.6.1 A l'hora de construir mentre bootstrapping
</a>
  </h6>

<h6 class="minitoc">
      <a href="bugs.ca.html#732">
  14.6.2 A l'hora de construir, durant la instal·lació de paquets
</a>
  </h6>

<h6 class="minitoc">
      <a href="bugs.ca.html#736">
  14.6.3 En el moment d'arrencar
</a>
  </h6>

<h6 class="minitoc">
      <a href="bugs.ca.html#738">
  14.6.4 En temps d'execució
</a>
  </h6>

<h5 class="minitoc">
      <a href="bugs.ca.html#740">
    14.7 Fer la recerca
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.ca.html#744">
    14.8 On informar dels errors
  </a>
  </h5>

<h1 class="minitoc">
    Estil de Codi
  </h1>

<h4 class="minitoc">
      <a href="coding-style.ca.html" target="_top">
    15. Estil de Codi
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="coding-style.ca.html#751">
    15.1 Compatibilitat
  </a>
  </h5>

<h5 class="minitoc">
      <a href="coding-style.ca.html#756">
    15.2 Indentació
  </a>
  </h5>

<h5 class="minitoc">
      <a href="coding-style.ca.html#758">
    15.3 Ajust de línia
  </a>
  </h5>

<h5 class="minitoc">
      <a href="coding-style.ca.html#770">
    15.4 Variables
  </a>
  </h5>

<h5 class="minitoc">
      <a href="coding-style.ca.html#789">
    15.5 Miscel·lània
  </a>
  </h5>

<h1 class="minitoc">
    Procediments
  </h1>

<h4 class="minitoc">
      <a href="procedures.ca.html" target="_top">
    16. Procediments
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="procedures.ca.html#797">
    16.1 Publicacions majors
  </a>
  </h5>

<h5 class="minitoc">
      <a href="procedures.ca.html#803">
    16.2 Publicacions puntuals
  </a>
  </h5>

<h6 class="minitoc">
      <a href="procedures.ca.html#807">
  16.2.1 Ùltima publicació puntual d'una versió de Debian
</a>
  </h6>

<h6 class="minitoc">
      <a href="procedures.ca.html#809">
  16.2.2 Plantilla per a anunciar una publicació puntual
</a>
  </h6>

<h1 class="minitoc">
    Repositoris Git
  </h1>

<h4 class="minitoc">
      <a href="git-repositories.ca.html" target="_top">
    17. Repositoris Git
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="git-repositories.ca.html#829">
    17.1 Gestió de múltiples repositoris
  </a>
  </h5>

<h1 class="minitoc">
    Exemples
  </h1>

<h1 class="minitoc">
    Exemples
  </h1>

<h4 class="minitoc">
      <a href="examples.ca.html" target="_top">
    18. Exemples
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="examples.ca.html#837">
    18.1 Ús dels exemples
  </a>
  </h5>

<h5 class="minitoc">
      <a href="examples.ca.html#841">
    18.2 Tutorial 1: Una imatge per defecte
  </a>
  </h5>

<h5 class="minitoc">
      <a href="examples.ca.html#850">
    18.3 Tutorial 2: Una utilitat de navegador web
  </a>
  </h5>

<h5 class="minitoc">
      <a href="examples.ca.html#858">
    18.4 Tutorial 3: Una imatge personalitzada
  </a>
  </h5>

<h6 class="minitoc">
      <a href="examples.ca.html#861">
  18.4.1 Primera revisió
</a>
  </h6>

<h6 class="minitoc">
      <a href="examples.ca.html#875">
  18.4.2 Segona revisió
</a>
  </h6>

<h5 class="minitoc">
      <a href="examples.ca.html#887">
    18.5 Un client per a un quiosc VNC
  </a>
  </h5>

<h5 class="minitoc">
      <a href="examples.ca.html#901">
    18.6 Una imatge bàsica per a un dispositiu USB de 128MB
  </a>
  </h5>

<h5 class="minitoc">
      <a href="examples.ca.html#912">
    18.7 Un escriptori GNOME localitzat i amb instal·lador
  </a>
  </h5>

<h1 class="minitoc">
    Apèndix
  </h1>

<h1 class="minitoc">
    Style guide
  </h1>

<h4 class="minitoc">
      <a href="style-guide.ca.html" target="_top">
    19. Guia d'estil
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="style-guide.ca.html#927">
    19.1 Instruccions per als autors
  </a>
  </h5>

<h6 class="minitoc">
      <a href="style-guide.ca.html#930">
  19.1.1 Característiques lingüístiques
</a>
  </h6>

<h6 class="minitoc">
      <a href="style-guide.ca.html#963">
  19.1.2 Procediments
</a>
  </h6>

<h5 class="minitoc">
      <a href="style-guide.ca.html#1002">
    19.2 Directrius per als traductors
  </a>
  </h5>

<h6 class="minitoc">
      <a href="style-guide.ca.html#1006">
  19.2.1 Consells de traducció
</a>
  </h6>

<h1 class="minitoc">
    <b><a href="metadata.ca.html">Metadata</a></b>
  </h1>

<h4 class="minitoc">
      <a href="metadata.ca.html" target="_top">
    SiSU Metadata, document information
  </a> 
  </h4>
</div><div class="content">
<h1 class="tiny">
    Manual de Live Systems
  </h1>
</div><div class="content">
<h1 class="tiny">
    Personalització dels comportaments en temps d'execució
  </h1>
</div><div class="content"><div class="substance">
  <label class="ocn"><a href="#530" class="lnkocn">530</a></label>
  <h1 class="norm" id="530"><a name="530"></a>
    10. Personalització dels comportaments en  temps d'execució
  </h1>
</div><div class="substance">
  <label class="ocn"><a href="#531" class="lnkocn">531</a></label>
  <p class="i0" id="531">
    Tota la configuració que es fa durant l'execució es feta per <i>live-config</i>. Aquestes són algunes de les opcions més comunes de <i>live-config</i> en que els usuaris estan interessats. Una llista completa de totes les possibilitats es poden trobar a la pàgina del manual de <i>live-config</i>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#532" class="lnkocn">532</a></label>
  <p class="bold" id="532"><a name="532"></a> <a id="hc10.1"></a>
    <a name="c10.1" ></a><a name="h10.1" ></a>10.1 Personalitzar l'usuari en viu
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#533" class="lnkocn">533</a></label>
  <p class="i0" id="533">
    Una consideració important és que l'usuari en viu es creat per <i>live-boot</i> durant l'arrencada i no per <i>live-build</i> en temps de construcció. Això influeix no només en on s'han de introduir els materials relacionats amb l'usuari durant la construcció, tal i com es va explicar a  <a href="customizing-contents.ca.html#live-chroot-local-includes">Live/chroot local includes</a>,  sinó també en els grups i els permisos associats amb l'usuari.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#534" class="lnkocn">534</a></label>
  <p class="i0" id="534">
    Es poden especificar grups addicionals als que pertanyerà l'usuari en viu mitjançant l'ús de qualsevol de les possibilitats de configuraciò de <i>live-config</i>. Per exemple, per a afegir l'usuari en viu al grup <tt>fuse</tt>, es pot afegir el següent fitxer a <tt>config/includes.chroot/etc/live/config/user-setup.conf</tt>:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#535" class="lnkocn">535</a></label>
  <p class="code" id="535">
    LIVE_USER_DEFAULT_GROUPS="audio cdrom dip floppy video plugdev netdev powerdev scanner bluetooth fuse"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#536" class="lnkocn">536</a></label>
  <p class="i0" id="536">
    o utilitzar <tt>live-config.user-default-groups=audio,cdrom,dip,floppy,video,plugdev,netdev,powerdev,scanner,bluetooth,fuse</tt> com paràmetre d'arrencada.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#537" class="lnkocn">537</a></label>
  <p class="i0" id="537">
    També és possible canviar el nom de l'usuari per defecte "user" i la contrasenya per defecte "live". Si es vol fer això per alguna raó, es pot aconseguir fàcilment de la següent manera:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#538" class="lnkocn">538</a></label>
  <p class="i0" id="538">
    Per a canviar el nom de l'usuari per defecte només s'ha d'especificar en la configuració:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#539" class="lnkocn">539</a></label>
  <p class="code" id="539">
    $ lb config --bootappend-live "boot=live components username=live-user"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#540" class="lnkocn">540</a></label>
  <p class="i0" id="540">
    Una forma possible de canviar la contrasenya per defecte és per mitjà d'un ganxo com s'explica a  <a href="customizing-contents.ca.html#boot-time-hooks">Scripts ganxo durant l'arrencada</a>.  Per a fer això, es pot utilitzar el script ganxo "passwd" de <tt>/usr/share/doc/live-config/examples/hooks</tt>, posar-li un prefix adequat (per exemple 2000-passwd) i afegir-lo a <tt>config/includes.chroot/lib/live/config/</tt>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#541" class="lnkocn">541</a></label>
  <p class="bold" id="541"><a name="541"></a> <a id="hcustomizing-locale-and-language"></a>
    <a name="h10.2" ></a><a name="customizing-locale-and-language" ></a>10.2 Personalització de l'entorn local i el  llenguatge
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#542" class="lnkocn">542</a></label>
  <p class="i0" id="542">
    Quan el sistema en viu arrenca, el llenguatge està implicat en dos passos:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#543" class="lnkocn">543</a></label>
  <ul>
  <li class="bullet" id="543">
    la generació de locales
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#544" class="lnkocn">544</a></label>
  <ul>
  <li class="bullet" id="544">
    establir la configuració del teclat
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#545" class="lnkocn">545</a></label>
  <p class="i0" id="545">
    La configuració local per defecte en la construcció d'un sistema viu és <tt>locales=en_US.UTF-8</tt>. Per a definir la locale que s'ha de generar, utilitzar el paràmetre <tt>locales</tt> de la opció <tt>--bootappend-live</tt> de <tt>lb config</tt>, per exemple.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#546" class="lnkocn">546</a></label>
  <p class="code" id="546">
    $ lb config --bootappend-live "boot=live components locales=de_CH.UTF-8"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#547" class="lnkocn">547</a></label>
  <p class="i0" id="547">
    Es poden especificar diverses locales en una llista separada per comes.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#548" class="lnkocn">548</a></label>
  <p class="i0" id="548">
    Aquest paràmetre, així com els paràmetres de configuració del teclat que s'indiquen a continuació, també es pot utilitzar en la línia d'ordres del nucli. Es pot especificar una configuració regional mitjançant <tt>language_country</tt> (en aquest cas s'utilitza la codificació per defecte) o la forma completa <tt>language_country.encoding</tt>. Una llista de locales suportades i la codificació per a cadascuna es poden trobar a <tt>/usr/share/i18n/SUPPORTED</tt>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#549" class="lnkocn">549</a></label>
  <p class="i0" id="549">
    <tt>live-config</tt> s'encarrega de la configuració del teclat per a X i per a la consola utilitzant el paquet <tt>console-setup</tt>. Per a la seva configuració es pot fer servir els paràmetres d'arrencada <tt>keyboard-layouts</tt>, <tt>keyboard-variants</tt>, <tt>keyboard-options</tt> i <tt>keyboard-model</tt> mitjançant l'opció <tt>--bootappend-live</tt>. Es poden trobar opcions vàlides per a aquests a <tt>/usr/share/X11/xkb/rules/base.lst</tt>. Per a trobar distribucions de teclat i variants per a un idioma determinat, s'ha d'intentar cercar el nom en anglès de la llengua i/o el país on es parla l'idioma, per exemple:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#550" class="lnkocn">550</a></label>
  <p class="code" id="550">
    $ egrep -i '(^!|german.*switzerland)' /usr/share/X11/xkb/rules/base.lst<br>
! model<br>
! layout<br>
&nbsp;&nbsp;&nbsp;ch&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;German (Switzerland)<br>
! variant<br>
&nbsp;&nbsp;&nbsp;legacy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ch: German (Switzerland, legacy)<br>
&nbsp;&nbsp;&nbsp;de_nodeadkeys&nbsp;&nbsp;&nbsp;ch: German (Switzerland, eliminate dead keys)<br>
&nbsp;&nbsp;&nbsp;de_sundeadkeys&nbsp;&nbsp;ch: German (Switzerland, Sun dead keys)<br>
&nbsp;&nbsp;&nbsp;de_mac&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ch: German (Switzerland, Macintosh)<br>
! option<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#551" class="lnkocn">551</a></label>
  <p class="i0" id="551">
    Tinir en compte que cada variant mostra la distribució que s'aplica en la descripció.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#552" class="lnkocn">552</a></label>
  <p class="i0" id="552">
    Sovint, només la distribució necessita ser configurada. Per exemple, per a obtenir els fitxers de configuració regional per a la distribució del teclat alemany i suís-alemany per a l'entorn gràfic X:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#553" class="lnkocn">553</a></label>
  <p class="code" id="553">
    $ lb config --bootappend-live "boot=live components locales=de_CH.UTF-8 keyboard-layouts=ch"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#554" class="lnkocn">554</a></label>
  <p class="i0" id="554">
    No obstant això, per als casos d'ús molt específics, potser es vol incloure altres paràmetres. Per exemple, per a establir un sistema francès, amb una distribució de teclat French-Dvorak (anomenat Bepo) en un teclat USB TypeMatrix EZ-Reach 2030, utilitzar:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#555" class="lnkocn">555</a></label>
  <p class="code" id="555">
    $ lb config --bootappend-live \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"boot=live components locales=fr_FR.UTF-8 keyboard-layouts=fr keyboard-variants=bepo keyboard-model=tm2030usb"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#556" class="lnkocn">556</a></label>
  <p class="i0" id="556">
    Es poden especificar diversos valors per a cada una de les opcions <tt>keyboard-*</tt> en una llista separada per comes amb l'excepció de <tt>keyboard-model</tt>, que només accepta un valor. Veure la pàgina del manual <tt>keyboard(5)</tt> per a més detalls i exemples de les variables <tt>XKBMODEL</tt>, <tt>XKBLAYOUT</tt>, <tt>XKBVARIANT</tt> i <tt>XKBOPTIONS</tt>. Si s'especifiquen diversos valors de <tt>keyboard-variants</tt> es correspondran un a un amb els valors <tt>keyboard-layouts</tt> (veure <tt>setxkbmap(1)</tt> opció <tt>-variant</tt>). Es poden utilitzar valors buits, per exemple, per a definir dos dissenys, el valor predeterminat US QWERTY i l'altre US Dvorak:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#557" class="lnkocn">557</a></label>
  <p class="code" id="557">
    $ lb config --bootappend-live \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"boot=live components keyboard-layouts=us,us keyboard-variants=,dvorak"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#558" class="lnkocn">558</a></label>
  <p class="bold" id="558"><a name="558"></a> <a id="hpersistence"></a>
    <a name="h10.3" ></a><a name="persistence" ></a>10.3 Persistència
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#559" class="lnkocn">559</a></label>
  <p class="i0" id="559">
    Un paradigma d'un live cd és ser un sistema pre-instal·lat, que arrenca desde medis de només lectura, com un cdrom, on les modificacions no sobreviuen als reinicis del maquinari que l'executa.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#560" class="lnkocn">560</a></label>
  <p class="i0" id="560">
    Un sistema en viu és una generalització d'aquest paradigma i per tant, compatible amb altres medis, a més dels CDs, però tot i així, en el seu comportament per defecte, s'ha de considerar de només lectura i totes les evolucions en temps d'execució del sistema es perden al apagar l'equip.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#561" class="lnkocn">561</a></label>
  <p class="i0" id="561">
    La "Persistència" és un nom comú per a nomenar els diferents tipus de solucions per a guardar després de reiniciar algunes, o totes, les dades d'aquesta evolució en temps d'execució del sistema. Per a entendre com funciona, seria útil saber que, encara que el sistema s'inicia i s'executa des de medis de només lectura, les modificacions als fitxers i directoris s'escriuen ens medis d'escriptura, en general un ramdisk (tmpfs) i les dades dels discos ram no sobreviuen als reinicis.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#562" class="lnkocn">562</a></label>
  <p class="i0" id="562">
    Les dades emmagatzemades en aquest disc ram han de ser guardades en un suport d'escriptura persistent com medis d'emmagatzematge locals, un recurs compartit de xarxa o fins i tot una sessió d'una multisessió de un CD/DVD (re)grabable. Tots aquests medis són compatibles amb el sistemes en viu de diferents maneres, i tots menys l'últim, requereixen un paràmetre especial que s'especifica en l'arrencada: <tt>persistence</tt>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#563" class="lnkocn">563</a></label>
  <p class="i0" id="563">
    Si s'utilitza el paràmetre d'arrencada <tt>persistence</tt> (i no s'utilitza <tt>nopersistence</tt>) es proven els medis locals d'emmagatzematge (per exemple, discs durs, unitats USB) buscant volums amb persistència durant l'arrencada. És possible restringir els tipus de volums amb persistència que s'utilitzarà mitjançant l'especificació de certs paràmetres d'arrencada que es descriuen a la pàgina del manual de <i>live-boot</i>(7). Un volum amb persistència és qualsevol dels següents:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#564" class="lnkocn">564</a></label>
  <ul>
  <li class="bullet" id="564">
    una partició, identificada pel seu nom GPT.
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#565" class="lnkocn">565</a></label>
  <ul>
  <li class="bullet" id="565">
    un sistema de fitxers, identificat per la seva etiqueta de sistema de fitxers.
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#566" class="lnkocn">566</a></label>
  <ul>
  <li class="bullet" id="566">
    un fitxer imatge situat en l'arrel de qualsevol sistema de fitxers llegibles (fins i tot una partició NTFS d'un altre SO), identificat pel seu nom de fitxer.
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#567" class="lnkocn">567</a></label>
  <p class="i0" id="567">
    L'etiqueta de volum per als overlays ha de ser <tt>persistence</tt> però serà passat per alt a menys que contingui un fitxer anomenat <tt>persistence.conf</tt> que s'utilitza per a personalitzar completament la persistència del volum, és a dir, especificar els directoris que es volen conservar en el volum de persistència després de reiniciar. Veure  <a href="customizing-run-time-behaviours.ca.html#persistence-conf">El fitxer persistence.conf</a>  per a més detalls.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#568" class="lnkocn">568</a></label>
  <p class="i0" id="568">
    Aquests són alguns exemples de com preparar un volum que s'utilitzarà per a la persistència. Pot ser, per exemple, una partició ext4 en un disc dur o en una clau USB creat amb, per exemple:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#569" class="lnkocn">569</a></label>
  <p class="code" id="569">
    # mkfs.ext4 -L persistence /dev/sdb1<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#570" class="lnkocn">570</a></label>
  <p class="i0" id="570">
    Veure també  <a href="the-basics.ca.html#using-usb-extra-space">Utilitzar l'espai lliure en una memòria USB</a>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#571" class="lnkocn">571</a></label>
  <p class="i0" id="571">
    Si ja hi ha una partició al dispositiu, és pot canviar l'etiqueta amb un dels següents:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#572" class="lnkocn">572</a></label>
  <p class="code" id="572">
    # tune2fs -L persistence /dev/sdb1 # for ext2,3,4 filesystems<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#573" class="lnkocn">573</a></label>
  <p class="i0" id="573">
    Heus aquí un exemple de com crear un fitxer imatge basat en ext4 per a ser utilitzat per a la persistència:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#574" class="lnkocn">574</a></label>
  <p class="code" id="574">
    $ dd if=/dev/null of=persistence bs=1 count=0 seek=1G # for a 1GB sized image file<br>
$ /sbin/mkfs.ext4 -F persistence<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#575" class="lnkocn">575</a></label>
  <p class="i0" id="575">
    Un cop s'ha creat el fitxer imatge, per exemple, per a fer <tt>/usr</tt> persistent però només guardant els canvis que es fan en aquest directori i no tots els continguts de <tt>/usr</tt>, es pot utilitzar l'opció "union". Si el fitxer imatge es troba en el directori home, copiar-lo a l'arrel del sistema de fitxers del disc dur i muntar-lo a <tt>/mnt</tt> de la següent manera:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#576" class="lnkocn">576</a></label>
  <p class="code" id="576">
    # cp persistence /<br>
# mount -t ext4 /persistence /mnt<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#577" class="lnkocn">577</a></label>
  <p class="i0" id="577">
    A continuació, crear el fitxer <tt>persistence.conf</tt> afegint contingut i desmuntar el fitxer imatge.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#578" class="lnkocn">578</a></label>
  <p class="code" id="578">
    # echo "/usr union" &gt;&gt; /mnt/persistence.conf<br>
# umount /mnt<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#579" class="lnkocn">579</a></label>
  <p class="i0" id="579">
    Ara, reiniciar el sistema i arrencar el medi en viu amb el paràmetre d'arrencada "persistence".
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#580" class="lnkocn">580</a></label>
  <p class="bold" id="580"><a name="580"></a> <a id="hpersistence-conf"></a>
    <a name="h10.3.1" ></a><a name="persistence-conf" ></a>10.3.1 El fitxer persistence.conf
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#581" class="lnkocn">581</a></label>
  <p class="i0" id="581">
    Un volum amb l'etiqueta <tt>persistence</tt> ha de ser configurat mitjançant un fitxer <tt>persistence.conf</tt> per a fer directoris arbitraris persistents. Aquest fitxer, ubicat a l'arrel del sistema de fitxers del volum, controla els directoris que fa persistents, i de quina manera.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#582" class="lnkocn">582</a></label>
  <p class="i0" id="582">
    A la pàgina del manual de persistence.conf(5) s'explica en detall com es configuran els muntatges de les overlays, però un simple exemple hauria de ser suficient per a la majoria d'usos. Si es vol fer el directori home i el directori del cache d'APT persistents en un sistema de fitxers ext4 a la partició /dev/sdb1:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#583" class="lnkocn">583</a></label>
  <p class="code" id="583">
    # mkfs.ext4 -L persistence /dev/sdb1<br>
# mount -t ext4 /dev/sdb1 /mnt<br>
# echo "/home" &gt;&gt; /mnt/persistence.conf<br>
# echo "/var/cache/apt" &gt;&gt; /mnt/persistence.conf<br>
# umount /mnt<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#584" class="lnkocn">584</a></label>
  <p class="i0" id="584">
    Després es reinicia el sistema. Durant la primera arrencada els continguts de <tt>/home</tt> i <tt>/var/cache/apt</tt> es copiaran en el volum de la persistència, i d'aquí en endavant tots els canvis en aquests directoris es guardaran en aquest volum. Tenir en compte que les rutes que apareixen en el fitxer <tt>persistence.conf</tt> no poden contenir espais en blanc o els components especials <tt>.</tt> i <tt>..</tt>. A més, ni <tt>/lib</tt>, <tt>/lib/live</tt> (o qualsevol dels seus subdirectoris) ni <tt>/</tt> es poden fer persistents utilitzant muntatges personalitzats. Com a solució per a aquesta limitació es pot afegir <tt>/ union</tt> al fitxer <tt>persistence.conf</tt> per a aconseguir una persistència completa.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#585" class="lnkocn">585</a></label>
  <p class="bold" id="585"><a name="585"></a> <a id="hc10.3.2"></a>
    <a name="c10.3.2" ></a><a name="h10.3.2" ></a>10.3.2 Utilitzar diversos medis persistents
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#586" class="lnkocn">586</a></label>
  <p class="i0" id="586">
    Hi ha diferents mètodes per utilitzar múltiples volums de persistència per a diferents casos d'ús. Per exemple, utilitzar diversos volums al mateix temps o seleccionar-ne només un, entre varis, per a fins molt específics.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#587" class="lnkocn">587</a></label>
  <p class="i0" id="587">
    Es poden utilitzar diversos volums diferents de muntatges personalitzats (amb els seus propis fitxers <tt>persistence.conf</tt> però si diversos volums fan que el mateix directori sigui persistent, només s'utilitzarà un d'ells. Si qualsevol dels dos muntatges són "imbricats" (és a dir, un és un sub-directori de l'altre) el directori pare es muntarà abans que el directori fill per a evitar que amb el muntatge un directori no sigui ocultat per l'altre. Els muntatges personalitzats imbricats són problemàtics si estan enumerats en el mateix fitxer <tt>persistence.conf</tt>. Veure la pàgina del manual persistence.conf(5) per a saber com manejar aquest cas, si realment es necessita (una pista: en general no cal fer-ho).
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#588" class="lnkocn">588</a></label>
  <p class="i0" id="588">
    Un possible cas d'ús: Per a guardar les dades de l'usuari, és a dir <tt>/home</tt> i les dades del superusuari, és a dir <tt>/root</tt> en diferents particions, crear dues particions amb l'etiqueta <tt>persistence</tt> i afegir un fitxer <tt>persistence.conf</tt> en cadascuna d'aquesta manera <tt># echo "/home" &gt; persistence.conf</tt> per a la primera partició que guardarà els fitxers de l'usuari i <tt># echo "/root" &gt; persistence.conf</tt> per a la segona partició que emmagatzemarà els fitxers del superusuari. Finalment, utilitzar el paràmetre d'arrencada <tt>persistence</tt>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#589" class="lnkocn">589</a></label>
  <p class="i0" id="589">
    Si un usuari necessita múltiples volums de persistència del mateix tipus per a diferents ubicacions o proves, com <tt>private</tt> i <tt>work</tt>, el paràmetre d'arrencada <tt>persistence-label</tt> utilitzat juntament amb el paràmetre d'arrencada <tt>persistence</tt> permetrà tenir diversos dispositius amb la mateixa, però única, persistència. Un exemple seria si un usuari vol utilitzar una partició amb persistència amb l'etiqueta <tt>private</tt> per a dades personals com els marcadors d'un navegador, utilitzaria els paràmetres d'arrencada: <tt>persistence</tt> <tt>persistence-label=private</tt>. I per emmagatzemar dades relacionades amb el treball, com a documents, projectes de recerca o d'un altre tipus, utilitzaria els paràmetres d'arrencada: <tt>persistence</tt> <tt>persistence-label=work</tt>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#590" class="lnkocn">590</a></label>
  <p class="i0" id="590">
    És important recordar que aquests volums, <tt>private</tt> i <tt>work</tt>, també necessiten tenir un fitxer <tt>persistence.conf</tt> en la seva arrel. La pàgina de manual de <i>live-boot</i> conté més informació sobre com utilitzar aquestes etiquetes amb els noms més antics.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#591" class="lnkocn">591</a></label>
  <p class="bold" id="591"><a name="591"></a> <a id="hc10.3.3"></a>
    <a name="c10.3.3" ></a><a name="h10.3.3" ></a>10.3.3 Persistència amb xifratge
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#592" class="lnkocn">592</a></label>
  <p class="i0" id="592">
    Utilitzar la persistència vol dir que algunes dades sensibles poden quedar exposades a risc. Especialment si les dades persistents s'emmagatzemen en un dispositiu portàtil com una memòria USB o un disc dur extern. És llavors quan el xifrat entra en joc. Fins i tot si el procediment pot semblar complicat a causa de la quantitat de passos que s'han de fer, és molt fàcil manejar particions xifrades amb <i>live-boot</i>. Per a utilitzar <b>luks</b>, que és el tipus de xifrat compatible, es necessita instal·lar <i>cryptsetup</i> tant en la màquina que crearà la partició xifrada com en el sistema en viu amb que es va a utilitzar la partició persistent xifrada.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#593" class="lnkocn">593</a></label>
  <p class="i0" id="593">
    Per a instal·lar <i>cryptsetup</i> a la nostra màquina:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#594" class="lnkocn">594</a></label>
  <p class="code" id="594">
    # apt-get install cryptsetup<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#595" class="lnkocn">595</a></label>
  <p class="i0" id="595">
    Per a instal·lar <i>cryptsetup</i> en el sistema viu, afegir-lo a una package-lists:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#596" class="lnkocn">596</a></label>
  <p class="code" id="596">
    $ lb config<br>
$ echo "cryptsetup" &gt; config/package-lists/encryption.list.chroot<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#597" class="lnkocn">597</a></label>
  <p class="i0" id="597">
    Una cop tinguem el nostre sistema en viu amb <i>cryptsetup</i>, bàsicament, només hem de crear una nova partició, xifrar-la i arrencar amb els paràmetres <tt>persistence</tt> i <tt>persistence-encryption=luks</tt>. Podríem haver anticipat aquest pas i afegit els paràmetres d'arrencada seguint el procediment habitual:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#598" class="lnkocn">598</a></label>
  <p class="code" id="598">
    $ lb config --bootappend-live "boot=live components persistence persistence-encryption=luks"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#599" class="lnkocn">599</a></label>
  <p class="i0" id="599">
    Anem a entrar en els detalls per a tothom que no està familiaritzat amb el xifrat. En el següent exemple utilitzarem una partició en un dispositiu USB que correspon a <tt>/dev/sdc2</tt>. Tenir en compte que cal determinar quina partició és la que es va a utilitzar en cada cas específic.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#600" class="lnkocn">600</a></label>
  <p class="i0" id="600">
    El primer pas és connectar la memòria usb i determinar de quin dispositiu es tracta. La manera més recomanable per a llistar dispositius és utilitzar <tt>ls -l /dev/disk/by-id</tt>. Després d'això, crear una nova partició i, a continuació, xifrar-la amb una frase de contrasenya de la següent manera:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#601" class="lnkocn">601</a></label>
  <p class="code" id="601">
    # cryptsetup --verify-passphrase luksFormat /dev/sdc2<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#602" class="lnkocn">602</a></label>
  <p class="i0" id="602">
    A continuació, obrir la partició luks al mapeador de dispositius virtuals. Es pot utilitzar qualsevol nom que es desitgi. Aquí utilitzem <b>live</b> com a exemple:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#603" class="lnkocn">603</a></label>
  <p class="code" id="603">
    # cryptsetup luksOpen /dev/sdc2 live<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#604" class="lnkocn">604</a></label>
  <p class="i0" id="604">
    El següent pas és omplir el dispositiu amb zeros abans de crear el sistema de fitxers:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#605" class="lnkocn">605</a></label>
  <p class="code" id="605">
    # dd if=/dev/zero of=/dev/mapper/live<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#606" class="lnkocn">606</a></label>
  <p class="i0" id="606">
    Ara, estem preparats per a crear el sistema de fitxers. Noteu que estem afegint l'etiqueta <tt>persistence</tt> perquè el dispositiu es munti com a magatzem de persistència durant l'arrencada.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#607" class="lnkocn">607</a></label>
  <p class="code" id="607">
    # mkfs.ext4 -L persistence /dev/mapper/live<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#608" class="lnkocn">608</a></label>
  <p class="i0" id="608">
    Per continuar amb la nostra configuració, necessitem muntar el dispositiu, per exemple, a <tt>/mnt</tt>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#609" class="lnkocn">609</a></label>
  <p class="code" id="609">
    # mount /dev/mapper/live /mnt<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#610" class="lnkocn">610</a></label>
  <p class="i0" id="610">
    I crear el fitxer <tt>persistence.conf</tt> a l'arrel de la partició. Això és, com s'ha explicat abans, estrictament necessari. Veure  <a href="customizing-run-time-behaviours.ca.html#persistence-conf">El fitxer persistence.conf</a>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#611" class="lnkocn">611</a></label>
  <p class="code" id="611">
    # echo "/ union" &gt; /mnt/persistence.conf<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#612" class="lnkocn">612</a></label>
  <p class="i0" id="612">
    Desmuntar el punt de muntatge:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#613" class="lnkocn">613</a></label>
  <p class="code" id="613">
    # umount /mnt<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#614" class="lnkocn">614</a></label>
  <p class="i0" id="614">
    I opcionalment, encara que podria ser una bona manera de protegir les dades que acabem d'agregar a la partició, podem tancar el dispositiu:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#615" class="lnkocn">615</a></label>
  <p class="code" id="615">
    # cryptsetup luksClose live<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#616" class="lnkocn">616</a></label>
  <p class="i0" id="616">
    Anem a resumir el procés. Fins ara, hem creat un sistema viu capaç de manejar xifratge, que es pot copiar a una memòria USB com s'explica a  <a href="the-basics.ca.html#copying-iso-hybrid-to-usb">Copiar una imatge ISO híbrida en un dispositiu USB</a>.  També hem creat una partició xifrada, que es pot situar en la mateixa memòria USB per portar a tot arreu i hem configurat la partició xifrada per ser utilitzada com a magatzem de persistència. Així que ara, només hem de arrencar el sistema en viu. En el moment d'arrencar, <i>live-boot</i> ens preguntarà la frase de contrasenya i muntarà la partició xifrada per a ser utilitzada per a la persistència.
  </p>
</div></div><br><div class="main_column">
  <table summary="segment navigation band" bgcolor="#ffffff" width="100%"><tr>
  <td width="70%" align="center">
    
<table summary="segment navigation available documents types: toc,doc,pdf,concordance" border="0" cellpadding="3" cellspacing="0">
<tr>
<td align="center" bgcolor="#ffffff">
  
  
</tr></table>
  </td>
  <td width="5%" align="right">
    <table summary="segment navigation pre/next" border="0" cellpadding="3" cellspacing="0">
<tr>
<td align="center" bgcolor="#ffffff">
  <a href="customizing-contents.ca.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_prev_red.png" alt="&lt;&lt;&nbsp;previous" />
  </a>
</td>
<td align="center" bgcolor="#ffffff">
  <a href="toc.ca.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_up_red.png" alt="toc" />
  </a>
</td>
<td align="center" bgcolor="#ffffff">
  <a href="customizing-binary.ca.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_next_red.png" alt="next&nbsp;&gt;&gt;" />
  </a>
</td>
<td>
</td></tr>
</table>
  </td></tr>
  </table>
  
</div><div class="main_column">

<a name="bottom" id="bottom"></a>
<a name="end" id="end"></a>
</div></div></body>
</html>