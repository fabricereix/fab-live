<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>
    customizing-run-time-behaviours -
    Manual de Live Systems
  </title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <meta name="dc.title" content="Manual de Live Systems" />
  <meta name="dc.author" content="Proyecto Live  Systems &#60;debian-live@lists.debian.org&#62;" />
  <meta name="dc.publisher" content="Live Systems Project &#60;debian-live@lists.debian.org&#62;" />
  <meta name="dc.date" content="22.09.2015"  />
  <meta name="dc.rights" content="Copyright: Copyright (C) 2006-2015 Live Systems Project \\ License: Este programa es software libre: puede ser redistribuido y/o modificado bajo los t&#233;rminos de la GNU General Public License publicada por la Free Software Foundation, bien de la versi&#243;n 3 de la Licencia, o (a su elecci&#243;n) cualquier versi&#243;n posterior. \\  \\ Este programa se distribuye con la esperanza de que sea &#251;til, pero SIN NINGUNA GARANT&#205;A, incluso sin la garant&#237;a impl&#237;cita de COMERCIALIZACI&#211;N o IDONEIDAD PARA UN PROP&#211;SITO PARTICULAR. Consulte la GNU General Public License para m&#225;s detalles. \\  \\ Deber&#237;a haber recibido una copia de la General Public License GNU junto con este programa. Si no, vea http://www.gnu.org/licenses/. \\  \\ El texto completo de la GNU Licencia P&#251;blica General se pueden encontrar en /usr/share/common-licenses/GPL-3" />

  <meta name="generator" content="SiSU 7.1.8 of 2016w08/5 (2016-02-26) (n*x and Ruby!)" />
    <link rel="generator" href="http://www.sisudoc.org/" />
  <link rel="shortcut icon" href="../_sisu/image/rb7.ico" />

  <link href="../../_sisu/css/html.css" rel="stylesheet">
</head>
<body lang="es">
<a name="top" id="top"></a><table summary="segment navigation band with banner" bgcolor="#ffffff" width="100%"><tr>
<td width="20%" align="left">
 <table summary="home button / home information" border="0" cellpadding="3" cellspacing="0">
 <tr><td align="left" bgcolor="#ffffff">
  <p class="tiny_left"><a href="http://debian-live.alioth.debian.org/manual" target="_top">
    Live manual
  </a></p>
  <p class="tiny_left"><a href="http://debian-live.alioth.debian.org" target="_top">
    Live Systems
  </a></p>
 </td></tr>
 </table>
</td>
<td width="75%" align="center">
  
<table summary="segment navigation available documents types: toc,doc,pdf,concordance" border="0" cellpadding="3" cellspacing="0">
<tr>
<td align="center" bgcolor="#ffffff">
  
  
</tr></table>
</td>
<td width="5%" align="right">
  <table summary="segment navigation pre/next" border="0" cellpadding="3" cellspacing="0">
<tr>
<td align="center" bgcolor="#ffffff">
  <a href="customizing-contents.es.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_prev_red.png" alt="&lt;&lt;&nbsp;previous" />
  </a>
</td>
<td align="center" bgcolor="#ffffff">
  <a href="toc.es.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_up_red.png" alt="toc" />
  </a>
</td>
<td align="center" bgcolor="#ffffff">
  <a href="customizing-binary.es.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_next_red.png" alt="next&nbsp;&gt;&gt;" />
  </a>
</td>
<td>
</td></tr>
</table>
</td></tr>
</table><div class="toc"><h1 class="minitoc">
    Manual de Live Systems
  </h1>

<h1 class="minitoc">
    Acerca de este manual
  </h1>

<h1 class="minitoc">
    Acerca de este manual
  </h1>

<h4 class="minitoc">
      <a href="about-manual.es.html" target="_top">
    1. Acerca de este manual
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="about-manual.es.html#8">
    1.1 Para el impaciente.
  </a>
  </h5>

<h5 class="minitoc">
      <a href="about-manual.es.html#12">
    1.2 Términos
  </a>
  </h5>

<h5 class="minitoc">
      <a href="about-manual.es.html#29">
    1.3 Autores
  </a>
  </h5>

<h5 class="minitoc">
      <a href="about-manual.es.html#44">
    1.4 Cómo contribuir a este documento
  </a>
  </h5>

<h6 class="minitoc">
      <a href="about-manual.es.html#46">
  1.4.1 Aplicar cambios
</a>
  </h6>

<h6 class="minitoc">
      <a href="about-manual.es.html#60">
  1.4.2 Traducción
</a>
  </h6>

<h1 class="minitoc">
    Contribuir al Live Systems Project
  </h1>

<h4 class="minitoc">
      <a href="about-project.es.html" target="_top">
    2. Acerca del Live Systems Project
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="about-project.es.html#75">
    2.1 Motivación
  </a>
  </h5>

<h6 class="minitoc">
      <a href="about-project.es.html#76">
  2.1.1 Desventajas de los sistemas en vivo actuales
</a>
  </h6>

<h6 class="minitoc">
      <a href="about-project.es.html#86">
  2.1.2 El porqué de crear un sistema en vivo propio.
</a>
  </h6>

<h5 class="minitoc">
      <a href="about-project.es.html#94">
    2.2 Filosofía
  </a>
  </h5>

<h6 class="minitoc">
      <a href="about-project.es.html#95">
  2.2.1 Solamente paquetes sin modificación alguna de Debian «main»
</a>
  </h6>

<h6 class="minitoc">
      <a href="about-project.es.html#99">
  2.2.2 Sin configuración especial para el sistema en vivo
</a>
  </h6>

<h5 class="minitoc">
      <a href="about-project.es.html#103">
    2.3 Contacto
  </a>
  </h5>

<h1 class="minitoc">
    Usuario
  </h1>

<h1 class="minitoc">
    Instalación
  </h1>

<h4 class="minitoc">
      <a href="installation.es.html" target="_top">
    3. Instalación
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="installation.es.html#110">
    3.1 Requisitos
  </a>
  </h5>

<h5 class="minitoc">
      <a href="installation.es.html#118">
    3.2 Instalación de live-build
  </a>
  </h5>

<h6 class="minitoc">
      <a href="installation.es.html#124">
  3.2.1 Desde el repositorio Debian.
</a>
  </h6>

<h6 class="minitoc">
      <a href="installation.es.html#127">
  3.2.2 A partir del código fuente
</a>
  </h6>

<h6 class="minitoc">
      <a href="installation.es.html#138">
  3.2.3 A partir de «instantáneas»
</a>
  </h6>

<h5 class="minitoc">
      <a href="installation.es.html#140">
    3.3 Instalación de live-boot y live-config
  </a>
  </h5>

<h6 class="minitoc">
      <a href="installation.es.html#142">
  3.3.1 Desde el repositorio Debian.
</a>
  </h6>

<h6 class="minitoc">
      <a href="installation.es.html#144">
  3.3.2 A partir del código fuente
</a>
  </h6>

<h6 class="minitoc">
      <a href="installation.es.html#156">
  3.3.3 A partir de «instantáneas»
</a>
  </h6>

<h1 class="minitoc">
    Conceptos básicos
  </h1>

<h4 class="minitoc">
      <a href="the-basics.es.html" target="_top">
    4. Conceptos básicos
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="the-basics.es.html#163">
    4.1 ¿Qué es un sistema en vivo?
  </a>
  </h5>

<h5 class="minitoc">
      <a href="the-basics.es.html#171">
    4.2 Descarga de imágenes prefabricadas
  </a>
  </h5>

<h5 class="minitoc">
      <a href="the-basics.es.html#173">
    4.3 Uso del servicio de creación de imágenes web
  </a>
  </h5>

<h6 class="minitoc">
      <a href="the-basics.es.html#175">
  4.3.1 Uso y advertencias del servicio de creación de imágenes web
</a>
  </h6>

<h5 class="minitoc">
      <a href="the-basics.es.html#179">
    4.4 Primeros pasos: creación de una imagen ISO híbrida
  </a>
  </h5>

<h5 class="minitoc">
      <a href="the-basics.es.html#190">
    4.5 Usar una imagen ISO híbrida
  </a>
  </h5>

<h6 class="minitoc">
      <a href="the-basics.es.html#192">
  4.5.1 Grabar una imagen ISO en un medio físico.
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.es.html#195">
  4.5.2 Copiar una imagen ISO híbrida a un dispositivo  USB
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.es.html#200">
  4.5.3 Usar el espacio libre en el dispositivo USB
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.es.html#207">
  4.5.4 Arrancar el medio en vivo
</a>
  </h6>

<h5 class="minitoc">
      <a href="the-basics.es.html#211">
    4.6 Usar una máquina virtual para pruebas
  </a>
  </h5>

<h6 class="minitoc">
      <a href="the-basics.es.html#218">
  4.6.1 Probar una imagen ISO con QEMU
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.es.html#225">
  4.6.2 Probar una imagen ISO con VirtualBox
</a>
  </h6>

<h5 class="minitoc">
      <a href="the-basics.es.html#233">
    4.7 Construir y utilizar una imágen HDD
  </a>
  </h5>

<h5 class="minitoc">
      <a href="the-basics.es.html#245">
    4.8 Creación de una imagen de arranque en red
  </a>
  </h5>

<h6 class="minitoc">
      <a href="the-basics.es.html#258">
  4.8.1 Servidor DHCP
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.es.html#262">
  4.8.2 Servidor TFTP
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.es.html#267">
  4.8.3 Servidor NFS
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.es.html#275">
  4.8.4 Cómo probar el arranque en red
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.es.html#278">
  4.8.5 Qemu
</a>
  </h6>

<h5 class="minitoc">
      <a href="the-basics.es.html#284">
    4.9 Arrancar desde internet
  </a>
  </h5>

<h6 class="minitoc">
      <a href="the-basics.es.html#286">
  4.9.1 Conseguir los ficheros para arrancar desde internet
</a>
  </h6>

<h6 class="minitoc">
      <a href="the-basics.es.html#292">
  4.9.2 Arrancar imágenes webboot
</a>
  </h6>

<h1 class="minitoc">
    Descripción general de las herramientas
  </h1>

<h4 class="minitoc">
      <a href="overview-of-tools.es.html" target="_top">
    5. Descripción general de las herramientas
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="overview-of-tools.es.html#300">
    5.1 El paquete live-build
  </a>
  </h5>

<h6 class="minitoc">
      <a href="overview-of-tools.es.html#310">
  5.1.1 El comando <tt>lb config</tt>
</a>
  </h6>

<h6 class="minitoc">
      <a href="overview-of-tools.es.html#320">
  5.1.2 El comando <tt>lb build</tt>
</a>
  </h6>

<h6 class="minitoc">
      <a href="overview-of-tools.es.html#322">
  5.1.3 El comando <tt>lb clean</tt>
</a>
  </h6>

<h5 class="minitoc">
      <a href="overview-of-tools.es.html#324">
    5.2 El paquete live-boot
  </a>
  </h5>

<h5 class="minitoc">
      <a href="overview-of-tools.es.html#328">
    5.3 El paquete live-config
  </a>
  </h5>

<h1 class="minitoc">
    Gestionar una configuración
  </h1>

<h4 class="minitoc">
      <a href="managing-a-configuration.es.html" target="_top">
    6. Gestionar una configuración
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="managing-a-configuration.es.html#333">
    6.1 Gestionar cambios en la configuración
  </a>
  </h5>

<h6 class="minitoc">
      <a href="managing-a-configuration.es.html#335">
  6.1.1 ¿Por qué utilizar scripts auto? ¿Qué hacen?
</a>
  </h6>

<h6 class="minitoc">
      <a href="managing-a-configuration.es.html#338">
  6.1.2 Usar scripts auto de ejemplo
</a>
  </h6>

<h5 class="minitoc">
      <a href="managing-a-configuration.es.html#345">
    6.2 Clonar una configuración publicada a través de  Git
  </a>
  </h5>

<h1 class="minitoc">
    Personalización de contenidos
  </h1>

<h4 class="minitoc">
      <a href="customization-overview.es.html" target="_top">
    7. Descripción general de la personalización.
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customization-overview.es.html#359">
    7.1 Configuración en el momento de la creación vs en el momento del arranque
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customization-overview.es.html#362">
    7.2 Etapas de la creación
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customization-overview.es.html#365">
    7.3 Opciones para lb config en ficheros
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customization-overview.es.html#367">
    7.4 Tareas de personalización
  </a>
  </h5>

<h1 class="minitoc">
    Personalización de la instalación de paquetes
  </h1>

<h4 class="minitoc">
      <a href="customizing-package-installation.es.html" target="_top">
    8. Personalización de la instalación de  paquetes
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customizing-package-installation.es.html#372">
    8.1 Origen de los paquetes
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#373">
  8.1.1 Distribución, áreas de archivo y modo
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#380">
  8.1.2 Réplicas de Distribución Debian
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#382">
  8.1.3 Réplicas de Distribution utilizadas  durante la creación
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#386">
  8.1.4 Réplicas de distribución Debian utilizadas en la ejecución.
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#389">
  8.1.5 Repositorios adicionales
</a>
  </h6>

<h5 class="minitoc">
      <a href="customizing-package-installation.es.html#397">
    8.2 Selección de los paquetes a instalar
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#399">
  8.2.1 Listas de paquetes
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#402">
  8.2.2 Utilizar metapaquetes
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#410">
  8.2.3 Listas de paquetes locales
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#414">
  8.2.4 Listas de paquetes locales para la etapa binary
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#416">
  8.2.5 Generar listas de paquetes
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#420">
  8.2.6 Utilización de condiciones dentro de las listas de paquetes
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#429">
  8.2.7 Eliminación paquetes durante la instalación
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#431">
  8.2.8 Tareas de Escritorio e Idioma
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#436">
  8.2.9 Versión y tipo de kernel
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#441">
  8.2.10 Kernels personalizados
</a>
  </h6>

<h5 class="minitoc">
      <a href="customizing-package-installation.es.html#449">
    8.3 Instalar paquetes modificados  o de terceros
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#456">
  8.3.1 Método <tt>packages.chroot</tt> para instalar paquetes personalizados
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#463">
  8.3.2 Método de repositorio APT para instalar paquetes personalizados
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#466">
  8.3.3 Paquetes personalizados y APT
</a>
  </h6>

<h5 class="minitoc">
      <a href="customizing-package-installation.es.html#469">
    8.4 Configurar APT en la creación
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#471">
  8.4.1 Utilizar apt o aptitude
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#475">
  8.4.2 Utilización de un proxy con APT
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#478">
  8.4.3 Ajuste de APT para ahorrar espacio
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#487">
  8.4.4 Pasar opciones a apt o a aptitude
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-package-installation.es.html#492">
  8.4.5 APT pinning
</a>
  </h6>

<h1 class="minitoc">
    Personalización de contenidos
  </h1>

<h4 class="minitoc">
      <a href="customizing-contents.es.html" target="_top">
    9. Personalización de contenidos
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customizing-contents.es.html#501">
    9.1 Includes
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-contents.es.html#506">
  9.1.1 Includes locales en Live/chroot
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-contents.es.html#513">
  9.1.2 Includes locales en Binary
</a>
  </h6>

<h5 class="minitoc">
      <a href="customizing-contents.es.html#517">
    9.2 Scripts gancho (Hooks)
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-contents.es.html#520">
  9.2.1 Scripts gancho locales en el chroot
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-contents.es.html#522">
  9.2.2 Scripts gancho locales en Binary
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-contents.es.html#524">
  9.2.3 Scripts gancho en tiempo de arranque
</a>
  </h6>

<h5 class="minitoc">
      <a href="customizing-contents.es.html#526">
    9.3 Preconfiguración de las preguntas de Debconf
  </a>
  </h5>

<h1 class="minitoc">
    Personalización del comportamiento en tiempo de ejecución.
  </h1>

<h4 class="minitoc">
      <a href="customizing-run-time-behaviours.es.html" target="_top">
    10. Personalización del comportamiento en  tiempo de ejecución.
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customizing-run-time-behaviours.es.html#532">
    10.1 Personalización del usuario por defecto del sistema en vivo
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customizing-run-time-behaviours.es.html#541">
    10.2 Personalización de las variantes locales e  idioma
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customizing-run-time-behaviours.es.html#558">
    10.3 Persistencia
  </a>
  </h5>

<h6 class="minitoc">
      <a href="customizing-run-time-behaviours.es.html#580">
  10.3.1 El fichero persistence.conf
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-run-time-behaviours.es.html#585">
  10.3.2 Utilizar varios medios persistentes
</a>
  </h6>

<h6 class="minitoc">
      <a href="customizing-run-time-behaviours.es.html#591">
  10.3.3 Utilizar persistencia con cifrado
</a>
  </h6>

<h1 class="minitoc">
    Personalización de la imagen binaria
  </h1>

<h4 class="minitoc">
      <a href="customizing-binary.es.html" target="_top">
    11. Personalización de la imagen binaria
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customizing-binary.es.html#619">
    11.1 Gestores de arranque
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customizing-binary.es.html#626">
    11.2 Metadatos ISO
  </a>
  </h5>

<h1 class="minitoc">
    Personalización del Instalador de Debian
  </h1>

<h4 class="minitoc">
      <a href="customizing-installer.es.html" target="_top">
    12. Personalización del Instalador de Debian
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="customizing-installer.es.html#636">
    12.1 Tipos de imágenes según el instalador
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customizing-installer.es.html#648">
    12.2 Personalizando el Instalador de Debian mediante preconfiguración
  </a>
  </h5>

<h5 class="minitoc">
      <a href="customizing-installer.es.html#651">
    12.3 Personalizar el contenido del Instalador de Debian
  </a>
  </h5>

<h1 class="minitoc">
    Proyecto
  </h1>

<h1 class="minitoc">
    Contribuir al proyecto
  </h1>

<h4 class="minitoc">
      <a href="contributing-to-project.es.html" target="_top">
    13. Contribuir al proyecto
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="contributing-to-project.es.html#667">
    13.1 Realizar cambios
  </a>
  </h5>

<h5 class="minitoc">
      <a href="contributing-to-project.es.html#682">
    13.2 Traducción de las páginas de manual
  </a>
  </h5>

<h1 class="minitoc">
    Cómo informar acerca de errores.
  </h1>

<h4 class="minitoc">
      <a href="bugs.es.html" target="_top">
    14. Informes de errores.
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="bugs.es.html#698">
    14.1 Problemas conocidos
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.es.html#703">
    14.2 Reconstruir desde cero
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.es.html#705">
    14.3 Utilizar paquetes actualizados
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.es.html#707">
    14.4 Recopilar información
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.es.html#724">
    14.5 Aislar el fallo si es posible
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.es.html#726">
    14.6 Utilizar el paquete correcto sobre el que informar del error
  </a>
  </h5>

<h6 class="minitoc">
      <a href="bugs.es.html#729">
  14.6.1 En la preinstalación (bootstrap) en tiempo de creación.
</a>
  </h6>

<h6 class="minitoc">
      <a href="bugs.es.html#732">
  14.6.2 Mientras se instalan paquetes en tiempo de creación.
</a>
  </h6>

<h6 class="minitoc">
      <a href="bugs.es.html#736">
  14.6.3 En tiempo de arranque
</a>
  </h6>

<h6 class="minitoc">
      <a href="bugs.es.html#738">
  14.6.4 En tiempo de ejecución
</a>
  </h6>

<h5 class="minitoc">
      <a href="bugs.es.html#740">
    14.7 Hacer la investigación
  </a>
  </h5>

<h5 class="minitoc">
      <a href="bugs.es.html#744">
    14.8 Dónde informar de los fallos
  </a>
  </h5>

<h1 class="minitoc">
    Estilo de código
  </h1>

<h4 class="minitoc">
      <a href="coding-style.es.html" target="_top">
    15. Estilo de código
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="coding-style.es.html#751">
    15.1 Compatibilidad
  </a>
  </h5>

<h5 class="minitoc">
      <a href="coding-style.es.html#756">
    15.2 Sangrado
  </a>
  </h5>

<h5 class="minitoc">
      <a href="coding-style.es.html#758">
    15.3 Ajuste de líneas
  </a>
  </h5>

<h5 class="minitoc">
      <a href="coding-style.es.html#770">
    15.4 Variables
  </a>
  </h5>

<h5 class="minitoc">
      <a href="coding-style.es.html#789">
    15.5 Miscelánea
  </a>
  </h5>

<h1 class="minitoc">
    Procedimientos
  </h1>

<h4 class="minitoc">
      <a href="procedures.es.html" target="_top">
    16. Procedimientos
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="procedures.es.html#797">
    16.1 Principales lanzamientos
  </a>
  </h5>

<h5 class="minitoc">
      <a href="procedures.es.html#803">
    16.2 Nuevas versiones
  </a>
  </h5>

<h6 class="minitoc">
      <a href="procedures.es.html#807">
  16.2.1 Última actualización de una versión Debian
</a>
  </h6>

<h6 class="minitoc">
      <a href="procedures.es.html#809">
  16.2.2 Plantilla para anunciar nuevas versiones.
</a>
  </h6>

<h1 class="minitoc">
    Repositorios Git
  </h1>

<h4 class="minitoc">
      <a href="git-repositories.es.html" target="_top">
    17. Repositorios Git
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="git-repositories.es.html#829">
    17.1 Manejo de múltiples repositorios
  </a>
  </h5>

<h1 class="minitoc">
    Ejemplos
  </h1>

<h1 class="minitoc">
    Ejemplos
  </h1>

<h4 class="minitoc">
      <a href="examples.es.html" target="_top">
    18. Ejemplos
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="examples.es.html#837">
    18.1 Uso de los ejemplos
  </a>
  </h5>

<h5 class="minitoc">
      <a href="examples.es.html#841">
    18.2 Tutorial 1: Una imagen predeterminada
  </a>
  </h5>

<h5 class="minitoc">
      <a href="examples.es.html#850">
    18.3 Tutorial 2: Una utilidad de navegador web
  </a>
  </h5>

<h5 class="minitoc">
      <a href="examples.es.html#858">
    18.4 Tutorial 3: Una imagen personalizada
  </a>
  </h5>

<h6 class="minitoc">
      <a href="examples.es.html#861">
  18.4.1 Primera revisión
</a>
  </h6>

<h6 class="minitoc">
      <a href="examples.es.html#875">
  18.4.2 Segunda revisión
</a>
  </h6>

<h5 class="minitoc">
      <a href="examples.es.html#887">
    18.5 Un cliente VNC kiosk
  </a>
  </h5>

<h5 class="minitoc">
      <a href="examples.es.html#901">
    18.6 Una imagen básica para un pendrive USB de 128MB
  </a>
  </h5>

<h5 class="minitoc">
      <a href="examples.es.html#912">
    18.7 Un escritorio GNOME con variante local e instalador
  </a>
  </h5>

<h1 class="minitoc">
    Apéndice
  </h1>

<h1 class="minitoc">
    Style guide
  </h1>

<h4 class="minitoc">
      <a href="style-guide.es.html" target="_top">
    19. Guía de estilo
  </a> 
  </h4>

<h5 class="minitoc">
      <a href="style-guide.es.html#927">
    19.1 Instrucciones para los autores
  </a>
  </h5>

<h6 class="minitoc">
      <a href="style-guide.es.html#930">
  19.1.1 Aspectos lingüísticos
</a>
  </h6>

<h6 class="minitoc">
      <a href="style-guide.es.html#963">
  19.1.2 Procedimientos
</a>
  </h6>

<h5 class="minitoc">
      <a href="style-guide.es.html#1002">
    19.2 Directrices para los traductores
  </a>
  </h5>

<h6 class="minitoc">
      <a href="style-guide.es.html#1006">
  19.2.1 Consejos de traducción
</a>
  </h6>

<h1 class="minitoc">
    <b><a href="metadata.es.html">Metadata</a></b>
  </h1>

<h4 class="minitoc">
      <a href="metadata.es.html" target="_top">
    SiSU Metadata, document information
  </a> 
  </h4>
</div><div class="content">
<h1 class="tiny">
    Manual de Live Systems
  </h1>
</div><div class="content">
<h1 class="tiny">
    Personalización del comportamiento en tiempo de ejecución.
  </h1>
</div><div class="content"><div class="substance">
  <label class="ocn"><a href="#530" class="lnkocn">530</a></label>
  <h1 class="norm" id="530"><a name="530"></a>
    10. Personalización del comportamiento en  tiempo de ejecución.
  </h1>
</div><div class="substance">
  <label class="ocn"><a href="#531" class="lnkocn">531</a></label>
  <p class="i0" id="531">
    Toda la configuración que se hace en tiempo de ejecución es realizada por <i>live-config</i>. Éstas son algunas de las opciones más comunes de <i>live-config</i> en las que los usuarios están más interesados. Se puede encontrar una lista completa de todas las posibilidades en la página de manual de <i>live-config</i>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#532" class="lnkocn">532</a></label>
  <p class="bold" id="532"><a name="532"></a> <a id="hc10.1"></a>
    <a name="c10.1" ></a><a name="h10.1" ></a>10.1 Personalización del usuario por defecto del sistema en vivo
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#533" class="lnkocn">533</a></label>
  <p class="i0" id="533">
    Una consideración importante es que el usuario por defecto del sistema en vivo es creado por <i>live-boot</i> en el arranque y no <i>live-build</i> durante la creación de la imagen. Ésto no sólo influye dónde se introducen los materiales relacionados con este usuario durante la creación de la imagen tal y como se explica en  <a href="customizing-contents.es.html#live-chroot-local-includes">Includes locales en Live/chroot</a>  sino también a cualquier grupo y a los permisos asociados con el usuario por defecto del sistema en vivo.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#534" class="lnkocn">534</a></label>
  <p class="i0" id="534">
    Se pueden especificar grupos adicionales a los que pertenecerá el usuario por defecto del sistema en vivo mediante el uso de cualquiera de las posibilidades de configuración de <i>live-config</i>. Por ejemplo, para agregar el usuario al grupo <tt>fuse</tt>, se puede agregar el fichero siguiente a <tt>config/includes.chroot/etc/live/config/user-setup.conf</tt>:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#535" class="lnkocn">535</a></label>
  <p class="code" id="535">
    LIVE_USER_DEFAULT_GROUPS="audio cdrom dip floppy video plugdev netdev powerdev scanner bluetooth fuse"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#536" class="lnkocn">536</a></label>
  <p class="i0" id="536">
    o utilizar <tt>live-config.user-default-groups=audio,cdrom,dip,floppy,video,plugdev,netdev,powerdev,scanner,bluetooth,fuse</tt> como parámetro de arranque.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#537" class="lnkocn">537</a></label>
  <p class="i0" id="537">
    Además, es posible cambiar el usuario por defecto "user" y la contraseña por defecto "live". Si se desea cambiarlos por cualquier motivo, se puede conseguir de forma sencilla tal y como se explica a continuación:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#538" class="lnkocn">538</a></label>
  <p class="i0" id="538">
    Cambiar el nombre del usuario por defecto es tan sencillo como especificarlo en la configuración:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#539" class="lnkocn">539</a></label>
  <p class="code" id="539">
    $ lb config --bootappend-live "boot=live components username=live-user"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#540" class="lnkocn">540</a></label>
  <p class="i0" id="540">
    Una posible forma de cambiar la contraseña por defecto es usando un script gancho (hook) tal y como se describe en  <a href="customizing-contents.es.html#boot-time-hooks">Scripts gancho en tiempo de arranque</a>.  Para conseguirlo se puede usar el script gancho «passwd» de <tt>/usr/share/doc/live-config/examples/hooks</tt>, ponerle un prefijo adecuado (p.ej. 2000-passwd) y añadirlo a <tt>config/includes.chroot/lib/live/config/</tt>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#541" class="lnkocn">541</a></label>
  <p class="bold" id="541"><a name="541"></a> <a id="hcustomizing-locale-and-language"></a>
    <a name="h10.2" ></a><a name="customizing-locale-and-language" ></a>10.2 Personalización de las variantes locales e  idioma
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#542" class="lnkocn">542</a></label>
  <p class="i0" id="542">
    Cuando el sistema en vivo arranca, el idioma está implicado en dos pasos:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#543" class="lnkocn">543</a></label>
  <ul>
  <li class="bullet" id="543">
    Generar las variantes locales
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#544" class="lnkocn">544</a></label>
  <ul>
  <li class="bullet" id="544">
    Establecer la distribución del teclado
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#545" class="lnkocn">545</a></label>
  <p class="i0" id="545">
    La variante local predeterminada en la creación de un sistema en vivo es <tt>locales=en_US.UTF-8</tt>. Para definir la variante local que se debe generar, se puede utilizar el parámetro <tt>locales</tt> en la opción <tt>--bootappend-live</tt> de <tt>lb config</tt>, p.ej.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#546" class="lnkocn">546</a></label>
  <p class="code" id="546">
    $ lb config --bootappend-live "boot=live components locales=de_CH.UTF-8"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#547" class="lnkocn">547</a></label>
  <p class="i0" id="547">
    Se pueden especificar diversas variantes locales separándolas con comas.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#548" class="lnkocn">548</a></label>
  <p class="i0" id="548">
    Este parámetro se puede utilizar en la línea de comandos del kernel, al igual que los parámetros de configuración del teclado indicados a continuación. Es posibe configurar una variante local con <tt>idioma_país</tt> (en cuyo caso se utiliza el tipo de codificación por omisión) o también con la expresión completa <tt>idioma_país.codificación</tt>. La lista de todas las variantes locales está en <tt>/usr/share/i18n/SUPPORTED</tt>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#549" class="lnkocn">549</a></label>
  <p class="i0" id="549">
    <tt>live-config</tt> se encarga de la configuración del teclado de la consola y del entorno gráfico X utilizando el paquete <tt>console-setup</tt>. Para configurarlos se puede utilizar los parámetros de arranque <tt>keyboard-layouts</tt>, <tt>keyboard-variants</tt>, <tt>keyboard-options</tt> y <tt>keyboard-model</tt> a través de la opción <tt>--bootappend-live</tt>. Se puede encontrar una lista de opciones válidas para estos parámetros en <tt>/usr/share/X11/xkb/rules/base.lst</tt>. Para hallar la distribución del teclado y la variante que corresponde a un idioma se puede buscar el nombre en inglés de la nación donde se habla el idioma, por ejemplo:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#550" class="lnkocn">550</a></label>
  <p class="code" id="550">
    $ egrep -i '(^!|german.*switzerland)' /usr/share/X11/xkb/rules/base.lst<br>
! model<br>
! layout<br>
&nbsp;&nbsp;&nbsp;ch&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;German (Switzerland)<br>
! variant<br>
&nbsp;&nbsp;&nbsp;legacy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ch: German (Switzerland, legacy)<br>
&nbsp;&nbsp;&nbsp;de_nodeadkeys&nbsp;&nbsp;&nbsp;ch: German (Switzerland, eliminate dead keys)<br>
&nbsp;&nbsp;&nbsp;de_sundeadkeys&nbsp;&nbsp;ch: German (Switzerland, Sun dead keys)<br>
&nbsp;&nbsp;&nbsp;de_mac&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ch: German (Switzerland, Macintosh)<br>
! option<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#551" class="lnkocn">551</a></label>
  <p class="i0" id="551">
    Cada variante muestra una descripción de la disposición que aplica.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#552" class="lnkocn">552</a></label>
  <p class="i0" id="552">
    Normalmente, sólo es necesario configurar la disposición del teclado. Por ejemplo, para obtener los ficheros de la variante local de la disposición del teclado alemán y suizo-alemán en X utilizar:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#553" class="lnkocn">553</a></label>
  <p class="code" id="553">
    $ lb config --bootappend-live "boot=live components locales=de_CH.UTF-8 keyboard-layouts=ch"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#554" class="lnkocn">554</a></label>
  <p class="i0" id="554">
    Sin enbargo, para casos de uso muy específicos, se puede incluir otros parámetros. Por ejemplo, para configurar un sistema Francés con una disposición French-Dvorak (también llamado Bepo) en un teclado USB TypeMatrix EZ-Reach 2030, utilizar:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#555" class="lnkocn">555</a></label>
  <p class="code" id="555">
    $ lb config --bootappend-live \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"boot=live components locales=fr_FR.UTF-8 keyboard-layouts=fr keyboard-variants=bepo keyboard-model=tm2030usb"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#556" class="lnkocn">556</a></label>
  <p class="i0" id="556">
    Para cada una de las variables de configuración del teclado <tt>keyboard-*</tt> se puede especificar varios valores separados por comas. A excepción de <tt>keyboard-model</tt>, que sólo acepta un valor. En la página de manual <tt>keyboard(5)</tt> se explican los detalles y algunos ejemplos de cómo utilizar las variables <tt>XKBMODEL</tt>, <tt>XKBLAYOUT</tt>, <tt>XKBVARIANT</tt> y <tt>XKBOPTIONS</tt>. Si se especifican diferentes valores en <tt>keyboard-variants</tt> estos se corresponderan uno a uno con los valores <tt>keyboard-layouts</tt> (ver <tt>setxkbmap(1)</tt> opción <tt>-variant</tt>). Se admiten valores vacíos; por ejemplo para definir dos distribuciones de teclado, la que se usa por omisión US QWERTY y otra US Dvorak, utilizar:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#557" class="lnkocn">557</a></label>
  <p class="code" id="557">
    $ lb config --bootappend-live \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"boot=live components keyboard-layouts=us,us keyboard-variants=,dvorak"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#558" class="lnkocn">558</a></label>
  <p class="bold" id="558"><a name="558"></a> <a id="hpersistence"></a>
    <a name="h10.3" ></a><a name="persistence" ></a>10.3 Persistencia
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#559" class="lnkocn">559</a></label>
  <p class="i0" id="559">
    Un paradigma de un cd en vivo («live cd» N. del T.) es ser un sistema pre-instalado que funciona desde medios de almacenamiento de sólo lectura, como un CD-ROM, donde los cambios y las modificaciones no se guardan tras reiniciar el sistema en que se ejecuta.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#560" class="lnkocn">560</a></label>
  <p class="i0" id="560">
    Un sistema en vivo es una generalización de este paradigma pero que es compatible con otros medios de almacenamiento, no sólo en CDs. Aún así, en su comportamiento predeterminado, se debe considerar un sistema de sólo lectura y todos los cambios en tiempo de ejecución del sistema se pierden al apagar el equipo.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#561" class="lnkocn">561</a></label>
  <p class="i0" id="561">
    La «persistencia» es un nombre común que se da a los diferentes tipos de soluciones para guardar algunos o todos los cambios realizados durante la ejecución tras reiniciar el sistema. Para entender cómo funciona es útil saber que incluso si el sistema se inicia y se ejecuta desde los medios de almacenamiento de sólo lectura, las modificaciones de los ficheros y directorios se escriben en medios de escritura, por lo general en la memoria ram (tmpfs) y los datos guardados en la ram se pierden al reiniciar.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#562" class="lnkocn">562</a></label>
  <p class="i0" id="562">
    Los datos almacenados en esta memoria ram se pueden guardar en un soporte grabable, como un medio de almacenamiento local, un recurso compartido en red o incluso en una sesión de un CD/DVD regrabable en multisesión. Todos estos medios son compatibles de diferentes maneras y todos, menos el último, requieren un parámetro de arranque especial que se especificará en el momento del arranque: <tt>persistence</tt>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#563" class="lnkocn">563</a></label>
  <p class="i0" id="563">
    Si se usa el parámetro de arranque <tt>persistence</tt> (y no se usa la opción <tt>nopersistence</tt>), se busca en los medios de almacenamiento locales (p.ej. discos duros, llaves USB) volúmenes con persistencia durante el arranque. Es posible restringir qué tipos de volúmenes persistentes se pueden usar especificando ciertos parámetros de arranque descritos en la página del manual de <i>live-boot</i>(7). Un volumen persistente es cualquiera de los siguientes:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#564" class="lnkocn">564</a></label>
  <ul>
  <li class="bullet" id="564">
    una partición, identificada por su nombre GPT.
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#565" class="lnkocn">565</a></label>
  <ul>
  <li class="bullet" id="565">
    Un sistema de ficheros, identificado por su etiqueta de sistema de ficheros.
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#566" class="lnkocn">566</a></label>
  <ul>
  <li class="bullet" id="566">
    una fichero imagen situado en la raíz de cualquier sistema de ficheros que pueda ser leido (incluso una partición NTFS de otro sistema operativo), identificado por su nombre de fichero.
  </li>
  </ul>
</div><div class="substance">
  <label class="ocn"><a href="#567" class="lnkocn">567</a></label>
  <p class="i0" id="567">
    La etiqueta del volumen para las overlays debe ser <tt>persistence</tt> pero será ignorado a menos que contenga en su raíz un fichero llamado <tt>persistence.conf</tt> que se utiliza para personalizar la persistencia del volumen, esto es, especificar los directorios que se desea guardar en un volumen de persistencia después de reiniciar. Ver  <a href="customizing-run-time-behaviours.es.html#persistence-conf">El fichero persistence.conf</a>  para más detalles.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#568" class="lnkocn">568</a></label>
  <p class="i0" id="568">
    He aquí algunos ejemplos de cómo preparar un volumen para ser usado para la persistencia. Puede ser, por ejemplo, una partición en un disco duro o en una llave usb creada con, p.ej.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#569" class="lnkocn">569</a></label>
  <p class="code" id="569">
    # mkfs.ext4 -L persistence /dev/sdb1<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#570" class="lnkocn">570</a></label>
  <p class="i0" id="570">
    Ver  <a href="the-basics.es.html#using-usb-extra-space">Usar el espacio libre en el dispositivo USB</a>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#571" class="lnkocn">571</a></label>
  <p class="i0" id="571">
    Si ya existe una partición en el dispositivo, sólo se tiene que cambiar la etiqueta con uno de los siguientes:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#572" class="lnkocn">572</a></label>
  <p class="code" id="572">
    # tune2fs -L persistence /dev/sdb1 # for ext2,3,4 filesystems<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#573" class="lnkocn">573</a></label>
  <p class="i0" id="573">
    Un ejemplo de cómo crear un fichero imagen basado en ext4 para ser usado para la persistencia:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#574" class="lnkocn">574</a></label>
  <p class="code" id="574">
    $ dd if=/dev/null of=persistence bs=1 count=0 seek=1G # for a 1GB sized image file<br>
$ /sbin/mkfs.ext4 -F persistence<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#575" class="lnkocn">575</a></label>
  <p class="i0" id="575">
    Después de crear el fichero imagen, a modo de ejemplo, para hacer <tt>/usr</tt> persistente pero únicamente guardando los cambios que se realizan en ese directorio en lugar de todos los contenidos de <tt>/usr</tt>, se puede utilizar la opción "union". Si el fichero imagen se encuentra en el directorio home, copiarlo a la raíz del sistema de ficheros del disco duro y montarlo en <tt>/mnt</tt> como se explica a continuación:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#576" class="lnkocn">576</a></label>
  <p class="code" id="576">
    # cp persistence /<br>
# mount -t ext4 /persistence /mnt<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#577" class="lnkocn">577</a></label>
  <p class="i0" id="577">
    Después, crear el fichero <tt>persistence.conf</tt> añadiendo contenido y desmontar el fichero imagen.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#578" class="lnkocn">578</a></label>
  <p class="code" id="578">
    # echo "/usr union" &gt;&gt; /mnt/persistence.conf<br>
# umount /mnt<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#579" class="lnkocn">579</a></label>
  <p class="i0" id="579">
    Ahora, reiniciar y arrancar el medio en vivo con el parámetro de arranque "persistence".
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#580" class="lnkocn">580</a></label>
  <p class="bold" id="580"><a name="580"></a> <a id="hpersistence-conf"></a>
    <a name="h10.3.1" ></a><a name="persistence-conf" ></a>10.3.1 El fichero persistence.conf
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#581" class="lnkocn">581</a></label>
  <p class="i0" id="581">
    Un volumen con la etiqueta <tt>persistence</tt> debe ser configurado a través de un fichero <tt>persistence.conf</tt> para crear directorios arbitrarios persistentes. Ese fichero, situado en el sistema de ficheros raíz del volumen, controla que directorios hace persistentes y también de que manera.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#582" class="lnkocn">582</a></label>
  <p class="i0" id="582">
    En la página de manual de persistence.conf(5) se explica en detalle cómo se configura el montaje de las overlays, pero un sencillo ejemplo es suficiente para la mayoría de los casos. Supongamos que queremos crear nuestro directorio home y APT cache persistentes en un sistema de ficheros ext4 en la partición /dev/sdb1:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#583" class="lnkocn">583</a></label>
  <p class="code" id="583">
    # mkfs.ext4 -L persistence /dev/sdb1<br>
# mount -t ext4 /dev/sdb1 /mnt<br>
# echo "/home" &gt;&gt; /mnt/persistence.conf<br>
# echo "/var/cache/apt" &gt;&gt; /mnt/persistence.conf<br>
# umount /mnt<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#584" class="lnkocn">584</a></label>
  <p class="i0" id="584">
    Entonces reiniciamos. Durante el primer arranque los contenidos de <tt>/home</tt> y <tt>/var/cache/apt</tt> se copiarán en el volumen persistente y a partir de ese momento todos los cambios en esos directorios se guardarán allí. Tener en cuenta que las rutas listadas en el fichero <tt>persistence.conf</tt> no pueden contener espacios en blanco ni los componentes especiales <tt>.</tt> y <tt>..</tt>. Además, ni <tt>/lib</tt>, <tt>/lib/live</tt> (o ninguno de sus sub-directorios) ni <tt>/</tt> pueden hacerse persistentes montándolos de forma personalizada. Una posible alternativa a esta limitación es añadir <tt>/ union</tt> al fichero <tt>persistence.conf</tt> para conseguir una persistencia completa.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#585" class="lnkocn">585</a></label>
  <p class="bold" id="585"><a name="585"></a> <a id="hc10.3.2"></a>
    <a name="c10.3.2" ></a><a name="h10.3.2" ></a>10.3.2 Utilizar varios medios persistentes
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#586" class="lnkocn">586</a></label>
  <p class="i0" id="586">
    Existen diferentes métodos para utilizar múltiples volúmenes de persistencia para diferentes casos de uso. Por ejemplo, utilizar varios volúmenes al mismo tiempo o seleccionar sólo uno, entre varios, para fines muy específicos.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#587" class="lnkocn">587</a></label>
  <p class="i0" id="587">
    Se puede usar diferentes volúmenes de overlays al mismo tiempo (con sus propios ficheros <tt>persistence.conf</tt>) pero si varios volúmenes hacen que un mismo directorio sea persistente, sólo uno de ellos será usado. Si dos unidades montadas están "anidadas" (es decir, una es un sub-directorio de la otra) el directorio superior será montado antes que el inferior de este modo no quedará uno escondido por el otro. La personalización de los montajes anidadados es problemática si están listados en el mismo fichero <tt>persistence.conf</tt>. Consultar la página de manual de persistence.conf(5) para ver como manejar ese caso si realmente es necesario. (aclaración: normalmente no lo es).
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#588" class="lnkocn">588</a></label>
  <p class="i0" id="588">
    Un posible caso de uso: Si se desea guardar los datos del usuario, es decir <tt>/home</tt> y los datos del superusuario, es decir <tt>/root</tt> en particiones diferentes, crear dos particiones con la etiqueta <tt>persistence</tt> y añadir un fichero <tt>persistence.conf</tt> en cada una de este modo, <tt># echo "/home" &gt; persistence.conf</tt> para la primera partición que guardará los ficheros del usuario y <tt># echo "/root" &gt; persistence.conf</tt> para la segunda partición que almacenará los ficheros del superusuario. Finalmente, utilizar el parámetro de arranque <tt>persistence</tt>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#589" class="lnkocn">589</a></label>
  <p class="i0" id="589">
    Si un usuario necesita un almacenamiento persistente múltiple del mismo tipo para diferentes lugares o pruebas, tales como <tt>private</tt> y <tt>work</tt>, el parámetro de arranque <tt>persistence-label</tt> usado junto con el parámetro de arranque <tt>persistence</tt> permitirá medios de almacenamiento persistentes múltiples pero únicos. Un ejemplo sería, si un usuario desea utilizar una partición persistente etiquetada <tt>private</tt> para datos de uso personal como los marcadores de un navegador o similares utilizaría los parámetros de arranque: <tt>persistence</tt> <tt>persistence-label=private</tt>. Y para almacenar datos relacionados con el trabajo, como documentos, proyectos de investigación o de otro tipo, utilizaría los parámetros de arranque: <tt>persistence</tt> <tt>persistence-label=work</tt>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#590" class="lnkocn">590</a></label>
  <p class="i0" id="590">
    Es importante recordar que cada uno de estos volúmenes, <tt>private</tt> y <tt>work</tt>, necesita también un fichero <tt>persistence.conf</tt> en su raíz. La página de manual de <i>live-boot</i> contiene más información acerca de cómo utilizar estas etiquetas con los antiguos nombres que se utilizaban en anteriores versiones.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#591" class="lnkocn">591</a></label>
  <p class="bold" id="591"><a name="591"></a> <a id="hc10.3.3"></a>
    <a name="c10.3.3" ></a><a name="h10.3.3" ></a>10.3.3 Utilizar persistencia con cifrado
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#592" class="lnkocn">592</a></label>
  <p class="i0" id="592">
    Utilizar la persistencia significa que algunos datos sensibles pueden estar expuestos a riesgo. Especialmente si los datos persistentes se almacenan en un dispositivo portable, como una memoria USB o un disco duro externo. Es entonces cuando el cifrado cobra sentido. Incluso aunque todo el procedimiento puede parecer complicado debido a la cantidad de pasos que hay que hacer, es muy fácil manejar particiones cifradas con <i>live-boot</i>. Para utilizar <b>luks</b>, que es el tipo de cifrado soportado, se necesita instalar <i>cryptsetup</i> tanto en la máquina que va a crear la partición cifrada como en el sistema en vivo con que se va a utilizar la partición persistente cifrada.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#593" class="lnkocn">593</a></label>
  <p class="i0" id="593">
    Para instalar <i>cryptsetup</i> en nuestra máquina:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#594" class="lnkocn">594</a></label>
  <p class="code" id="594">
    # apt-get install cryptsetup<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#595" class="lnkocn">595</a></label>
  <p class="i0" id="595">
    Para instalar <i>cryptsetup</i> en nuestro sistema en vivo, lo añadimos a una package-lists:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#596" class="lnkocn">596</a></label>
  <p class="code" id="596">
    $ lb config<br>
$ echo "cryptsetup" &gt; config/package-lists/encryption.list.chroot<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#597" class="lnkocn">597</a></label>
  <p class="i0" id="597">
    Una vez se tiene el sistema en vivo con <i>cryptsetup</i>, básicamente, sólo se necesita crear una nueva partición, cifrarla y arrancar con los parámetros <tt>persistence</tt> y <tt>persistence-encryption=luks</tt>. Podríamos habernos anticipado a este paso y haber añadido esos parámetros de arranque siguiendo el procedimiento habitual:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#598" class="lnkocn">598</a></label>
  <p class="code" id="598">
    $ lb config --bootappend-live "boot=live components persistence persistence-encryption=luks"<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#599" class="lnkocn">599</a></label>
  <p class="i0" id="599">
    Vamos a entrar en detalles para quien que no esté familiarizado con el cifrado. En el siguiente ejemplo vamos a utilizar una partición en un dispositivo usb que corresponde a <tt>/dev/sdc2</tt>. Tener en cuenta que es necesario determinar qué partición es la que se va a utilizar en cada caso específico.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#600" class="lnkocn">600</a></label>
  <p class="i0" id="600">
    El primer paso es conectar la memoria usb y determinar de qué dispositivo se trata. El método recomendado para los dispositivos en <i>live-manual</i> es utilizando <tt>ls -l /dev/disk/by-id</tt>. Después de eso, crear una nueva partición y, a continuación, cifrarla con una frase de contraseña de la siguiente manera:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#601" class="lnkocn">601</a></label>
  <p class="code" id="601">
    # cryptsetup --verify-passphrase luksFormat /dev/sdc2<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#602" class="lnkocn">602</a></label>
  <p class="i0" id="602">
    A continuación, abrir la partición luks en el mapeador de dispositivos virtuales. Se puede utilizar cualquier nombre que se desee. Aquí utilizamos <b>live</b> como ejemplo:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#603" class="lnkocn">603</a></label>
  <p class="code" id="603">
    # cryptsetup luksOpen /dev/sdc2 live<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#604" class="lnkocn">604</a></label>
  <p class="i0" id="604">
    El siguiente paso es llenar el dispositivo con ceros antes de crear el sistema de ficheros:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#605" class="lnkocn">605</a></label>
  <p class="code" id="605">
    # dd if=/dev/zero of=/dev/mapper/live<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#606" class="lnkocn">606</a></label>
  <p class="i0" id="606">
    Ahora, estamos listos para crear el sistema de ficheros. Nótese que estamos añadiendo la etiqueta <tt>persistence</tt> para que el dispositivo se monte como almacén de persistencia durante el arranque.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#607" class="lnkocn">607</a></label>
  <p class="code" id="607">
    # mkfs.ext4 -L persistence /dev/mapper/live<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#608" class="lnkocn">608</a></label>
  <p class="i0" id="608">
    Para continuar con nuestra configuración, necesitamos montar el dispositivo, por ejemplo, en <tt>/mnt</tt>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#609" class="lnkocn">609</a></label>
  <p class="code" id="609">
    # mount /dev/mapper/live /mnt<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#610" class="lnkocn">610</a></label>
  <p class="i0" id="610">
    Y crear el fichero <tt>persistence.conf</tt> en la raíz de la partición. Esto es, como se ha explicado antes, estrictamente necesario. Ver  <a href="customizing-run-time-behaviours.es.html#persistence-conf">El fichero persistence.conf</a>.
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#611" class="lnkocn">611</a></label>
  <p class="code" id="611">
    # echo "/ union" &gt; /mnt/persistence.conf<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#612" class="lnkocn">612</a></label>
  <p class="i0" id="612">
    Entonces, desmontar el punto de montaje:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#613" class="lnkocn">613</a></label>
  <p class="code" id="613">
    # umount /mnt<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#614" class="lnkocn">614</a></label>
  <p class="i0" id="614">
    Y opcionalmente, aunque puede ser una buena manera de salvaguardar los datos que acabamos de agregar a la partición, podemos cerrar el dispositivo:
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#615" class="lnkocn">615</a></label>
  <p class="code" id="615">
    # cryptsetup luksClose live<br>
  </p>
</div><div class="substance">
  <label class="ocn"><a href="#616" class="lnkocn">616</a></label>
  <p class="i0" id="616">
    Vamos a resumir el proceso. Hasta ahora, hemos creado un sistema vivo capaz de utilizar el cifrado, que se puede copiar en una memoria usb como se explica en  <a href="the-basics.es.html#copying-iso-hybrid-to-usb">Copiar una imagen ISO híbrida en un dispositivo USB</a>.  También hemos creado una partición cifrada, que se puede crear en la misma memoria usb para llevarla a todas partes y hemos configurado la partición cifrada para ser utilizada como almacén de persistencia. Así que ahora, sólo tenemos que arrancar el sistema en vivo. En el momento del arranque, <i>live-boot</i> nos preguntará la frase de contraseña y montará la partición cifrada para ser utilizada para la persistencia.
  </p>
</div></div><br><div class="main_column">
  <table summary="segment navigation band" bgcolor="#ffffff" width="100%"><tr>
  <td width="70%" align="center">
    
<table summary="segment navigation available documents types: toc,doc,pdf,concordance" border="0" cellpadding="3" cellspacing="0">
<tr>
<td align="center" bgcolor="#ffffff">
  
  
</tr></table>
  </td>
  <td width="5%" align="right">
    <table summary="segment navigation pre/next" border="0" cellpadding="3" cellspacing="0">
<tr>
<td align="center" bgcolor="#ffffff">
  <a href="customizing-contents.es.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_prev_red.png" alt="&lt;&lt;&nbsp;previous" />
  </a>
</td>
<td align="center" bgcolor="#ffffff">
  <a href="toc.es.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_up_red.png" alt="toc" />
  </a>
</td>
<td align="center" bgcolor="#ffffff">
  <a href="customizing-binary.es.html" target="_top">
    <img border="0" width="22" height="22" src="../../_sisu/image_sys/arrow_next_red.png" alt="next&nbsp;&gt;&gt;" />
  </a>
</td>
<td>
</td></tr>
</table>
  </td></tr>
  </table>
  
</div><div class="main_column">

<a name="bottom" id="bottom"></a>
<a name="end" id="end"></a>
</div></div></body>
</html>