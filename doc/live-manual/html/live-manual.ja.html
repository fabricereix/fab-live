<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>
    Live システムマニュアル
  </title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="dc.title" content="Live システムマニュアル" />
  <meta name="dc.author" content="Live システムプロジェクト &#60;debian-live@lists.debian.org&#62;" />
  <meta name="dc.publisher" content="Live システムプロジェクト &#60;debian-live@lists.debian.org&#62;" />
  <meta name="dc.date" content="2015-09-22"  />
  <meta name="dc.rights" content="Copyright: Copyright (C) 2006-2015 Live Systems Project \\ License: This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. \\  \\ This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details. \\  \\ You should have received a copy of the GNU General Public License along with this program. If not, see http://www.gnu.org/licenses/. \\  \\ The complete text of the GNU General Public License can be found in /usr/share/common-licenses/GPL-3 file." />

  <meta name="generator" content="SiSU 7.1.8 of 2016w08/5 (2016-02-26) (n*x and Ruby!)" />
    <link rel="generator" href="http://www.sisudoc.org/" />
  <link rel="shortcut icon" href="../_sisu/image/rb7.ico" />

  <link href="../_sisu/css/html.css" rel="stylesheet">  <link href="../../_sisu/css/html.css" rel="stylesheet">
</head>
<body lang="ja">
<a name="top" id="top"></a>

<table summary="table of contents scroll navigation band" id="toc" width="100%" bgcolor="#ffffff">
<tr><td width="20%">
   <table summary="home button / home information" border="0" cellpadding="3" cellspacing="0">
 <tr><td align="left" bgcolor="#ffffff">
  <p class="tiny_left"><a href="http://debian-live.alioth.debian.org/manual" target="_top">
    Live manual
  </a></p>
  <p class="tiny_left"><a href="http://debian-live.alioth.debian.org" target="_top">
    Live Systems
  </a></p>
 </td></tr>
 </table>
</td>
<td width="75%" align="center">
  
<table summary="segment navigation available documents types: toc,doc,pdf,concordance" border="0" cellpadding="3" cellspacing="0">
<tr>
<td align="center" bgcolor="#ffffff">
  
  
</tr></table>
</td>
<td width="20%">
  &nbsp;
</td></tr>
</table>
<p>

<table summary="scroll instrument cover band" width="100%" border="0" cellpadding="8" align="center">
<tr><td align="center">

<p class="centerbold">Live システムマニュアル
</p>

<p class="centerbold">Live システムプロジェクト &lt;debian-live@lists.debian.org&gt;
</p>

</td></tr>
</table>

<p class="small_left">Rights: Copyright: Copyright (C) 2006-2015 Live Systems Project <br> License: This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. <br>  <br> This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details. <br>  <br> You should have received a copy of the GNU General Public License along with this program. If not, see http://www.gnu.org/licenses/. <br>  <br> The complete text of the GNU General Public License can be found in /usr/share/common-licenses/GPL-3 file.</p>
<p>

<br>

<h1 class="toc">
    <b><a href="#1">Live システムマニュアル</a></b>
  </h1>

<br>

<h1 class="toc">
    <b><a href="#2">About</a></b>
  </h1>

<br>

<h1 class="toc">
    <b><a href="#3">このマニュアルについて</a></b>
  </h1>

<h4 class="toc">
    <a href="#4">1. このマニュアルについて</a>
  </h4>

<h5 class="toc">
    <a href="#8">1.1 せっかちな人向け</a>
  </h5>

<h5 class="toc">
    <a href="#12">1.2 用語</a>
  </h5>

<h5 class="toc">
    <a href="#29">1.3 著者</a>
  </h5>

<h5 class="toc">
    <a href="#44">1.4 この文書への貢献</a>
  </h5>

<h6 class="toc">
    <a href="#46">1.4.1 変更の適用</a>
  </h6>

<h6 class="toc">
    <a href="#60">1.4.2 翻訳</a>
  </h6>

<br>

<h1 class="toc">
    <b><a href="#73">Live システムプロジェクトへの貢献</a></b>
  </h1>

<h4 class="toc">
    <a href="#74">2. Live システムプロジェクトについて</a>
  </h4>

<h5 class="toc">
    <a href="#75">2.1 動機</a>
  </h5>

<h6 class="toc">
    <a href="#76">2.1.1 現在の Live システムの問題点</a>
  </h6>

<h6 class="toc">
    <a href="#86">2.1.2 自身の Live システムを作成する理由</a>
  </h6>

<h5 class="toc">
    <a href="#94">2.2 哲学</a>
  </h5>

<h6 class="toc">
    <a href="#95">2.2.1 Debian「main」の変更しないパッケージしか使いません</a>
  </h6>

<h6 class="toc">
    <a href="#99">2.2.2 Live システム固有のパッケージ設定はありません</a>
  </h6>

<h5 class="toc">
    <a href="#103">2.3 連絡先</a>
  </h5>

<br>

<h1 class="toc">
    <b><a href="#107">ユーザ</a></b>
  </h1>

<br>

<h1 class="toc">
    <b><a href="#108">インストール</a></b>
  </h1>

<h4 class="toc">
    <a href="#109">3. インストール</a>
  </h4>

<h5 class="toc">
    <a href="#110">3.1 要件</a>
  </h5>

<h5 class="toc">
    <a href="#118">3.2 live-build のインストール</a>
  </h5>

<h6 class="toc">
    <a href="#124">3.2.1 Debian リポジトリから</a>
  </h6>

<h6 class="toc">
    <a href="#127">3.2.2 ソースから</a>
  </h6>

<h6 class="toc">
    <a href="#138">3.2.3 「スナップショット」から</a>
  </h6>

<h5 class="toc">
    <a href="#140">3.3 live-boot と live-config のインストール</a>
  </h5>

<h6 class="toc">
    <a href="#142">3.3.1 Debian リポジトリから</a>
  </h6>

<h6 class="toc">
    <a href="#144">3.3.2 ソースから</a>
  </h6>

<h6 class="toc">
    <a href="#156">3.3.3 「スナップショット」から</a>
  </h6>

<br>

<h1 class="toc">
    <b><a href="#158">基本</a></b>
  </h1>

<h4 class="toc">
    <a href="#159">4. 基本</a>
  </h4>

<h5 class="toc">
    <a href="#163">4.1 Live システムとは何?</a>
  </h5>

<h5 class="toc">
    <a href="#171">4.2 ビルド済みイメージのダウンロード</a>
  </h5>

<h5 class="toc">
    <a href="#173">4.3 ウェブ Live イメージビルダーの利用</a>
  </h5>

<h6 class="toc">
    <a href="#175">4.3.1 ウェブビルダーの使い方と注意</a>
  </h6>

<h5 class="toc">
    <a href="#179">4.4 最初の段階: ISO hybrid イメージのビルド</a>
  </h5>

<h5 class="toc">
    <a href="#190">4.5 ISO hybrid Live イメージの利用</a>
  </h5>

<h6 class="toc">
    <a href="#192">4.5.1 ISOイメージの実際のメディアへの書き込み</a>
  </h6>

<h6 class="toc">
    <a href="#195">4.5.2 ISO hybrid イメージのUSBメモリへのコピー</a>
  </h6>

<h6 class="toc">
    <a href="#200">4.5.3 USBメモリの空きスペースの利用</a>
  </h6>

<h6 class="toc">
    <a href="#207">4.5.4 Live メディアのブート</a>
  </h6>

<h5 class="toc">
    <a href="#211">4.6 仮想マシンを利用したテスト</a>
  </h5>

<h6 class="toc">
    <a href="#218">4.6.1 QEMU でのISOイメージのテスト</a>
  </h6>

<h6 class="toc">
    <a href="#225">4.6.2 VirtualBox でのISOイメージのテスト</a>
  </h6>

<h5 class="toc">
    <a href="#233">4.7 HDDイメージのビルド及び利用</a>
  </h5>

<h5 class="toc">
    <a href="#245">4.8 netboot イメージのビルド</a>
  </h5>

<h6 class="toc">
    <a href="#258">4.8.1 DHCP サーバ</a>
  </h6>

<h6 class="toc">
    <a href="#262">4.8.2 TFTP サーバ</a>
  </h6>

<h6 class="toc">
    <a href="#267">4.8.3 NFSサーバ</a>
  </h6>

<h6 class="toc">
    <a href="#275">4.8.4 ネットワーク経由のブートをテストする方法</a>
  </h6>

<h6 class="toc">
    <a href="#278">4.8.5 Qemu</a>
  </h6>

<h5 class="toc">
    <a href="#284">4.9 ウェブブート</a>
  </h5>

<h6 class="toc">
    <a href="#286">4.9.1 ウェブブートファイルの取得</a>
  </h6>

<h6 class="toc">
    <a href="#292">4.9.2 ウェブブートイメージの起動</a>
  </h6>

<br>

<h1 class="toc">
    <b><a href="#297">ツールの概要</a></b>
  </h1>

<h4 class="toc">
    <a href="#298">5. ツールの概要</a>
  </h4>

<h5 class="toc">
    <a href="#300">5.1 live-build パッケージ</a>
  </h5>

<h6 class="toc">
    <a href="#310">5.1.1 <tt>lb config</tt> コマンド</a>
  </h6>

<h6 class="toc">
    <a href="#320">5.1.2 <tt>lb build</tt> コマンド</a>
  </h6>

<h6 class="toc">
    <a href="#322">5.1.3 <tt>lb clean</tt> コマンド</a>
  </h6>

<h5 class="toc">
    <a href="#324">5.2 live-boot パッケージ</a>
  </h5>

<h5 class="toc">
    <a href="#328">5.3 live-config パッケージ</a>
  </h5>

<br>

<h1 class="toc">
    <b><a href="#330">設定の管理</a></b>
  </h1>

<h4 class="toc">
    <a href="#331">6. 設定の管理</a>
  </h4>

<h5 class="toc">
    <a href="#333">6.1 設定変更への対応</a>
  </h5>

<h6 class="toc">
    <a href="#335">6.1.1 自動化スクリプトを使う理由は? それは何をするもの?</a>
  </h6>

<h6 class="toc">
    <a href="#338">6.1.2 自動化スクリプトの使用例</a>
  </h6>

<h5 class="toc">
    <a href="#345">6.2 Git経由で公開されている設定の複製</a>
  </h5>

<br>

<h1 class="toc">
    <b><a href="#356">収録内容の独自化</a></b>
  </h1>

<h4 class="toc">
    <a href="#357">7. 独自化の概要</a>
  </h4>

<h5 class="toc">
    <a href="#359">7.1 ビルド時とブート時の設定</a>
  </h5>

<h5 class="toc">
    <a href="#362">7.2 ビルド段階</a>
  </h5>

<h5 class="toc">
    <a href="#365">7.3 ファイルによる lb config の補完</a>
  </h5>

<h5 class="toc">
    <a href="#367">7.4 独自化タスク</a>
  </h5>

<br>

<h1 class="toc">
    <b><a href="#369">インストールするパッケージの独自化</a></b>
  </h1>

<h4 class="toc">
    <a href="#370">8. インストールするパッケージの独自化</a>
  </h4>

<h5 class="toc">
    <a href="#372">8.1 パッケージソース</a>
  </h5>

<h6 class="toc">
    <a href="#373">8.1.1 ディストリビューション、アーカイブ領域とモード</a>
  </h6>

<h6 class="toc">
    <a href="#380">8.1.2 ディストリビューションミラー</a>
  </h6>

<h6 class="toc">
    <a href="#382">8.1.3 ビルド時に利用するディストリビューションミラー</a>
  </h6>

<h6 class="toc">
    <a href="#386">8.1.4 実行時に利用するディストリビューションミラー</a>
  </h6>

<h6 class="toc">
    <a href="#389">8.1.5 追加リポジトリ</a>
  </h6>

<h5 class="toc">
    <a href="#397">8.2 インストールするパッケージの選択</a>
  </h5>

<h6 class="toc">
    <a href="#399">8.2.1 パッケージ一覧</a>
  </h6>

<h6 class="toc">
    <a href="#402">8.2.2 メタパッケージの利用</a>
  </h6>

<h6 class="toc">
    <a href="#410">8.2.3 ローカルパッケージ一覧</a>
  </h6>

<h6 class="toc">
    <a href="#414">8.2.4 ローカルバイナリパッケージ一覧</a>
  </h6>

<h6 class="toc">
    <a href="#416">8.2.5 生成されたパッケージ一覧</a>
  </h6>

<h6 class="toc">
    <a href="#420">8.2.6 条件付き内部パッケージ一覧の利用</a>
  </h6>

<h6 class="toc">
    <a href="#429">8.2.7 インストール時のパッケージの削除</a>
  </h6>

<h6 class="toc">
    <a href="#431">8.2.8 デスクトップ及び言語タスク</a>
  </h6>

<h6 class="toc">
    <a href="#436">8.2.9 カーネルのフレーバー (種類) とバージョン</a>
  </h6>

<h6 class="toc">
    <a href="#441">8.2.10 独自のカーネル</a>
  </h6>

<h5 class="toc">
    <a href="#449">8.3 変更したあるいはサードパーティ製パッケージのインストール</a>
  </h5>

<h6 class="toc">
    <a href="#456">8.3.1 <tt>packages.chroot</tt> を利用した独自のパッケージのインストール</a>
  </h6>

<h6 class="toc">
    <a href="#463">8.3.2 APTリポジトリを利用した独自パッケージのインストール</a>
  </h6>

<h6 class="toc">
    <a href="#466">8.3.3 独自パッケージとAPT</a>
  </h6>

<h5 class="toc">
    <a href="#469">8.4 ビルド時のAPT設定</a>
  </h5>

<h6 class="toc">
    <a href="#471">8.4.1 apt と aptitude の選択</a>
  </h6>

<h6 class="toc">
    <a href="#475">8.4.2 APTでのプロキシの利用</a>
  </h6>

<h6 class="toc">
    <a href="#478">8.4.3 APTの調整による容量節約</a>
  </h6>

<h6 class="toc">
    <a href="#487">8.4.4 apt や aptitude へのオプションの受け渡し</a>
  </h6>

<h6 class="toc">
    <a href="#492">8.4.5 APTのピン止め</a>
  </h6>

<br>

<h1 class="toc">
    <b><a href="#498">収録内容の独自化</a></b>
  </h1>

<h4 class="toc">
    <a href="#499">9. 収録内容の独自化</a>
  </h4>

<h5 class="toc">
    <a href="#501">9.1 Includes</a>
  </h5>

<h6 class="toc">
    <a href="#506">9.1.1 Live/chroot ローカルインクルード</a>
  </h6>

<h6 class="toc">
    <a href="#513">9.1.2 バイナリローカルインクルード</a>
  </h6>

<h5 class="toc">
    <a href="#517">9.2 フック</a>
  </h5>

<h6 class="toc">
    <a href="#520">9.2.1 chroot ローカルフック</a>
  </h6>

<h6 class="toc">
    <a href="#522">9.2.2 バイナリローカルフック</a>
  </h6>

<h6 class="toc">
    <a href="#524">9.2.3 ブート時フック</a>
  </h6>

<h5 class="toc">
    <a href="#526">9.3 Debconf 質問の preseed</a>
  </h5>

<br>

<h1 class="toc">
    <b><a href="#529">実行時の挙動の独自化</a></b>
  </h1>

<h4 class="toc">
    <a href="#530">10. 実行時の挙動の独自化</a>
  </h4>

<h5 class="toc">
    <a href="#532">10.1 live ユーザの独自化</a>
  </h5>

<h5 class="toc">
    <a href="#541">10.2 ロケールと言語の独自化</a>
  </h5>

<h5 class="toc">
    <a href="#558">10.3 保持機能</a>
  </h5>

<h6 class="toc">
    <a href="#580">10.3.1 persistence.conf ファイル</a>
  </h6>

<h6 class="toc">
    <a href="#585">10.3.2 保持先を複数使いたい場合</a>
  </h6>

<h6 class="toc">
    <a href="#591">10.3.3 暗号化した保持先の利用</a>
  </h6>

<br>

<h1 class="toc">
    <b><a href="#617">バイナリイメージの独自化</a></b>
  </h1>

<h4 class="toc">
    <a href="#618">11. バイナリイメージの独自化</a>
  </h4>

<h5 class="toc">
    <a href="#619">11.1 ブートローダ</a>
  </h5>

<h5 class="toc">
    <a href="#626">11.2 ISO メタ情報</a>
  </h5>

<br>

<h1 class="toc">
    <b><a href="#632">Debian インストーラの独自化</a></b>
  </h1>

<h4 class="toc">
    <a href="#633">12. Debian インストーラの独自化</a>
  </h4>

<h5 class="toc">
    <a href="#636">12.1 Debian インストーラの種類</a>
  </h5>

<h5 class="toc">
    <a href="#648">12.2 preseed による Debian インストーラの独自化</a>
  </h5>

<h5 class="toc">
    <a href="#651">12.3 Debian インストーラの収録内容の独自化</a>
  </h5>

<br>

<h1 class="toc">
    <b><a href="#653">プロジェクト</a></b>
  </h1>

<br>

<h1 class="toc">
    <b><a href="#654">プロジェクトへの貢献</a></b>
  </h1>

<h4 class="toc">
    <a href="#655">13. プロジェクトへの貢献</a>
  </h4>

<h5 class="toc">
    <a href="#667">13.1 変更を加える</a>
  </h5>

<h5 class="toc">
    <a href="#682">13.2 man ページの翻訳</a>
  </h5>

<br>

<h1 class="toc">
    <b><a href="#691">バグの報告</a></b>
  </h1>

<h4 class="toc">
    <a href="#692">14. バグの報告</a>
  </h4>

<h5 class="toc">
    <a href="#698">14.1 既知の問題</a>
  </h5>

<h5 class="toc">
    <a href="#703">14.2 最初から再ビルド</a>
  </h5>

<h5 class="toc">
    <a href="#705">14.3 最新のパッケージを使う</a>
  </h5>

<h5 class="toc">
    <a href="#707">14.4 情報収集</a>
  </h5>

<h5 class="toc">
    <a href="#724">14.5 可能であれば失敗している状況を分離する</a>
  </h5>

<h5 class="toc">
    <a href="#726">14.6 正しいパッケージに対してバグを報告する</a>
  </h5>

<h6 class="toc">
    <a href="#729">14.6.1 ビルド時のパッケージ収集中</a>
  </h6>

<h6 class="toc">
    <a href="#732">14.6.2 ビルド時のパッケージインストール中</a>
  </h6>

<h6 class="toc">
    <a href="#736">14.6.3 ブート時</a>
  </h6>

<h6 class="toc">
    <a href="#738">14.6.4 実行時</a>
  </h6>

<h5 class="toc">
    <a href="#740">14.7 調査してください</a>
  </h5>

<h5 class="toc">
    <a href="#744">14.8 バグの報告先</a>
  </h5>

<br>

<h1 class="toc">
    <b><a href="#748">コーディングスタイル</a></b>
  </h1>

<h4 class="toc">
    <a href="#749">15. コーディングスタイル</a>
  </h4>

<h5 class="toc">
    <a href="#751">15.1 互換性</a>
  </h5>

<h5 class="toc">
    <a href="#756">15.2 インデント</a>
  </h5>

<h5 class="toc">
    <a href="#758">15.3 改行</a>
  </h5>

<h5 class="toc">
    <a href="#770">15.4 変数</a>
  </h5>

<h5 class="toc">
    <a href="#789">15.5 その他</a>
  </h5>

<br>

<h1 class="toc">
    <b><a href="#794">手順</a></b>
  </h1>

<h4 class="toc">
    <a href="#795">16. 手順</a>
  </h4>

<h5 class="toc">
    <a href="#797">16.1 主要リリース</a>
  </h5>

<h5 class="toc">
    <a href="#803">16.2 ポイントリリース</a>
  </h5>

<h6 class="toc">
    <a href="#807">16.2.1 ある Debian リリースの最後のポイントリリース</a>
  </h6>

<h6 class="toc">
    <a href="#809">16.2.2 ポイントリリース告知用テンプレート</a>
  </h6>

<br>

<h1 class="toc">
    <b><a href="#814">Gitリポジトリ</a></b>
  </h1>

<h4 class="toc">
    <a href="#815">17. Gitリポジトリ</a>
  </h4>

<h5 class="toc">
    <a href="#827">17.1 リポジトリを複数処理</a>
  </h5>

<br>

<h1 class="toc">
    <b><a href="#831">例</a></b>
  </h1>

<br>

<h1 class="toc">
    <b><a href="#832">例</a></b>
  </h1>

<h4 class="toc">
    <a href="#833">18. 例</a>
  </h4>

<h5 class="toc">
    <a href="#835">18.1 例の使用</a>
  </h5>

<h5 class="toc">
    <a href="#839">18.2 チュートリアル 1: デフォルトイメージ</a>
  </h5>

<h5 class="toc">
    <a href="#848">18.3 チュートリアル 2: ウェブブラウザユーティリティ</a>
  </h5>

<h5 class="toc">
    <a href="#856">18.4 チュートリアル 3: 私的イメージ</a>
  </h5>

<h6 class="toc">
    <a href="#859">18.4.1 最初の改訂</a>
  </h6>

<h6 class="toc">
    <a href="#873">18.4.2 2回目の改訂</a>
  </h6>

<h5 class="toc">
    <a href="#885">18.5 VNC 公衆クライアント</a>
  </h5>

<h5 class="toc">
    <a href="#899">18.6 128MB USB メモリ向けの基本イメージ</a>
  </h5>

<h5 class="toc">
    <a href="#910">18.7 地域化した GNOME デスクトップとインストーラ</a>
  </h5>

<br>

<h1 class="toc">
    <b><a href="#922">付録</a></b>
  </h1>

<br>

<h1 class="toc">
    <b><a href="#923">スタイルガイド</a></b>
  </h1>

<h4 class="toc">
    <a href="#924">19. スタイルガイド</a>
  </h4>

<h5 class="toc">
    <a href="#925">19.1 著者向けガイドライン</a>
  </h5>

<h6 class="toc">
    <a href="#928">19.1.1 言語特性</a>
  </h6>

<h6 class="toc">
    <a href="#961">19.1.2 手順</a>
  </h6>

<h5 class="toc">
    <a href="#1000">19.2 翻訳者向けガイドライン</a>
  </h5>

<h6 class="toc">
    <a href="#1004">19.2.1 翻訳の手がかり</a>
  </h6>

<br>

<div class="scroll">

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#1" class="lnkocn">1</a></label>
  <h1 class="norm" id="1"><a name="1"></a>
    Live システムマニュアル
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#2" class="lnkocn">2</a></label>
  <h1 class="norm" id="2"><a name="2"></a>
    About
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#3" class="lnkocn">3</a></label>
  <h1 class="norm" id="3"><a name="3"></a>
    このマニュアルについて
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#4" class="lnkocn">4</a></label>
  <h4 class="norm" id="4"><a name="4"></a>
    <a name="h1" ></a><a name="" ></a><a name="about-manual" ></a>1. このマニュアルについて
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a href="#5" class="lnkocn">5</a></label>
  <p class="i0" id="5">
    このマニュアルは Live システムプロジェクトと、特に Debian 9.0「<b>stretch</b>」リリースに向けてプロジェクトにより作られるソフトウェアに関連するあらゆる文書にアクセスするための一元的な起点となります。最新版は常に ‹<a href="http://debian-live.alioth.debian.org/" target="_top">http://debian-live.alioth.debian.org/</a>› にあります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#6" class="lnkocn">6</a></label>
  <p class="i0" id="6">
    Live マニュアルは第一に Live システムのビルドの支援を扱い、エンドユーザ向けの話題は扱いませんが、エンドユーザにとって有用な情報がいくらかあるかもしれません:  <a href="#the-basics">基本</a>  ではビルド済みイメージのダウンロードや、ウェブビルダーを使うかシステム上の <i>live-build</i> を直接実行することでメディアやネットワークからイメージをブートさせる準備について触れています。 <a href="#customizing-run-time-behaviours">実行時の挙動の変更</a>  では、キーボードレイアウトやロケールの選択、再起動をまたいで状態を引き継がせる仕組みの利用等、ブートプロンプトで指定できるオプションをいくらか説明しています。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#7" class="lnkocn">7</a></label>
  <p class="i0" id="7">
    提示されているコマンドの一部にはスーパーユーザ権限で実行しなければならないものもあります。これは <tt>su</tt> で root ユーザになるか、<tt>sudo</tt> を使って実行します。権限のないユーザで実行できるコマンドと実行にスーパーユーザ権限を必要とするコマンドは、それぞれのコマンドの前に <tt>$</tt> があるか <tt>#</tt> があるかで区別します。この記号はコマンドの一部ではありません。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#8" class="lnkocn">8</a></label>
  <h5 class="norm" id="8"><a name="8"></a>
    <a name="c1.1" ></a><a name="h1.1" ></a>1.1 せっかちな人向け
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#9" class="lnkocn">9</a></label>
  <p class="i0" id="9">
    このマニュアルにある全てが、少なくとも一部のユーザにとって重要だと確信していますが、触れている内容が多岐にわたることや、詳細を掘り下げるよりも先に、まずはソフトウェアをうまく使う経験をしたいであろうということをわかっています。したがって、以下の順に読み進めることを提案します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#10" class="lnkocn">10</a></label>
  <p class="i0" id="10">
    最初にこの章 <a href="#about-manual">このマニュアルについて</a>  を始めから <a href="#terms">用語</a>  節まで読んでください。次に <a href="#examples">例</a>  節の最初にある3つのチュートリアルまで飛ばします。ここではイメージのビルドと独自化の基本について教えるようになっています。 <a href="#using-the-examples">例の使用</a>  を最初に読み、引き続いて  <a href="#tutorial-1">チュートリアル 1: デフォルトイメージ</a>  と  <a href="#tutorial-2">チュートリアル 2: ウェブブラウザユーティリティ</a>  を、最後に  <a href="#tutorial-3">チュートリアル 3: 私的イメージ</a>  を読んでください。チュートリアル群を終えるまでに、Live システムでできることが何なのかわかってくるでしょう。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#11" class="lnkocn">11</a></label>
  <p class="i0" id="11">
    それから戻り、マニュアルをもっと掘り下げて学習していくことを勧めています。恐らく、その次は <a href="#the-basics">基本</a>  を読み、 <a href="#building-netboot-image">netboot イメージのビルド</a>  に軽く目を通して、 <a href="#customization-overview">独自化概要</a>  とそれに続く章を読んで終えるのがいいでしょう。この時点までに、Live システムでできることを知ることがすっかり面白くなってマニュアルの残りを隅から隅まで読む気になっていることを期待します。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#12" class="lnkocn">12</a></label>
  <h5 class="norm" id="12"><a name="12"></a>
    <a name="h1.2" ></a><a name="terms" ></a>1.2 用語
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#13" class="lnkocn">13</a></label>
  <ul>
  <li class="bullet" id="13">
    <b>Live システム</b>: ハードドライブにインストールしなくてもブートできるオペレーティングシステムです。Live システムはそのコンピュータのハードドライブに既にインストールされているローカルのオペレーティングシステムやファイルを、そうするように指示しない限り改変しません。Live システムは通常、CDやDVD、USBメモリ等のメディアからブートされます。ネットワーク越しにブートできるもの (netboot イメージ経由、 <a href="#building-netboot-image">netboot イメージのビルド</a>  参照) やインターネット越しにブートできるもの (起動パラメータ <tt>fetch=URL</tt> 経由、 <a href="#webbooting">Webbooting</a>  参照) もあります。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#14" class="lnkocn">14</a></label>
  <ul>
  <li class="bullet" id="14">
    <b>Live メディア</b>: Live システムとは異なり、Live メディアは <i>live-build</i> により作成されたバイナリを書き込んでその Live システムをブートするのに利用するCDやDVD、USBメモリを指します。もっと広い意味では、この語はネットワークブートファイルの位置等、Live システムをブートする目的でこのバイナリが置かれている任意の場所を指すこともあります。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#15" class="lnkocn">15</a></label>
  <ul>
  <li class="bullet" id="15">
    <b>Live システムプロジェクト</b>: <i>live-boot</i>、<i>live-build</i>、<i>live-config</i>、<i>live-tools</i>、<i>live-manual</i> パッケージを特に保守しているプロジェクトです。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#16" class="lnkocn">16</a></label>
  <ul>
  <li class="bullet" id="16">
    <b>ホストシステム</b>: Live システムの作成に利用される環境です。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#17" class="lnkocn">17</a></label>
  <ul>
  <li class="bullet" id="17">
    <b>ターゲットシステム</b>: Live システムの実行に利用される環境です。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#18" class="lnkocn">18</a></label>
  <ul>
  <li class="bullet" id="18">
    <b><i>live-boot</i></b>: Live システムのブートに利用するスクリプト集です。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#19" class="lnkocn">19</a></label>
  <ul>
  <li class="bullet" id="19">
    <b><i>live-build</i></b>: 独自化した Live システムのビルドに利用するスクリプト集です。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#20" class="lnkocn">20</a></label>
  <ul>
  <li class="bullet" id="20">
    <b><i>live-config</i></b>: Live システムのブート処理中の設定に利用するスクリプト集です。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#21" class="lnkocn">21</a></label>
  <ul>
  <li class="bullet" id="21">
    <b><i>live-tools</i></b>: 実行中の Live システム内で有用なタスクを実行するのに利用する追加のスクリプト集です。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#22" class="lnkocn">22</a></label>
  <ul>
  <li class="bullet" id="22">
    <b><i>live-manual</i></b>: この文書は <i>live-manual</i> というパッケージで保守されています。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#23" class="lnkocn">23</a></label>
  <ul>
  <li class="bullet" id="23">
    <b>Debian Installer (d-i)</b>: 公式の Debian ディストリビューション用インストールシステムです。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#24" class="lnkocn">24</a></label>
  <ul>
  <li class="bullet" id="24">
    <b>ブートパラメータ</b>: bootloader プロンプトで入力し、カーネルや <i>live-config</i> の動作を変更できるパラメータです。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#25" class="lnkocn">25</a></label>
  <ul>
  <li class="bullet" id="25">
    <b>chroot</b>: <i>chroot</i> プログラム。<tt>chroot(8)</tt> により、単一のシステム上で異なる GNU/Linux 環境を再起動せずに並行して実行できるようになります。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#26" class="lnkocn">26</a></label>
  <ul>
  <li class="bullet" id="26">
    <b>バイナリイメージ</b>: live-image-i386.hybrid.iso や live-image-i386.img 等、Live システムを収録するファイルです。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#27" class="lnkocn">27</a></label>
  <ul>
  <li class="bullet" id="27">
    <b>ターゲットディストリビューション</b>: Live システムがベースとするディストリビューションです。これはホストシステムのディストリビューションとは別のものです。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#28" class="lnkocn">28</a></label>
  <ul>
  <li class="bullet" id="28">
    <b>安定版 (stable)/テスト版 (testing)/不安定版 (unstable)</b>: <b>安定版 (stable)</b> ディストリビューション、現在のコード名stretchには、公式にリリースされた最新の Debian ディストリビューションが含まれます。<b>テスト版 (testing)</b> ディストリビューション、一時的コード名 <b>buster</b> は次期*{安定版 (stable)}* リリースを集める場です。このディストリビューションを使う主な利点はソフトウェアのバージョンが*{安定版 (stable)}* リリースと比べて新しいということです。<b>unstable</b> ディストリビューション、恒久的コード名 <b>sid</b> は Debian の開発が活発に行われる場です。通常、このディストリビューションは開発者や、苦労をいとわず最新版を使いたい人が利用します。マニュアル全体を通して、リリースを指すのに <b>buster</b> や <b>sid</b> 等のコード名を使っています。それこそが、ツール自体がサポートしているものだからです。
  </li>
  </ul>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#29" class="lnkocn">29</a></label>
  <h5 class="norm" id="29"><a name="29"></a>
    <a name="c1.3" ></a><a name="h1.3" ></a>1.3 著者
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#30" class="lnkocn">30</a></label>
  <p class="i0" id="30">
    著者一覧 (アルファベット順):
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#31" class="lnkocn">31</a></label>
  <ul>
  <li class="bullet" id="31">
    Ben Armstrong
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#32" class="lnkocn">32</a></label>
  <ul>
  <li class="bullet" id="32">
    Brendan Sleight
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#33" class="lnkocn">33</a></label>
  <ul>
  <li class="bullet" id="33">
    Carlos Zuferri
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#34" class="lnkocn">34</a></label>
  <ul>
  <li class="bullet" id="34">
    Chris Lamb
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#35" class="lnkocn">35</a></label>
  <ul>
  <li class="bullet" id="35">
    Daniel Baumann
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#36" class="lnkocn">36</a></label>
  <ul>
  <li class="bullet" id="36">
    Franklin Piat
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#37" class="lnkocn">37</a></label>
  <ul>
  <li class="bullet" id="37">
    Jonas Stein
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#38" class="lnkocn">38</a></label>
  <ul>
  <li class="bullet" id="38">
    Kai Hendry
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#39" class="lnkocn">39</a></label>
  <ul>
  <li class="bullet" id="39">
    Marco Amadori
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#40" class="lnkocn">40</a></label>
  <ul>
  <li class="bullet" id="40">
    Mathieu Geli
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#41" class="lnkocn">41</a></label>
  <ul>
  <li class="bullet" id="41">
    Matthias Kirschner
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#42" class="lnkocn">42</a></label>
  <ul>
  <li class="bullet" id="42">
    Richard Nelson
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#43" class="lnkocn">43</a></label>
  <ul>
  <li class="bullet" id="43">
    Trent W. Buck
  </li>
  </ul>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#44" class="lnkocn">44</a></label>
  <h5 class="norm" id="44"><a name="44"></a>
    <a name="h1.4" ></a><a name="how-to-contribute" ></a>1.4 この文書への貢献
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#45" class="lnkocn">45</a></label>
  <p class="i0" id="45">
    このマニュアルの作成はコミュニティ中心のプロジェクトで、改善提案や貢献は全て、非常に歓迎されます。コミットキーの取得方法や良いコミットを行うための詳細な情報については、 <a href="#contributing-to-project">プロジェクトへの貢献</a>  節を見てください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#46" class="lnkocn">46</a></label>
  <h6 class="norm" id="46"><a name="46"></a>
    <a name="h1.4.1" ></a><a name="applying-changes" ></a>1.4.1 変更の適用
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#47" class="lnkocn">47</a></label>
  <p class="i0" id="47">
    マニュアルの英語版に変更を加える場合、<tt>manual/en/</tt> にある正しいファイルを編集しないといけませんが、その貢献を提出する前に出来上がりを確認してください。Live マニュアルの出来上がりを確認する際は、
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#48" class="lnkocn">48</a></label>
  <p class="code" id="48">
    # apt-get install make po4a ruby ruby-nokogiri sisu-complete<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#49" class="lnkocn">49</a></label>
  <p class="i0" id="49">
    を実行してビルドに必要なパッケージがインストールされていることを確認してください。Gitにより取得した最上位のディレクトリから
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#50" class="lnkocn">50</a></label>
  <p class="code" id="50">
    $ make build<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#51" class="lnkocn">51</a></label>
  <p class="i0" id="51">
    サポートされている全言語のマニュアルをビルドするのにはある程度時間がかかるため、著者が英語版のマニュアルに追加した新しい文書について見直す場合は見直し用に処理を省略させると好都合かもしれません。<tt>PROOF=1</tt> を使うと HTML 形式の <i>live-manual</i> をビルドしますが分割版の HTML ファイルを作成しません。<tt>PROOF=2</tt> を使うとPDF形式の <i>live-manual</i> をビルドしますがA4とレター縦だけです。これが <tt>PROOF=</tt> を指定すると時間の節約が見込める理由です。例えば:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#52" class="lnkocn">52</a></label>
  <p class="code" id="52">
    $ make build PROOF=1<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#53" class="lnkocn">53</a></label>
  <p class="i0" id="53">
    翻訳の一つを見直す場合に一つの言語だけをビルドすることもできます。例えば:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#54" class="lnkocn">54</a></label>
  <p class="code" id="54">
    $ make build LANGUAGES=ja<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#55" class="lnkocn">55</a></label>
  <p class="i0" id="55">
    を実行します。文書の種類を指定してビルドすることもできます。例えば
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#56" class="lnkocn">56</a></label>
  <p class="code" id="56">
    $ make build FORMATS=pdf<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#57" class="lnkocn">57</a></label>
  <p class="i0" id="57">
    あるいは両方を組み合わせて
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#58" class="lnkocn">58</a></label>
  <p class="code" id="58">
    $ make build LANGUAGES=de FORMATS=html<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#59" class="lnkocn">59</a></label>
  <p class="i0" id="59">
    修正が済んで全て良くなったらコミットですが、そのコミットで翻訳を更新するのでない限り <tt>make commit</tt> を使わないようにしてください。また、その場合にマニュアルの英語版への変更と翻訳を一度にコミットするのではなく、それぞれ分けてコミットするようにしてください。さらなる詳細については <a href="#translation">翻訳</a>  節を見てください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#60" class="lnkocn">60</a></label>
  <h6 class="norm" id="60"><a name="60"></a>
    <a name="h1.4.2" ></a><a name="translation" ></a>1.4.2 翻訳
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#61" class="lnkocn">61</a></label>
  <p class="i0" id="61">
    <b>注意:</b>  man ページの翻訳については、 <a href="#translation-of-manpages">man ページの翻訳</a>  を見てください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#62" class="lnkocn">62</a></label>
  <p class="i0" id="62">
    <i>live-manual</i> を翻訳するには、新しく最初から翻訳を開始するのか、それとも既に存在する翻訳について作業を続けるのか、によって以下の手順を追ってください:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#63" class="lnkocn">63</a></label>
  <ul>
  <li class="bullet" id="63">
    新しく最初から翻訳を開始する
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#64" class="lnkocn">64</a></label>
  <ul>
  <li class="i2" id="64">
    <tt>manual/pot/</tt> にある <b>about_manual.ssi.pot</b> 、<b>about_project.ssi.pot</b>、<b>index.html.in.pot</b>ファイルを (<i>poedit</i> 等) 好みのエディタで自分の言語に翻訳し、整合性確認のため翻訳した <tt>.po</tt> ファイルをメーリングリストに送ってください。<i>live-manual</i> の整合性確認では <tt>.po</tt> ファイルが 100% 翻訳されていることだけではなく誤りの可能性を検出します。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#65" class="lnkocn">65</a></label>
  <ul>
  <li class="i2" id="65">
    確認が済んだ後は、自動ビルドでの新しい言語の有効化は最初の翻訳済みファイルを <tt>manual/po/${言語}/</tt> に追加して <tt>make commit</tt> を実行すれば十分です。それから <tt>manual/_sisu/home/index.html</tt> を編集して言語の名前と () 内にその英語名を追加してください。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#66" class="lnkocn">66</a></label>
  <ul>
  <li class="bullet" id="66">
    既に存在する翻訳について作業を続ける
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#67" class="lnkocn">67</a></label>
  <ul>
  <li class="i2" id="67">
    対象の言語が既に追加されている場合は、(<i>poedit</i> 等) 好みのエディタで <tt>manual/po/</tt> にある残りの po ファイルを手当たり次第に翻訳を続けてください。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#68" class="lnkocn">68</a></label>
  <ul>
  <li class="i2" id="68">
    翻訳済みマニュアルが .po ファイルから更新されていることを確実にするためには <tt>make commit</tt> を行う必要があることと、<tt>git add .</tt>、<tt>git commit -m "Translating..."</tt>、<tt>git push</tt> を実行する前に <tt>make build</tt> を実行すると変更を確認できるということを忘れないでください。<tt>make build</tt> には相当の時間がかかる可能性があるため、 <a href="#applying-changes">変更の適用</a>  で説明しているように、見直しの際は1つの言語だけをビルドして確認できることを覚えておくといいでしょう。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#69" class="lnkocn">69</a></label>
  <p class="i0" id="69">
    <tt>make commit</tt> を実行するとテキストがいくらか流れていくのを目にするでしょう。これは基本的に処理状態についての情報を示すメッセージで、Live マニュアルの改善のために何ができるのかということを知る手がかりにもなります。致命的エラーが起きていない限り、通常はそのまま進めて貢献を提出できます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#70" class="lnkocn">70</a></label>
  <p class="i0" id="70">
    Live マニュアルには、翻訳者が未翻訳や変更された文字列を検索するのを大きく支援する2つのユーティリティが付属しています。1つ目は「make translate」です。これは各 .po ファイル中にどれだけ未翻訳文字列があるのか、詳細を報告するスクリプトを実行します。2つ目は「make fixfuzzy」で、こちらは変更された文字列だけを対象としますが、1つ1つ見つけて修正する作業を支援します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#71" class="lnkocn">71</a></label>
  <p class="i0" id="71">
    こういったユーティリティはコマンドラインで翻訳作業を行うのには実際に役立つかもしれませんが、推奨する作業方法は <i>poedit</i> のような専用ツールの利用だということに留意してください。Debian 地域化 (l10n) 文書や、特に Live マニュアル向けの <a href="#guidelines-translators">翻訳者向けのガイドライン</a>  を読むのも良いことです。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#72" class="lnkocn">72</a></label>
  <p class="i0" id="72">
    <b>注意:</b> gitツリーを push する前に <tt>make clean</tt> を実行してきれいにすることができます。この手順は .gitignore ファイルのおかげで強制ではありませんが、ファイルを意図せずコミットすることを避けられる良い実践となります。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#73" class="lnkocn">73</a></label>
  <h1 class="norm" id="73"><a name="73"></a>
    Live システムプロジェクトへの貢献
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#74" class="lnkocn">74</a></label>
  <h4 class="norm" id="74"><a name="74"></a>
    <a name="h2" ></a><a name="live_" ></a><a name="about-project" ></a>2. Live システムプロジェクトについて
  </h4>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#75" class="lnkocn">75</a></label>
  <h5 class="norm" id="75"><a name="75"></a>
    <a name="c2.1" ></a><a name="h2.1" ></a>2.1 動機
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#76" class="lnkocn">76</a></label>
  <h6 class="norm" id="76"><a name="76"></a>
    <a name="c2.1.1" ></a><a name="h2.1.1" ></a>2.1.1 現在の Live システムの問題点
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#77" class="lnkocn">77</a></label>
  <p class="i0" id="77">
    Live システムプロジェクトが始まったとき、利用可能な Debian ベースの Live システムは既に複数あり、素晴らしい作業を行っていました。Debian の視点から見て、そのほとんどには以下のような不満があります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#78" class="lnkocn">78</a></label>
  <ul>
  <li class="bullet" id="78">
    Debian のプロジェクトではないために Debian でのサポートがない。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#79" class="lnkocn">79</a></label>
  <ul>
  <li class="bullet" id="79">
    異なるディストリビューション、例えば*{安定版 (testing)}* と*{不安定版 (unstable)}* を混ぜて使っている。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#80" class="lnkocn">80</a></label>
  <ul>
  <li class="bullet" id="80">
    サポートしているのが i386 だけ。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#81" class="lnkocn">81</a></label>
  <ul>
  <li class="bullet" id="81">
    容量節約のためにパッケージの挙動や見た目を変更している。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#82" class="lnkocn">82</a></label>
  <ul>
  <li class="bullet" id="82">
    Debian アーカイブ外のパッケージを収録している。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#83" class="lnkocn">83</a></label>
  <ul>
  <li class="bullet" id="83">
    Debian のものではない追加パッチを適用した独自カーネルを使っている。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#84" class="lnkocn">84</a></label>
  <ul>
  <li class="bullet" id="84">
    本体のサイズのために巨大で遅く、レスキュー用途に合わない。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#85" class="lnkocn">85</a></label>
  <ul>
  <li class="bullet" id="85">
    異なる形式、例えば CD、DVD、USB メモリ、netboot イメージから利用できない。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#86" class="lnkocn">86</a></label>
  <h6 class="norm" id="86"><a name="86"></a>
    <a name="c2.1.2" ></a><a name="h2.1.2" ></a>2.1.2 自身の Live システムを作成する理由
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#87" class="lnkocn">87</a></label>
  <p class="i0" id="87">
    Debian はユニバーサルオペレーティングシステムです: Debian に Live システムがあることで Debian システムを案内、正確に表現することができるとともに、主に以下の利点があります:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#88" class="lnkocn">88</a></label>
  <ul>
  <li class="bullet" id="88">
    これは Debian のサブプロジェクトです。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#89" class="lnkocn">89</a></label>
  <ul>
  <li class="bullet" id="89">
    単一のディストリビューションの (現在の) 状態を反映します。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#90" class="lnkocn">90</a></label>
  <ul>
  <li class="bullet" id="90">
    可能な限り多くのアーキテクチャで動作します。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#91" class="lnkocn">91</a></label>
  <ul>
  <li class="bullet" id="91">
    変更しない Debian パッケージだけで構成されます。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#92" class="lnkocn">92</a></label>
  <ul>
  <li class="bullet" id="92">
    Debian アーカイブにないパッケージは何も含まれません。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#93" class="lnkocn">93</a></label>
  <ul>
  <li class="bullet" id="93">
    改変しない Debian のカーネルを追加パッチなしで利用します。
  </li>
  </ul>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#94" class="lnkocn">94</a></label>
  <h5 class="norm" id="94"><a name="94"></a>
    <a name="c2.2" ></a><a name="h2.2" ></a>2.2 哲学
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#95" class="lnkocn">95</a></label>
  <h6 class="norm" id="95"><a name="95"></a>
    <a name="c2.2.1" ></a><a name="h2.2.1" ></a>2.2.1 Debian「main」の変更しないパッケージしか使いません
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#96" class="lnkocn">96</a></label>
  <p class="i0" id="96">
    「main」Debian リポジトリのパッケージだけを利用します。「non-free」は Debian の中には含まれないため、公式の Live システムのイメージでは利用できません。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#97" class="lnkocn">97</a></label>
  <p class="i0" id="97">
    いかなるパッケージも変更しません。何か変更が必要であれば Debian のそのパッケージのメンテナと調整を行います。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#98" class="lnkocn">98</a></label>
  <p class="i0" id="98">
    例外として、<i>live-boot</i> や <i>live-build</i>、<i>live-config</i> といった私達の独自のパッケージを開発用の目的 (例えば開発用スナップショットの作成) のため私達自身のリポジトリから一時的に利用するかもしれません。このパッケージ群は定期的に Debian にアップロードされます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#99" class="lnkocn">99</a></label>
  <h6 class="norm" id="99"><a name="99"></a>
    <a name="c2.2.2" ></a><a name="h2.2.2" ></a>2.2.2 Live システム固有のパッケージ設定はありません
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#100" class="lnkocn">100</a></label>
  <p class="i0" id="100">
    現段階で、インストール例や代替設定は組み込んでいません。パッケージが利用されるのは Debian を普通にインストールした後のものなので全てデフォルト設定です。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#101" class="lnkocn">101</a></label>
  <p class="i0" id="101">
    別のデフォルト設定が必要であれば Debian のそのパッケージのメンテナと調整を行います。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#102" class="lnkocn">102</a></label>
  <p class="i0" id="102">
    debconf を使うことで提供されるパッケージ設定システムにより、独自に作成した Live システムのイメージを使って独自に設定したパッケージをインストールすることができるようになりますが、 <a href="#downloading-prebuilt-images">ビルド済み Live イメージ</a>  では Live 環境で動作させるために絶対に必要だという場合を除いて、パッケージをそのデフォルト設定のままにすることを選択しました。Live 用ツールチェインや <a href="#clone-configuration-via-git">ビルド済みイメージ設定</a>  への変更よりも、そこで可能である限り、Debian アーカイブにあるパッケージを Live システムでよりよく動作させることを好みます。さらなる情報については、 <a href="#customization-overview">独自化概要</a>  を見てください。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#103" class="lnkocn">103</a></label>
  <h5 class="norm" id="103"><a name="103"></a>
    <a name="h2.3" ></a><a name="contact" ></a>2.3 連絡先
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#104" class="lnkocn">104</a></label>
  <ul>
  <li class="bullet" id="104">
    <b>メーリングリスト</b>: プロジェクトの第一の連絡先は ‹<a href="https://lists.debian.org/debian-live/" target="_top">https://lists.debian.org/debian-live/</a>› のメーリングリストです。debian-live@lists.debian.org 宛てのメールにより、メーリングリストに直接メールを送ることができます。メーリングリストのアーカイブは ‹<a href="https://lists.debian.org/debian-live/" target="_top">https://lists.debian.org/debian-live/</a>› で利用できます。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#105" class="lnkocn">105</a></label>
  <ul>
  <li class="bullet" id="105">
    <b>IRC</b>: ユーザや開発者達が irc.debian.org (OFTC) の #debian-live チャンネルにいます。IRCで質問するときは静かに回答を待ってください。回答が得られないときはメーリングリストにメールで質問してください。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#106" class="lnkocn">106</a></label>
  <ul>
  <li class="bullet" id="106">
    <b>BTS</b> :  <a href="https://www.debian.org/Bugs/">Debian バグ追跡システム</a>  (BTS) には、ユーザや開発者により報告されたバグの詳細があります。バグにはそれぞれに番号が与えられ、対処されたものとして指示するまで存在するバグとして扱われます。さらなる情報については <a href="#bugs">バグの報告</a>  を見てください。
  </li>
  </ul>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#107" class="lnkocn">107</a></label>
  <h1 class="norm" id="107"><a name="107"></a>
    ユーザ
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#108" class="lnkocn">108</a></label>
  <h1 class="norm" id="108"><a name="108"></a>
    インストール
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#109" class="lnkocn">109</a></label>
  <h4 class="norm" id="109"><a name="109"></a>
    <a name="h3" ></a><a name="" ></a><a name="installation" ></a>3. インストール
  </h4>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#110" class="lnkocn">110</a></label>
  <h5 class="norm" id="110"><a name="110"></a>
    <a name="h3.1" ></a><a name="requirements" ></a>3.1 要件
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#111" class="lnkocn">111</a></label>
  <p class="i0" id="111">
    Live システムイメージのビルドにはわずかながらシステム要件があります:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#112" class="lnkocn">112</a></label>
  <ul>
  <li class="bullet" id="112">
    スーパーユーザ (root) 権限
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#113" class="lnkocn">113</a></label>
  <ul>
  <li class="bullet" id="113">
    最新版の <i>live-build</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#114" class="lnkocn">114</a></label>
  <ul>
  <li class="bullet" id="114">
    <i>bash</i> や <i>dash</i> 等の POSIX に準拠したシェル
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#115" class="lnkocn">115</a></label>
  <ul>
  <li class="bullet" id="115">
    <i>debootstrap</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#116" class="lnkocn">116</a></label>
  <ul>
  <li class="bullet" id="116">
    Linux 2.6 以降。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#117" class="lnkocn">117</a></label>
  <p class="i0" id="117">
    Debian や Debian 派生ディストリビューションの利用は必須ではないことに注意してください - <i>live-build</i> は上記の要件を満たすほぼありとあらゆるディストリビューションで動作します。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#118" class="lnkocn">118</a></label>
  <h5 class="norm" id="118"><a name="118"></a>
    <a name="h3.2" ></a><a name="installing-live-build" ></a>3.2 live-build のインストール
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#119" class="lnkocn">119</a></label>
  <p class="i0" id="119">
    <i>live-build</i> のインストールにはいくつか方法があります:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#120" class="lnkocn">120</a></label>
  <ul>
  <li class="bullet" id="120">
    Debian リポジトリから
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#121" class="lnkocn">121</a></label>
  <ul>
  <li class="bullet" id="121">
    ソースから
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#122" class="lnkocn">122</a></label>
  <ul>
  <li class="bullet" id="122">
    スナップショットから
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#123" class="lnkocn">123</a></label>
  <p class="i0" id="123">
    Debian を使っている場合に推奨するのは Debian リポジトリからの <i>live-build</i> のインストールです。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#124" class="lnkocn">124</a></label>
  <h6 class="norm" id="124"><a name="124"></a>
    <a name="c3.2.1" ></a><a name="h3.2.1" ></a>3.2.1 Debian リポジトリから
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#125" class="lnkocn">125</a></label>
  <p class="i0" id="125">
    他のあらゆるパッケージと同様に、単に <i>live-build</i> をインストールします:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#126" class="lnkocn">126</a></label>
  <p class="code" id="126">
    # apt-get install live-build<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#127" class="lnkocn">127</a></label>
  <h6 class="norm" id="127"><a name="127"></a>
    <a name="c3.2.2" ></a><a name="h3.2.2" ></a>3.2.2 ソースから
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#128" class="lnkocn">128</a></label>
  <p class="i0" id="128">
    <i>live-build</i> はGitバージョン管理システムを使って開発されています。Debian ベースのシステムでは <i>git</i> パッケージで提供されています。最新のコードを取得するには
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#129" class="lnkocn">129</a></label>
  <p class="code" id="129">
    $ git clone git://http://anonscm.debian.org/git/debian-live/live-build.git<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#130" class="lnkocn">130</a></label>
  <p class="i0" id="130">
    を実行します。Debian パッケージを自分でビルド、インストールすることもできます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#131" class="lnkocn">131</a></label>
  <p class="code" id="131">
    $ cd live-build<br>
$ dpkg-buildpackage -b -uc -us<br>
$ cd ..<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#132" class="lnkocn">132</a></label>
  <p class="i0" id="132">
    を実行し、新しくできた <tt>.deb</tt> ファイルから対象のものをインストールします。例えば
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#133" class="lnkocn">133</a></label>
  <p class="code" id="133">
    # dpkg -i live-build_4.0-1_all.deb<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#134" class="lnkocn">134</a></label>
  <p class="i0" id="134">
    システムに <i>live-build</i> を直接インストールすることもできます:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#135" class="lnkocn">135</a></label>
  <p class="code" id="135">
    # make install<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#136" class="lnkocn">136</a></label>
  <p class="i0" id="136">
    アンインストールは:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#137" class="lnkocn">137</a></label>
  <p class="code" id="137">
    # make uninstall<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#138" class="lnkocn">138</a></label>
  <h6 class="norm" id="138"><a name="138"></a>
    <a name="c3.2.3" ></a><a name="h3.2.3" ></a>3.2.3 「スナップショット」から
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#139" class="lnkocn">139</a></label>
  <p class="i0" id="139">
    <i>live-build</i> をソースからビルドあるいはインストールしたくない場合、スナップショットを利用できます。スナップショットは Git の最新版から自動的にビルドされ、http://debian-live.alioth.debian.org/debian/ から利用できるようになっています。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#140" class="lnkocn">140</a></label>
  <h5 class="norm" id="140"><a name="140"></a>
    <a name="c3.3" ></a><a name="h3.3" ></a>3.3 live-boot と live-config のインストール
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#141" class="lnkocn">141</a></label>
  <p class="i0" id="141">
    <b>注意:</b> 独自の Live システムを作成するためにシステムに <i>live-boot</i> や <i>live-config</i> をインストールする必要はありません。インストールは無害で、参照目的で有用でもあります。文書だけを望む場合には <i>live-boot-doc</i> や <i>live-config-doc</i> パッケージを別々にインストールできるようになっています。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#142" class="lnkocn">142</a></label>
  <h6 class="norm" id="142"><a name="142"></a>
    <a name="c3.3.1" ></a><a name="h3.3.1" ></a>3.3.1 Debian リポジトリから
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#143" class="lnkocn">143</a></label>
  <p class="i0" id="143">
    <i>live-boot</i>  と <i>live-config</i> はどちらも、 <a href="#installing-live-build"><i>live-build</i> のインストール</a>  にあるように Debian リポジトリから利用できるようになっています。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#144" class="lnkocn">144</a></label>
  <h6 class="norm" id="144"><a name="144"></a>
    <a name="c3.3.2" ></a><a name="h3.3.2" ></a>3.3.2 ソースから
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#145" class="lnkocn">145</a></label>
  <p class="i0" id="145">
    gitから最新のソースを利用するには以下の処理を追ってください。 <a href="#terms">用語</a>  で触れている用語について必ずよく理解しておくようにしてください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#146" class="lnkocn">146</a></label>
  <ul>
  <li class="bullet" id="146">
    <i>live-boot</i> 及び <i>live-config</i> のソースの取得
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#147" class="lnkocn">147</a></label>
  <p class="code" id="147">
    $ git clone git://http://anonscm.debian.org/git/debian-live/live-boot.git <br>
$ git clone git://http://anonscm.debian.org/git/debian-live/live-config.git<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#148" class="lnkocn">148</a></label>
  <p class="i0" id="148">
    パッケージをソースからビルドする理由が独自化である場合は、独自化の詳細について <i>live-boot</i> や <i>live-config</i> の man ページを参考にしてください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#149" class="lnkocn">149</a></label>
  <ul>
  <li class="bullet" id="149">
    <i>live-boot</i> 及び <i>live-config</i> の .deb ファイルのビルド
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#150" class="lnkocn">150</a></label>
  <p class="i0" id="150">
    ビルドは対象ディストリビューションまたは対象のプラットフォームを収録している chroot で行う必要があります: これはつまり、対象が <b>buster</b> であれば <b>buster</b> に対してビルドすべきだということです。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#151" class="lnkocn">151</a></label>
  <p class="i0" id="151">
    ビルドシステムとは異なるディストリビューションを対象とする <i>live-boot</i> をビルドする必要がある場合は <i>pbuilder</i> や <i>sbuild</i> といった個人向けビルダーを使ってください。例えば <b>buster</b> の Live イメージであれば <i>live-boot</i> を <b>buster</b> の chroot でビルドしてください。対象のディストリビューションがビルドシステムのディストリビューションと一致している場合はビルドシステムで直接 (<i>dpkg-dev</i> パッケージにより提供される) <tt>dpkg-buildpackage</tt> を使ってビルドできます:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#152" class="lnkocn">152</a></label>
  <p class="code" id="152">
    $ cd live-boot<br>
$ dpkg-buildpackage -b -uc -us<br>
$ cd ../live-config<br>
$ dpkg-buildpackage -b -uc -us<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#153" class="lnkocn">153</a></label>
  <ul>
  <li class="bullet" id="153">
    件の .deb ファイルの利用
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#154" class="lnkocn">154</a></label>
  <p class="i0" id="154">
    <i>live-boot</i>  と <i>live-config</i> は <i>live-build</i> システムによりインストールされるため、ホストシステムでパッケージをインストールするだけでは十分ではありません: 生成された .deb ファイルを他の独自パッケージと同じように扱う必要があります。ソースからビルドする目的は恐らく公式リリース前の短期間に新しいものをテストすることなので、 <a href="#installing-modified-or-third-party-packages">変更したあるいはサードパーティ製パッケージのインストール</a>  に従って、関連するファイルを設定に一時的に収録するようにしてください。特に、どちらのパッケージも一般的な部分、文書、そしてバックエンドに分割されていることに注意してください。一般的な部分と設定に合うバックエンドをただ1つ、オプションで文書を収録してください。Live イメージを現在のディレクトリでビルドし、前述のディレクトリに両方のパッケージの単一バージョンの .deb ファイルを全て生成したものと仮定して、以下の bash コマンドでデフォルトのバックエンドを含めて関連するパッケージを全てコピーします:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#155" class="lnkocn">155</a></label>
  <p class="code" id="155">
    $ cp ../live-boot{_,-initramfs-tools,-doc}*.deb&nbsp;&nbsp;config/packages.chroot/<br>
$ cp ../live-config{_,-sysvinit,-doc}*.deb&nbsp;&nbsp;config/packages.chroot/<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#156" class="lnkocn">156</a></label>
  <h6 class="norm" id="156"><a name="156"></a>
    <a name="c3.3.3" ></a><a name="h3.3.3" ></a>3.3.3 「スナップショット」から
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#157" class="lnkocn">157</a></label>
  <p class="i0" id="157">
    <i>live-build</i> の設定ディレクトリで debian-live.alioth.debian.org のパッケージリポジトリをサードパーティリポジトリとして設定することで、<i>live-build</i> が自動的に <i>live-boot</i> と <i>live-config</i> の最新のスナップショットを利用するようにできます。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#158" class="lnkocn">158</a></label>
  <h1 class="norm" id="158"><a name="158"></a>
    基本
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#159" class="lnkocn">159</a></label>
  <h4 class="norm" id="159"><a name="159"></a>
    <a name="h4" ></a><a name="" ></a><a name="the-basics" ></a>4. 基本
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a href="#160" class="lnkocn">160</a></label>
  <p class="i0" id="160">
    この章ではビルドプロセスの概要と最も広く利用されている3種類のイメージの使用手順について簡単に述べます。最も汎用性の高い形式のイメージである <tt>iso-hybrid</tt> は、仮想マシンや光学メディア、USBポータブルストレージ機器上で利用できます。特に変わった状況では後述のように、<tt>hdd</tt> 形式の方が適するかもしれません。この章では <tt>netboot</tt> 形式のイメージをビルド、利用する手順を記載しています。この形式はサーバ上で必要とする準備のためにやや複雑になります。これは netboot についてまだ不慣れな人にとってはわずかに高度な話題となりますが、その準備さえできればローカルネットワーク上でブートするためのイメージをテスト、展開するのに非常に便利な方法で、難なくイメージのメディアを扱うことができるため、ここに収録しています。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#161" class="lnkocn">161</a></label>
  <p class="i0" id="161">
    この節は  <a href="#webbooting">ウェブブート</a>  の簡単な手引きで終えています。これは恐らく異なる目的の異なるイメージを必要に応じて切り替えて使う最も簡単な方法で、手段としてインターネットを使います。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#162" class="lnkocn">162</a></label>
  <p class="i0" id="162">
    この章全体を通して、<i>live-build</i> により作成されるデフォルトのファイル名を頻繁に参照しています。 <a href="#downloading-prebuilt-images">ビルド済みイメージをダウンロード</a>  した場合、実際のファイル名は異なる場合があります。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#163" class="lnkocn">163</a></label>
  <h5 class="norm" id="163"><a name="163"></a>
    <a name="h4.1" ></a><a name="what-is-live" ></a>4.1 Live システムとは何?
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#164" class="lnkocn">164</a></label>
  <p class="i0" id="164">
    Live システムとは、 通常 CD-ROM やUSBメモリ等の取り外し可能メディア、あるいはネットワークからコンピュータ上でブートされるオペレーティングシステムを意味し、普通のドライブに何もインストールせずに利用でき、実行時に自動設定が行われます ( <a href="#terms">用語</a>  参照)。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#165" class="lnkocn">165</a></label>
  <p class="i0" id="165">
    Live システムはオペレーティングシステムで、サポートしているうちの単一のアーキテクチャ (現在 amd64 と i386) 向けにビルドされています。以下から構成されています。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#166" class="lnkocn">166</a></label>
  <ul>
  <li class="bullet" id="166">
    <b>Linux カーネルイメージ</b> 、通常 <tt>vmlinuz*</tt> という名前です
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#167" class="lnkocn">167</a></label>
  <ul>
  <li class="bullet" id="167">
    <b>初期 RAM ディスクイメージ (initrd)</b>: Linux ブート用に用意された RAM ディスクで、システムのイメージをマウントするのに必要となる可能性があるモジュールとマウントするためのスクリプトをいくつか収録しています。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#168" class="lnkocn">168</a></label>
  <ul>
  <li class="bullet" id="168">
    <b>システムイメージ</b> : オペレーティングシステムのファイルシステムのイメージです。通常、Live システムのイメージサイズを最小限にするため、SquashFS 圧縮ファイルシステムが利用されています。このファイルシステムは読み込み専用であることに注意してください。そのため、ブート処理中は Live システムはRAMディスクと「ユニオン」機構を利用して実行中のシステム中でファイルを書き込むことができるようにしています。ただし、オプションの保持機能を使っていない限り、変更は全てシャットダウンにより失われます ( <a href="#persistence">保持機能</a>  参照)。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#169" class="lnkocn">169</a></label>
  <ul>
  <li class="bullet" id="169">
    <b>ブートローダ</b>: 選択したメディアからブートするように作られた短いコードの集合で、オプション/設定を選択できるプロンプトやメニューを恐らく提示します。Linux カーネルとその initrd を読み込んでそのシステムのファイルシステム上で実行します。前に言及した構成要素を収録する対象メディアやファイルシステムの形式によっては別の方法があります。isolinux では ISO9660 形式のCDやDVDからのブート、syslinux ではHDDやUSBドライブの VFAT パーティションからのブート、extlinux では ext2/3/4 や btrfs パーティション、pxelinux では PXE netboot、GRUB では ext2/3/4 パーティション、等。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#170" class="lnkocn">170</a></label>
  <p class="i0" id="170">
    <i>live-build</i> を使って Linux カーネル、initrd、それを実行するためのブートローダを独自仕様で用意して全て1つのメディア特有の形式 (ISO9660 イメージやディスクイメージ等) でシステムのイメージをビルドできます。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#171" class="lnkocn">171</a></label>
  <h5 class="norm" id="171"><a name="171"></a>
    <a name="h4.2" ></a><a name="downloading-prebuilt-images" ></a>4.2 ビルド済みイメージのダウンロード
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#172" class="lnkocn">172</a></label>
  <p class="i0" id="172">
    このマニュアルの対象は自分の Live イメージの開発やビルドですが、使い方の手引き、あるいは自分でビルドする代わりにビルド済みイメージを簡単に試してみたいこともあるでしょう。 <a href="#clone-configuration-via-git"><i>live-images</i> のgitリポジトリ</a>  と公式の安定版 (stable) リリースを使ってビルドされたイメージが ‹<a href="https://www.debian.org/CD/live/" target="_top">https://www.debian.org/CD/live/</a>› で公開されています。さらに、古いものや今後のリリース、non-free ファームウェアを収録する非公式のイメージ、あるいはドライバが ‹<a href="http://debian-live.alioth.debian.org/cdimage/release/" target="_top">http://debian-live.alioth.debian.org/cdimage/release/</a>› から利用できるようになっています。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#173" class="lnkocn">173</a></label>
  <h5 class="norm" id="173"><a name="173"></a>
    <a name="h4.3" ></a><a name="using-web-builder" ></a>4.3 ウェブ Live イメージビルダーの利用
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#174" class="lnkocn">174</a></label>
  <p class="i0" id="174">
    コミュニティへのサービスとして、ウェブベースの Live イメージビルダーサービスを ‹<a href="http://debian-live.alioth.debian.org/build/" target="_top">http://debian-live.alioth.debian.org/build/</a>› で運営しています。このサイトはベストエフォートの方針で保守されています。つまり、最新でいつでも使える状態の維持に努め、大規模な運用停止については問題を告知しますが、100% いつでも使えることやイメージの高速なビルドを保証することはできず、サービスについて解決に時間を要する問題が時々あるかもしれないということです。サービスについて問題や疑問があれば、問題のあるビルドへのリンクを添えて <a href="#contact">連絡</a>  してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#175" class="lnkocn">175</a></label>
  <h6 class="norm" id="175"><a name="175"></a>
    <a name="c4.3.1" ></a><a name="h4.3.1" ></a>4.3.1 ウェブビルダーの使い方と注意
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#176" class="lnkocn">176</a></label>
  <p class="i0" id="176">
    ウェブインターフェイスでは現在、オプションの不正な組み合わせを避ける対策を何も取っていません。また、特に、変更すると通常ウェブフォームにある他のオプションのデフォルト値 (つまり <i>live-build</i> を直接使った場合の値) が変わるオプションを変更した場合にウェブビルダーはそのデフォルト値を変更しません。最も顕著な例として、<tt>--architectures</tt> をデフォルトの <tt>i386</tt> から <tt>amd64</tt> に変更すると対応するオプション <tt>--linux-flavours</tt> をデフォルトの <tt>586</tt> から <tt>amd64</tt> に変更する必要があります。ウェブビルダーにインストールされている <i>live-build</i> のバージョンやさらなる詳細については <tt>lb_config</tt> man ページを見てください。<i>live-build</i> のバージョン番号はウェブビルダーのページ下部に記載されています。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#177" class="lnkocn">177</a></label>
  <p class="i0" id="177">
    ウェブビルダーにより提示される時間の推定は条件を考慮しない推定であり、実際にビルドにかかる時間を反映していないかもしれません。表示された後に更新もされません。それについては我慢してください。ビルド条件を送信した後にこのページを更新しないでください。更新すると同一のパラメータで再び新たにビルドを送信することになります。ビルドの通知をただの一度も受け取っておらず、十分な時間が確実に過ぎて、通知メールが自分の spam メールフィルタに引っかかっていないことを確認した場合、 <a href="#contact">連絡</a>  してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#178" class="lnkocn">178</a></label>
  <p class="i0" id="178">
    ウェブビルダーがビルドできるイメージの種類は限定されています。これにより、利用や保守を簡単、能率的に維持できます。ウェブインターフェイスで提供されていない独自化を行いたい場合は、<i>live-build</i> を使って自分のイメージをビルドする方法をこのマニュアルの残りで説明しています。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#179" class="lnkocn">179</a></label>
  <h5 class="norm" id="179"><a name="179"></a>
    <a name="h4.4" ></a><a name="building-iso-hybrid" ></a>4.4 最初の段階: ISO hybrid イメージのビルド
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#180" class="lnkocn">180</a></label>
  <p class="i0" id="180">
    イメージの種類を問わず、イメージをビルドするのに同一の基礎手順を毎回実行する必要があります。最初の例ではビルド用のディレクトリを作成して、このディレクトリに移動してから <i>live-build</i> コマンドを以下の順で実行し、X.org のないデフォルトの Live システムを収録する基本的な ISO hybrid イメージを作成します。このイメージはCDやDVDメディアへの書き込み、さらにUSBメモリへの複製にも適しています。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#181" class="lnkocn">181</a></label>
  <p class="i0" id="181">
    作業ディレクトリの名前は完全に自由ですが、<i>live-manual</i> 全体で利用されている例を参考にする場合、特に異なる種類のイメージについて作業、実験している場合、各ディレクトリで作業しているイメージの識別を支援する名前を使うのは良い方法です。ここではデフォルトのシステムをビルドするとして、例えば live-default と呼びましょう。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#182" class="lnkocn">182</a></label>
  <p class="code" id="182">
    $ mkdir live-default &amp;&amp; cd live-default<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#183" class="lnkocn">183</a></label>
  <p class="i0" id="183">
    それから <tt>lb config</tt> コマンドを実行します。これにより他のコマンドが利用する「config/」階層を現在のディレクトリに作成します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#184" class="lnkocn">184</a></label>
  <p class="code" id="184">
    $ lb config<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#185" class="lnkocn">185</a></label>
  <p class="i0" id="185">
    上記のコマンドにはパラメータが渡されていないので、様々な選択肢についてそれぞれのデフォルト値が使われます。さらなる詳細については  <a href="#lb-config">lb config コマンド</a>  を見てください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#186" class="lnkocn">186</a></label>
  <p class="i0" id="186">
    これで「config/」階層ができました。<tt>lb build</tt> コマンドでイメージをビルドします。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#187" class="lnkocn">187</a></label>
  <p class="code" id="187">
    # lb build<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#188" class="lnkocn">188</a></label>
  <p class="i0" id="188">
    コンピュータやネットワーク接続の速度により、このプロセスには少々時間がかかるかもしれません。完了すると、<tt>live-image-i386.hybrid.iso</tt> イメージファイルが使える状態で現在のディレクトリにできているはずです。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#189" class="lnkocn">189</a></label>
  <p class="i0" id="189">
    <b>注意:</b> amd64 システムでビルドした場合は、出来上がるイメージの名前は <tt>live-image-amd64.hybrid.iso</tt> となります。マニュアル全体でこの慣例を採用していることに留意してください。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#190" class="lnkocn">190</a></label>
  <h5 class="norm" id="190"><a name="190"></a>
    <a name="h4.5" ></a><a name="using-iso-hybrid" ></a>4.5 ISO hybrid Live イメージの利用
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#191" class="lnkocn">191</a></label>
  <p class="i0" id="191">
    ISO hybrid イメージをビルド、または ‹<a href="https://www.debian.org/CD/live/" target="_top">https://www.debian.org/CD/live/</a>› にあるものをダウンロードした後、通常は次にブート用メディアとして CD-R(W) や DVD-R(W) の光学メディアかUSBメモリを用意します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#192" class="lnkocn">192</a></label>
  <h6 class="norm" id="192"><a name="192"></a>
    <a name="h4.5.1" ></a><a name="burning-iso-image" ></a>4.5.1 ISOイメージの実際のメディアへの書き込み
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#193" class="lnkocn">193</a></label>
  <p class="i0" id="193">
    ISOイメージの書き込みは簡単です。<i>xorriso</i> をインストールしてそれをコマンドラインから使ってイメージを書き込むだけです。例えば:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#194" class="lnkocn">194</a></label>
  <p class="code" id="194">
    # apt-get install xorriso<br>
$ xorriso -as cdrecord -v dev=/dev/sr0 blank=as_needed live-image-i386.hybrid.iso<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#195" class="lnkocn">195</a></label>
  <h6 class="norm" id="195"><a name="195"></a>
    <a name="h4.5.2" ></a><a name="copying-iso-hybrid-to-usb" ></a>4.5.2 ISO hybrid イメージのUSBメモリへのコピー
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#196" class="lnkocn">196</a></label>
  <p class="i0" id="196">
    <tt>xorriso</tt> で作られたISOイメージは <tt>cp</tt> プログラムや同等プログラムを使って単純にUSBメモリにコピーすることができます。イメージファイルを置けるだけの十分に大きなサイズのUSBメモリを差し込んでそれがどのデバイスなのか決定します。以後 <tt>${USBメモリ}</tt> として参照します。これは例えば <tt>/dev/sdb</tt> といったUSBメモリのデバイスファイルで、例えば <tt>/dev/sdb1</tt> といったパーティションではありません! USBメモリを差し込んでから <tt>dmesg</tt> か、もっと良いのは <tt>ls -l /dev/disk/by-id</tt> の出力を見ると正しいデバイス名を調べることができます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#197" class="lnkocn">197</a></label>
  <p class="i0" id="197">
    正しいデバイス名を得られたことを確信できたら <tt>cp</tt> コマンドを使ってイメージをUSBメモリにコピーします。<b>これを実行すると以前そのUSBメモリにあった内容は全て確実に上書きされます!</b>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#198" class="lnkocn">198</a></label>
  <p class="code" id="198">
    $ cp live-image-i386.hybrid.iso ${USBメモリ}<br>
$ sync<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#199" class="lnkocn">199</a></label>
  <p class="i0" id="199">
    <b>注意:</b> <i>sync</i> コマンドはイメージのコピー中にカーネルによりメモリに記憶されているデータが全てUSBメモリに書き込まれたことを保証するのに有用です。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#200" class="lnkocn">200</a></label>
  <h6 class="norm" id="200"><a name="200"></a>
    <a name="h4.5.3" ></a><a name="using-usb-extra-space" ></a>4.5.3 USBメモリの空きスペースの利用
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#201" class="lnkocn">201</a></label>
  <p class="i0" id="201">
    <tt>live-image-i386.hybrid.iso</tt> をUSBメモリにコピーすると、最初のパーティションは Live システムで埋められます。残った空きスペースを利用するには、<i>gparted</i> や <i>parted</i> といったパーティション作業ツールを使ってそのUSBメモリに新しいパーティションを作成します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#202" class="lnkocn">202</a></label>
  <p class="code" id="202">
    # gparted ${USBメモリ}<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#203" class="lnkocn">203</a></label>
  <p class="i0" id="203">
    パーティションの作成後にはファイルシステムを作成する必要があります。選択肢には ext4 等があります。<tt>${パーティション}</tt>には例えば <tt>/dev/sdb2</tt> 等パーティションの名前が入ります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#204" class="lnkocn">204</a></label>
  <p class="code" id="204">
    # mkfs.ext4 ${パーティション}<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#205" class="lnkocn">205</a></label>
  <p class="i0" id="205">
    <b>注意:</b>  余った容量を Windows で使いたい場合ですが、このOSでは最初のパーティション以外にアクセスすることは通常できません。この問題に対する解決策が <a href="#contact">メーリングリスト</a>  でいくらか議論されていますが、簡単な解はないようです。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#206" class="lnkocn">206</a></label>
  <p class="i0" id="206">
    <b>Remember: 新しい live-image-i386.hybrid.iso をUSBメモリにインストールする度に、パーティションテーブルがイメージの内容で上書きされるために USB メモリにあるデータは全て失われるので、追加パーティションをまずバックアップしてから、Live イメージの更新後に復帰させるようにしてください。</b>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#207" class="lnkocn">207</a></label>
  <h6 class="norm" id="207"><a name="207"></a>
    <a name="h4.5.4" ></a><a name="booting-live-medium" ></a>4.5.4 Live メディアのブート
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#208" class="lnkocn">208</a></label>
  <p class="i0" id="208">
    Live メディアCD、DVD、USBメモリ、あるいは PXE ブートでの初回ブート時に、そのコンピュータの BIOS をまず設定する必要があるかもしれません。BIOS により機能やキーの割り当てが大きく異なるため、ここではそれについて深くは触れません。BIOS によってはブートするデバイスのメニューをブート時に提示させるキー割り当てを提供しているものがあり、そのシステムでこれが利用できる場合は最も簡単な方法でしょう。それがない場合は BIOS 設定メニューに入って Live システムのブートデバイスを通常のブートデバイスよりも前に配置するようにブート順を変更する必要があります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#209" class="lnkocn">209</a></label>
  <p class="i0" id="209">
    メディアをブートするとブートメニューが表示されているでしょう。ここで単に enter を押すと、システムはデフォルトの項目 <tt>Live</tt> とデフォルトのオプションを使ってブートします。ブートオプションのさらなる情報については、メニューの「ヘルプ」の項目や Live システム内にある <i>live-boot</i> 及び <i>live-config</i> の man ページを見てください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#210" class="lnkocn">210</a></label>
  <p class="i0" id="210">
    <tt>Live</tt>  を選択してデフォルトのデスクトップ Live イメージをブートしたとして、ブートメッセージが流れた後、自動的に <tt>user</tt> アカウントにログインし、デスクトップがすぐに使える状態で見えているはずです。 <a href="#downloading-prebuilt-images">ビルド済みイメージ</a>  の <tt>standard</tt> 等コンソールだけのイメージをブートした場合はコンソールで自動的に <tt>user</tt> アカウントにログインし、シェルプロンプトがすぐに使える状態で見えているはずです。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#211" class="lnkocn">211</a></label>
  <h5 class="norm" id="211"><a name="211"></a>
    <a name="h4.6" ></a><a name="using-virtual-machine" ></a>4.6 仮想マシンを利用したテスト
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#212" class="lnkocn">212</a></label>
  <p class="i0" id="212">
    Live イメージを仮想マシン (VM) 内で実行すると開発の面で大きな時間の節約になるかもしれません。これには注意事項がないというわけではありません:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#213" class="lnkocn">213</a></label>
  <ul>
  <li class="bullet" id="213">
    VMの実行にはゲストOSとホストOSの両方に十分なRAMが必要で、CPUには仮想化をハードウェアでサポートしているものを推奨します。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#214" class="lnkocn">214</a></label>
  <ul>
  <li class="bullet" id="214">
    VM上での実行には、例えばビデオ性能が低いこと、エミュレーするハードウェアの選択肢が限られていること等内在する制限がいくらかあります。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#215" class="lnkocn">215</a></label>
  <ul>
  <li class="bullet" id="215">
    特定のハードウェア向けの開発ではそのハードウェア自体での実行に代わるものはありません。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#216" class="lnkocn">216</a></label>
  <ul>
  <li class="bullet" id="216">
    VMでの実行にのみ関連するバグが時々あります。その疑いがあるときはイメージをハードウェアで直接テストしてください。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#217" class="lnkocn">217</a></label>
  <p class="i0" id="217">
    こういった制約があることを理解した上で利用可能なVMソフトウェアを調べて要件に合うものを選択してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#218" class="lnkocn">218</a></label>
  <h6 class="norm" id="218"><a name="218"></a>
    <a name="h4.6.1" ></a><a name="testing-iso-with-qemu" ></a>4.6.1 QEMU でのISOイメージのテスト
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#219" class="lnkocn">219</a></label>
  <p class="i0" id="219">
    Debian で最も汎用性の高いVMは QEMU です。プロセッサが仮想化をハードウェアでサポートしている場合は <i>qemu-kvm</i> パッケージを使ってください。<i>qemu-kvm</i> パッケージの説明に要件の簡単な一覧があります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#220" class="lnkocn">220</a></label>
  <p class="i0" id="220">
    プロセッサがサポートしている場合はまず <i>qemu-kvm</i> をインストールしてください。サポートしている場合は <i>qemu</i> をインストールしてください。以下の例ではどちらの場合もプログラム名は <tt>kvm</tt> ではなく <tt>qemu</tt> とします。<i>qemu-utils</i> パッケージもあると <tt>qemu-img</tt> で仮想ディスクのイメージを作成するのによいでしょう。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#221" class="lnkocn">221</a></label>
  <p class="code" id="221">
    # apt-get install qemu-kvm qemu-utils<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#222" class="lnkocn">222</a></label>
  <p class="i0" id="222">
    ISOイメージのブートは簡単です:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#223" class="lnkocn">223</a></label>
  <p class="code" id="223">
    $ kvm -cdrom live-image-i386.hybrid.iso<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#224" class="lnkocn">224</a></label>
  <p class="i0" id="224">
    詳細については man ページを見てください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#225" class="lnkocn">225</a></label>
  <h6 class="norm" id="225"><a name="225"></a>
    <a name="h4.6.2" ></a><a name="testing-iso-with-virtualbox" ></a>4.6.2 VirtualBox でのISOイメージのテスト
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#226" class="lnkocn">226</a></label>
  <p class="i0" id="226">
    <i>virtualbox</i> でISOをテストするには:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#227" class="lnkocn">227</a></label>
  <p class="code" id="227">
    # apt-get install virtualbox virtualbox-qt virtualbox-dkms<br>
$ virtualbox<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#228" class="lnkocn">228</a></label>
  <p class="i0" id="228">
    新しい仮想マシンを作成し、<tt>live-image-i386.hybrid.iso</tt> を CD/DVD デバイスとして利用するようにストレージ設定を変更して仮想マシンを起動します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#229" class="lnkocn">229</a></label>
  <p class="i0" id="229">
    <b>注意:</b> X.org を収録している Live システムを <i>virtualbox</i> でテストしたい場合は <i>live-build</i> 設定に VirtualBox X.org ドライバパッケージ <i>virtualboxbox-guest-dkms</i> 及び <i>virtualboxbox-guest-x11</i> を収録するとよいでしょう。収録しない場合、解像度は 800x600 に限定されます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#230" class="lnkocn">230</a></label>
  <p class="code" id="230">
    $ echo "virtualbox-guest-dkms virtualbox-guest-x11" &gt;&gt; config/package-lists/my.list.chroot<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#231" class="lnkocn">231</a></label>
  <p class="i0" id="231">
    dkms パッケージを機能させるためには、そのイメージで利用しているカーネルの種類のカーネルヘッダもインストールする必要があります。正しいパッケージの選択は上記で作成したパッケージ一覧に正しい <i>linux-headers</i> パッケージを手作業により列挙する代わりに <i>live-build</i> により自動的に行うことができます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#232" class="lnkocn">232</a></label>
  <p class="code" id="232">
    &nbsp;&nbsp;$ lb config --linux-packages "linux-image linux-headers"<br>
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#233" class="lnkocn">233</a></label>
  <h5 class="norm" id="233"><a name="233"></a>
    <a name="h4.7" ></a><a name="using-hdd-image" ></a>4.7 HDDイメージのビルド及び利用
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#234" class="lnkocn">234</a></label>
  <p class="i0" id="234">
    HDDイメージのビルドは全面的に ISO hybrid イメージのビルドと似ていて、<tt>-b hdd</tt> を指定することと出来上がりのファイル名が <tt>live-image-i386.img</tt> で光学メディアに書き込んで使うことができないという点が異なります。このイメージはUSBメモリやUSBハードドライブ、その他様々な他のポータブルストレージデバイスからのブートに適しています。通常、この目的には ISO hybrid イメージを代わりに使えますが、BIOS が hybrid イメージを適切に処理できない場合はHDDイメージが必要となります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#235" class="lnkocn">235</a></label>
  <p class="i0" id="235">
    <b>注意:</b>  前の例で ISO hybrid イメージを作成している場合 <tt>lb clean</tt> コマンド ( <a href="#lb-clean">lb clean コマンド</a>  参照) で作業ディレクトリをきれいにする必要があります:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#236" class="lnkocn">236</a></label>
  <p class="code" id="236">
    # lb clean --binary<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#237" class="lnkocn">237</a></label>
  <p class="i0" id="237">
    前と同様に <tt>lb config</tt> コマンドを実行します。今回はイメージの種類にHDDを指定する点が異なります:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#238" class="lnkocn">238</a></label>
  <p class="code" id="238">
    $ lb config -b hdd<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#239" class="lnkocn">239</a></label>
  <p class="i0" id="239">
    それから <tt>lb build</tt> コマンドでイメージをビルドします:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#240" class="lnkocn">240</a></label>
  <p class="code" id="240">
    # lb build<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#241" class="lnkocn">241</a></label>
  <p class="i0" id="241">
    ビルドが完了すると現在のディレクトリに <tt>live-image-i386.img</tt> ファイルができているはずです。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#242" class="lnkocn">242</a></label>
  <p class="i0" id="242">
    生成されたバイナリイメージには VFAT パーティションと syslinux ブートローダが収録され、そのままUSB機器に書きこめます。繰り返しますがHDDイメージの使い方はUSBで ISO hybrid イメージを使うのと同様です。 <a href="#using-iso-hybrid">ISO hybrid Live イメージの利用</a>  の指示に従ってください。<tt>live-image-i386.hybrid.iso</tt> に代えて <tt>live-image-i386.img</tt> をファイル名に使う点が異なります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#243" class="lnkocn">243</a></label>
  <p class="i0" id="243">
    同様に、Qemu でHDDイメージをテストするには上記の  <a href="#testing-iso-with-qemu">Qemu でのISOイメージのテスト</a>  で説明しているように <i>qemu</i> をインストールしてください。それから <tt>kvm</tt> か <tt>qemu</tt> のホストシステムで必要バージョンを実行し、最初のハードドライブとして <tt>live-image-i386.img</tt> を指定します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#244" class="lnkocn">244</a></label>
  <p class="code" id="244">
    $ kvm -hda live-image-i386.img<br>
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#245" class="lnkocn">245</a></label>
  <h5 class="norm" id="245"><a name="245"></a>
    <a name="h4.8" ></a><a name="building-netboot-image" ></a>4.8 netboot イメージのビルド
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#246" class="lnkocn">246</a></label>
  <p class="i0" id="246">
    以下の順でコマンドを実行すると X.org のないデフォルトの Live システムを収録する基本的な netboot イメージを作成します。ネットワーク越しのブートに適しています。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#247" class="lnkocn">247</a></label>
  <p class="i0" id="247">
    <b>注意:</b> 前に示した例からどれかを実行した場合、作業ディレクトリを <tt>lb clean</tt> コマンドできれいにする必要があります:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#248" class="lnkocn">248</a></label>
  <p class="code" id="248">
    # lb clean<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#249" class="lnkocn">249</a></label>
  <p class="i0" id="249">
    この特定の場合必要な段階の掃除が <tt>lb clean --binary</tt> では不十分です。netboot イメージのビルドで <i>live-build</i> が netboot の準備を自動的に実行するにあたって異なる initramfs 設定が必要なことがその原因です。initramfs の作成は chroot の段階で行われるため、既存のビルドディレクトリで netboot に切り替えるということは chroot の段階も再ビルドするということになります。したがって、<tt>lb clean</tt> (これは chroot の段階も削除します) を使う必要があります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#250" class="lnkocn">250</a></label>
  <p class="i0" id="250">
    <tt>lb config</tt> コマンドを以下のように実行してイメージを netboot 用に設定します:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#251" class="lnkocn">251</a></label>
  <p class="code" id="251">
    $ lb config -b netboot --net-root-path "/srv/debian-live" --net-root-server "192.168.0.2"<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#252" class="lnkocn">252</a></label>
  <p class="i0" id="252">
    ISO及びHDDイメージとは対照的に netboot 自体ではクライアントに対してファイルシステムのイメージを提供しないため、ファイルをNFS経由で提供する必要があります。lb config で異なるネットワークファイルシステムを選択することもできます。<tt>--net-root-path</tt> 及び <tt>--net-root-server</tt> オプションはそれぞれ、ブート時にファイルシステムのイメージが置かれるNFSサーバの位置とサーバを指定します。ネットワークやサーバに合う適切な値がセットされていることを確認してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#253" class="lnkocn">253</a></label>
  <p class="i0" id="253">
    それから <tt>lb build</tt> コマンドでイメージをビルドします:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#254" class="lnkocn">254</a></label>
  <p class="code" id="254">
    # lb build<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#255" class="lnkocn">255</a></label>
  <p class="i0" id="255">
    ネットワーク経由のブートでは、クライアントは通常イーサネットカードの EPROM にある小さなソフトウェアを実行します。このプログラムは DHCP リクエストを送り、IPアドレスと次に行うことについての情報を取得します。次の段階は通常、TFTP プロトコルを経由した高レベルブートローダの取得です。これには pxelinux や GRUB、さらには直接 Linux のようなオペレーティングシステムをブートすることもできます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#256" class="lnkocn">256</a></label>
  <p class="i0" id="256">
    例えば生成された <tt>live-image-i386.netboot.tar</tt> アーカイブを <tt>/srv/debian-live</tt> ディレクトリに展開すると、<tt>live/filesystem.squashfs</tt> にファイルシステムのイメージ、カーネルや initrd、pxelinux ブートローダが <tt>tftpboot/</tt> にあることがわかるでしょう。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#257" class="lnkocn">257</a></label>
  <p class="i0" id="257">
    ネットワーク経由でのブートをできるようにするにはサーバ上でサービスを3つ、DHCP サーバ、TFTP サーバ、NFSサーバを設定する必要があります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#258" class="lnkocn">258</a></label>
  <h6 class="norm" id="258"><a name="258"></a>
    <a name="c4.8.1" ></a><a name="h4.8.1" ></a>4.8.1 DHCP サーバ
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#259" class="lnkocn">259</a></label>
  <p class="i0" id="259">
    ネットワーク経由でブートするクライアントシステムに対して確実にIPアドレスを1つ与え、PXEブートローダの位置を通知するようにネットワークの DHCP サーバを設定する必要があります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#260" class="lnkocn">260</a></label>
  <p class="i0" id="260">
    イメージしやすいように <tt>/etc/dhcp/dhcpd.conf</tt> 設定ファイルで設定する ISC DHCP サーバ <tt>isc-dhcp-server</tt> 向けに書かれた例を示します:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#261" class="lnkocn">261</a></label>
  <p class="code" id="261">
    # /etc/dhcp/dhcpd.conf - configuration file for isc-dhcp-server<br><br>
ddns-update-style none;<br><br>
option domain-name "example.org";<br>
option domain-name-servers ns1.example.org, ns2.example.org;<br><br>
default-lease-time 600;<br>
max-lease-time 7200;<br><br>
log-facility local7;<br><br>
subnet 192.168.0.0 netmask 255.255.255.0 {<br>
&nbsp;&nbsp;&nbsp;range 192.168.0.1 192.168.0.254;<br>
&nbsp;&nbsp;&nbsp;filename "pxelinux.0";<br>
&nbsp;&nbsp;&nbsp;next-server 192.168.0.2;<br>
&nbsp;&nbsp;&nbsp;option subnet-mask 255.255.255.0;<br>
&nbsp;&nbsp;&nbsp;option broadcast-address 192.168.0.255;<br>
&nbsp;&nbsp;&nbsp;option routers 192.168.0.1;<br>
}<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#262" class="lnkocn">262</a></label>
  <h6 class="norm" id="262"><a name="262"></a>
    <a name="c4.8.2" ></a><a name="h4.8.2" ></a>4.8.2 TFTP サーバ
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#263" class="lnkocn">263</a></label>
  <p class="i0" id="263">
    これはカーネルと初期RAMディスクをシステム実行時に提供します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#264" class="lnkocn">264</a></label>
  <p class="i0" id="264">
    <i>tftpd-hpa</i> パッケージをインストールすべきです。これはルートディレクトリ、通常 <tt>/srv/tftp</tt> 内にある全ファイルを提供できます。<tt>/srv/debian-live/tftpboot</tt> 内にあるファイルを提供させるには root で
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#265" class="lnkocn">265</a></label>
  <p class="code" id="265">
    # dpkg-reconfigure -plow tftpd-hpa<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#266" class="lnkocn">266</a></label>
  <p class="i0" id="266">
    を実行し、tftp サーバの新しいディレクトリについて聞かれたら回答します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#267" class="lnkocn">267</a></label>
  <h6 class="norm" id="267"><a name="267"></a>
    <a name="c4.8.3" ></a><a name="h4.8.3" ></a>4.8.3 NFSサーバ
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#268" class="lnkocn">268</a></label>
  <p class="i0" id="268">
    ゲストコンピュータが Linux カーネルをダウンロード、ブートして initrd を読み込むと、NFSサーバ経由で Live ファイルシステムのイメージをマウントしようとします。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#269" class="lnkocn">269</a></label>
  <p class="i0" id="269">
    <i>nfs-kernel-server</i> パッケージをインストールする必要があります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#270" class="lnkocn">270</a></label>
  <p class="i0" id="270">
    それから <tt>/etc/exports</tt> に
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#271" class="lnkocn">271</a></label>
  <p class="code" id="271">
    /srv/debian-live *(ro,async,no_root_squash,no_subtree_check)<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#272" class="lnkocn">272</a></label>
  <p class="i0" id="272">
    のような行を追記してファイルシステムのイメージをNFS経由で利用できるようにし、この新しいエクスポートについてNFSサーバに知らせます:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#273" class="lnkocn">273</a></label>
  <p class="code" id="273">
    # exportfs -rv<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#274" class="lnkocn">274</a></label>
  <p class="i0" id="274">
    この3つのサービスの設定にはやや注意が必要かもしれません。全て協調して機能させるまでには忍耐がいくらか必要かもしれません。さらなる情報については ‹<a href="http://www.syslinux.org/wiki/index.php/PXELINUX" target="_top">http://www.syslinux.org/wiki/index.php/PXELINUX</a>› にある syslinux wiki や ‹<a href="http://d-i.alioth.debian.org/manual/ja.i386/ch04s05.html" target="_top">http://d-i.alioth.debian.org/manual/ja.i386/ch04s05.html</a>› にある Debian インストーラマニュアルの TFTP ネットブート節を見てください。方法はとても似ているので手助けになるかもしれません。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#275" class="lnkocn">275</a></label>
  <h6 class="norm" id="275"><a name="275"></a>
    <a name="c4.8.4" ></a><a name="h4.8.4" ></a>4.8.4 ネットワーク経由のブートをテストする方法
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#276" class="lnkocn">276</a></label>
  <p class="i0" id="276">
    Netboot イメージの作成は <i>live-build</i> により簡単になりましたが、イメージを実際のマシンでテストするのは本当に時間がかかるものとなるかもしれません。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#277" class="lnkocn">277</a></label>
  <p class="i0" id="277">
    日常を楽にするために仮想化を利用できます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#278" class="lnkocn">278</a></label>
  <h6 class="norm" id="278"><a name="278"></a>
    <a name="c4.8.5" ></a><a name="h4.8.5" ></a>4.8.5 Qemu
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#279" class="lnkocn">279</a></label>
  <ul>
  <li class="bullet" id="279">
    <i>qemu</i>、<i>bridge-utils</i>、<i>sudo</i> をインストールします。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#280" class="lnkocn">280</a></label>
  <p class="i0" id="280">
    <tt>/etc/qemu-ifup</tt> を編集します:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#281" class="lnkocn">281</a></label>
  <p class="code" id="281">
    #!/bin/sh<br>
sudo -p "Password for $0:" /sbin/ifconfig $1 172.20.0.1<br>
echo "Executing /etc/qemu-ifup"<br>
echo "Bringing up $1 for bridged mode..."<br>
sudo /sbin/ifconfig $1 0.0.0.0 promisc up<br>
echo "Adding $1 to br0..."<br>
sudo /usr/sbin/brctl addif br0 $1<br>
sleep 2<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#282" class="lnkocn">282</a></label>
  <p class="i0" id="282">
    <tt>grub-floppy-netboot</tt> を取得またはビルドします。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#283" class="lnkocn">283</a></label>
  <p class="i0" id="283">
    「<tt>-net nic,vlan=0 -net tap,vlan=0,ifname=tun0</tt>」を引数にして <tt>qemu</tt> を実行します
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#284" class="lnkocn">284</a></label>
  <h5 class="norm" id="284"><a name="284"></a>
    <a name="h4.9" ></a><a name="webbooting" ></a>4.9 ウェブブート
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#285" class="lnkocn">285</a></label>
  <p class="i0" id="285">
    ウェブブートは手段としてインターネットを使い Live システムをブートするための便利な方法です。ウェブブートの要件はとても少なくなっています。ある言い方をすれば必要なのはブートローダと初期RAMディスク、カーネルを収録したメディアです。別の言い方をすれば必要なのはファイルシステムを収録する squashfs ファイルを置くウェブサーバです。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#286" class="lnkocn">286</a></label>
  <h6 class="norm" id="286"><a name="286"></a>
    <a name="c4.9.1" ></a><a name="h4.9.1" ></a>4.9.1 ウェブブートファイルの取得
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#287" class="lnkocn">287</a></label>
  <p class="i0" id="287">
    いつものように、イメージを自分でビルドすることも、プロジェクトのホームページ ‹<a href="http://debian-live.alioth.debian.org/" target="_top">http://debian-live.alioth.debian.org/</a>› から取得できるビルド済みファイルを利用することも可能です。自身の必要に応じて微調整ができるまでの初期テストにはビルド済みイメージの利用が手軽でしょう。Live イメージのビルド後ならウェブブートに必要なファイルは <tt>binary/live/</tt> 下のビルドディレクトリで見つけられるでしょう。ファイルは <tt>vmlinuz</tt>、<tt>initrd.img</tt>、<tt>filesystem.squashfs</tt> と呼ばれます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#288" class="lnkocn">288</a></label>
  <p class="i0" id="288">
    必要なファイルを既に存在するISOイメージから抽出することも可能です。そのためには以下のようにしてそのイメージをループバックマウントします:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#289" class="lnkocn">289</a></label>
  <p class="code" id="289">
    # mount -o loop image.iso /mnt<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#290" class="lnkocn">290</a></label>
  <p class="i0" id="290">
    ファイルは <tt>live/</tt> ディレクトリで見つけられます。この例の場合は <tt>/mnt/live/</tt> になります。この方法にはそのイメージをマウントするのに root になる必要があるという欠点があります。しかしこれには簡単に定型処理、つまり自動化できるという利点があります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#291" class="lnkocn">291</a></label>
  <p class="i0" id="291">
    しかし疑いようもなく、ISOイメージからファイルを抽出すると同時にウェブサーバにアップロードするのに最も簡単なのはミッドナイトコマンダーや <i>mc</i> の利用でしょう。<i>genisoimage</i> パッケージをインストールしていれば2ペインのファイルマネージャによりISOファイルの内容を確認しながらもう1つのペインではftp経由でファイルをアップロードできます。この方法は手作業の介入が必要とはなりますが root 権限を必要としません。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#292" class="lnkocn">292</a></label>
  <h6 class="norm" id="292"><a name="292"></a>
    <a name="c4.9.2" ></a><a name="h4.9.2" ></a>4.9.2 ウェブブートイメージの起動
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#293" class="lnkocn">293</a></label>
  <p class="i0" id="293">
    ユーザによってはウェブブートのテストに仮想化を好みますがここでは以下の活用事例に合わせて実際のハードウェアについて言及します。あくまで例だと思ってください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#294" class="lnkocn">294</a></label>
  <p class="i0" id="294">
    ウェブブートイメージの起動は上記で示した構成要素、つまり <tt>vmlinuz</tt> と <tt>initrd.img</tt> をUSBメモリの <tt>live/</tt> ディレクトリ以下に書き込み、ブートローダとして syslinux をインストールすれば十分です。そしてUSBメモリからブートしてブートオプションに <tt>fetch=URL/ファイル/への/パス</tt> を入力します。<i>live-boot</i> は squashfs ファイルを取得してRAMに格納します。こうして、ダウンロードした圧縮ファイルシステムを普通の Live システムとして使えるようになります。例えば:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#295" class="lnkocn">295</a></label>
  <p class="code" id="295">
    append boot=live components fetch=http://192.168.2.50/images/webboot/filesystem.squashfs<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#296" class="lnkocn">296</a></label>
  <p class="i0" id="296">
    <b>活用事例:</b> ウェブサーバがあり、squashfs ファイルが2つ、1つは例えば gnome のようなデスクトップ環境一式を収録したものともう1つは標準のものが置かれているとします。あるマシンでグラフィカル環境が必要であればUSBメモリを差し込んで gnome 用イメージをウェブブートできます。後者のイメージに収録されている何かのツールが別のマシン等で必要になった場合は標準的なイメージをウェブブートできます。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#297" class="lnkocn">297</a></label>
  <h1 class="norm" id="297"><a name="297"></a>
    ツールの概要
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#298" class="lnkocn">298</a></label>
  <h4 class="norm" id="298"><a name="298"></a>
    <a name="h5" ></a><a name="" ></a><a name="overview-of-tools" ></a>5. ツールの概要
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a href="#299" class="lnkocn">299</a></label>
  <p class="i0" id="299">
    この章では Live システムのビルドに使う3つの主要ツール <i>live-build</i>、<i>live-boot</i>、<i>live-config</i> の概要をまとめています。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#300" class="lnkocn">300</a></label>
  <h5 class="norm" id="300"><a name="300"></a>
    <a name="h5.1" ></a><a name="live-build" ></a>5.1 live-build パッケージ
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#301" class="lnkocn">301</a></label>
  <p class="i0" id="301">
    <i>live-build</i> は Live システムをビルドするためのスクリプト集です。収録されているスクリプトは「コマンド」としても言及されています。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#302" class="lnkocn">302</a></label>
  <p class="i0" id="302">
    <i>live-build</i> の背景となる考え方は、設定ディレクトリを使って Live イメージのビルドに関するあらゆる面を完全に自動化、独自化するフレームワークにしようということです。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#303" class="lnkocn">303</a></label>
  <p class="i0" id="303">
    その多くの概念は <i>debhelper</i> で Debian パッケージをビルドするのと同様です:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#304" class="lnkocn">304</a></label>
  <ul>
  <li class="bullet" id="304">
    スクリプトには操作を制御するために中心となる位置があります。<i>debhelper</i> ではパッケージツリーの <tt>debian/</tt> サブディレクトリがこれにあたります。例えば dh_install は、他にもありますが、<tt>debian/install</tt> というファイルを探して特定のバイナリパッケージに収録すべきファイルを判断します。ほぼ同様に <i>live-build</i> は設定全体を <tt>config/</tt> サブディレクトリ以下に保管します。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#305" class="lnkocn">305</a></label>
  <ul>
  <li class="bullet" id="305">
    スクリプトは独立しています - つまり、各コマンドの実行は常に安全です。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#306" class="lnkocn">306</a></label>
  <p class="i0" id="306">
    <i>debhelper</i> とは異なり、<i>live-build</i> は設定ディレクトリの骨格を生成するツールを提供しています。これは <i>dh-make</i> 等のツールに似ていると言っても良いでしょう。こういったツールのさらなる情報については、この節の残りで最も重要な4つのコマンドについて触れているので続きを読んでください。各コマンドで先行している <tt>lb</tt> は <i>live-build</i> コマンドのラッパーであることに注意してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#307" class="lnkocn">307</a></label>
  <ul>
  <li class="bullet" id="307">
    <b>lb config</b>: Live システム設定ディレクトリの初期化を担当します。さらなる情報については  <a href="#lb-config">lb config コマンド</a>  を見てください。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#308" class="lnkocn">308</a></label>
  <ul>
  <li class="bullet" id="308">
    <b>lb build</b>: Live システムのビルドの開始を担当します。さらなる情報については  <a href="#lb-build">lb build</a>  を見てください。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#309" class="lnkocn">309</a></label>
  <ul>
  <li class="bullet" id="309">
    <b>lb clean</b>: Live システムでビルドされた部分の掃除を担当します。さらなる情報については  <a href="#lb-clean">lb clean コマンド</a>  を見てください。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#310" class="lnkocn">310</a></label>
  <h6 class="norm" id="310"><a name="310"></a>
    <a name="h5.1.1" ></a><a name="lb-config" ></a>5.1.1 <tt>lb config</tt> コマンド
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#311" class="lnkocn">311</a></label>
  <p class="i0" id="311">
    <a href="#live-build">live-build</a>  で説明しているように、<i>live-build</i> を構成するスクリプトは <tt>config/</tt> という名の単一のディレクトリから <tt>source</tt> コマンドで指定された設定を読み込みます。このディレクトリを手作業により構成するのは時間がかかる上に誤りの元となりやすいため、<tt>lb config</tt> コマンドを使って初期設定ツリーの骨格を作成できるようになっています。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#312" class="lnkocn">312</a></label>
  <p class="i0" id="312">
    引数を付けずに <tt>lb config</tt> を実行すると <tt>config/</tt> サブディレクトリを作成してデフォルト設定がいくらか指定された設定ファイルを配置し、<tt>auto/</tt> 及び <tt>local/</tt> という骨格となる2つのツリーを作成します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#313" class="lnkocn">313</a></label>
  <p class="code" id="313">
    $ lb config<br>
[2015-01-06 19:25:58] lb config<br>
P: Creating config tree for a debian/stretch/i386 system<br>
P: Symlinking hooks...<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#314" class="lnkocn">314</a></label>
  <p class="i0" id="314">
    とても基本的なイメージを必要とするユーザや後で <tt>auto/config</tt> を使ってもっと全面的な設定を行おうと考えている場合は <tt>lb config</tt> を引数無しで使うのが適切でしょう (詳細は <a href="#managing-a-configuration">設定管理</a>  参照)。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#315" class="lnkocn">315</a></label>
  <p class="i0" id="315">
    通常はオプションをいくらか指定します。例えばイメージのビルド時に利用するパッケージマネージャーを指定する場合:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#316" class="lnkocn">316</a></label>
  <p class="code" id="316">
    $ lb config --apt aptitude<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#317" class="lnkocn">317</a></label>
  <p class="i0" id="317">
    多数のオプションを指定することもできます:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#318" class="lnkocn">318</a></label>
  <p class="code" id="318">
    $ lb config --binary-images netboot --bootappend-live "boot=live components hostname=live-host username=live-user" ...<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#319" class="lnkocn">319</a></label>
  <p class="i0" id="319">
    利用可能なオプションの全容は <tt>lb_config</tt> man ページにあります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#320" class="lnkocn">320</a></label>
  <h6 class="norm" id="320"><a name="320"></a>
    <a name="h5.1.2" ></a><a name="lb-build" ></a>5.1.2 <tt>lb build</tt> コマンド
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#321" class="lnkocn">321</a></label>
  <p class="i0" id="321">
    <tt>lb build</tt> コマンドは <tt>config/</tt> ディレクトリから設定を読み込みます。それから Live システムのビルドに必要な低レベルコマンドを実行します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#322" class="lnkocn">322</a></label>
  <h6 class="norm" id="322"><a name="322"></a>
    <a name="h5.1.3" ></a><a name="lb-clean" ></a>5.1.3 <tt>lb clean</tt> コマンド
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#323" class="lnkocn">323</a></label>
  <p class="i0" id="323">
    ビルドによる様々な生成物を削除するのは <tt>lb clean</tt> コマンドの役目で、それによりその後のビルドがきれいな状態から始められるようになります。デフォルトで <tt>chroot</tt>、<tt>バイナリ</tt>、<tt>ソース</tt>の段階が対象となりますが、キャッシュはそのまま残されます。また、個々の段階を個別に掃除することもできます。例えばバイナリ段階にのみ影響のある変更を加えた場合は新しいバイナリをビルドする前に <tt>lb clean --binary</tt> を実行します。変更がパッケージ収集やパッケージのキャッシュを無効化するようなもの、例えば <tt>--mode</tt> や <tt>--architecture</tt>、<tt>--bootstrap</tt> を変更した場合は <tt>lb clean --purge</tt> を実行しないといけません。オプションの全容については <tt>lb_clean</tt> man ページを見てください。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#324" class="lnkocn">324</a></label>
  <h5 class="norm" id="324"><a name="324"></a>
    <a name="h5.2" ></a><a name="live-boot" ></a>5.2 live-boot パッケージ
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#325" class="lnkocn">325</a></label>
  <p class="i0" id="325">
    <i>live-boot</i> は <i>live-build</i> 等により作成される Live システムのブート時に利用する initramfs の生成に利用する <i>initramfs-tools</i> のフックを提供するスクリプト集です。Live システムのISOやネットワーク経由のブートに利用するtarアーカイブ、USBメモリ向けイメージも対象です。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#326" class="lnkocn">326</a></label>
  <p class="i0" id="326">
    ブート時にはルートファイルシステム (squashfs のような圧縮ファイルシステムのイメージであることが多い) が保存されている <tt>/live/</tt> ディレクトリを収録する読み取り専用メディアを探します。見つかった場合は Debian 類似システムでそのメディアからブートできるように、aufs を使って書き込み可能な環境を作成します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#327" class="lnkocn">327</a></label>
  <p class="i0" id="327">
    Debian の初期RAMファイルシステムについてのさらなる情報は ‹<a href="http://kernel-handbook.alioth.debian.org/" target="_top">http://kernel-handbook.alioth.debian.org/</a>› にある Debian Linux カーネルハンドブックの initramfs の章にあります。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#328" class="lnkocn">328</a></label>
  <h5 class="norm" id="328"><a name="328"></a>
    <a name="h5.3" ></a><a name="live-config" ></a>5.3 live-config パッケージ
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#329" class="lnkocn">329</a></label>
  <p class="i0" id="329">
    <i>live-config</i> はブート時に <i>live-boot</i> の後に実行して Live システムを自動的に設定するためのスクリプト集で構成されています。ホスト名やロケール、タイムゾーンの設定や live ユーザの作成、cron ジョブの抑制、live ユーザの自動ログイン等のタスクを処理します。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#330" class="lnkocn">330</a></label>
  <h1 class="norm" id="330"><a name="330"></a>
    設定の管理
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#331" class="lnkocn">331</a></label>
  <h4 class="norm" id="331"><a name="331"></a>
    <a name="h6" ></a><a name="" ></a><a name="managing-a-configuration" ></a>6. 設定の管理
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a href="#332" class="lnkocn">332</a></label>
  <p class="i0" id="332">
    この章では <i>live-build</i> ソフトウェアと Live イメージ自体の両方について、最初の作成から継続的な改訂、継続的なリリースを通して Live 設定を管理する方法を説明します。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#333" class="lnkocn">333</a></label>
  <h5 class="norm" id="333"><a name="333"></a>
    <a name="c6.1" ></a><a name="h6.1" ></a>6.1 設定変更への対応
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#334" class="lnkocn">334</a></label>
  <p class="i0" id="334">
    Live 設定が最初の試行で全て上手くいくのはまれです。一度だけビルドするのならコマンドラインから <tt>lb config</tt> オプションを渡すだけで済むかもしれませんが、満足のいくまでオプションを改訂してビルドを繰り返す方が標準的です。そうした変更を支援するには設定を確実に一貫した状態に保つ自動化スクリプトが必要となるでしょう。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#335" class="lnkocn">335</a></label>
  <h6 class="norm" id="335"><a name="335"></a>
    <a name="c6.1.1" ></a><a name="h6.1.1" ></a>6.1.1 自動化スクリプトを使う理由は? それは何をするもの?
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#336" class="lnkocn">336</a></label>
  <p class="i0" id="336">
    <tt>lb config</tt> コマンドに渡されたオプションはされている他の多数のオプションと共にデフォルト値として <tt>config/*</tt> ファイルに保管されます。その後に <tt>lb config</tt> を実行した場合最初のオプションを基にしてデフォルトのオプションはリセットされません。そのため、例えば <tt>--binary-images</tt> に新しい値を指定して再び <tt>lb config</tt> を実行した場合以前指定していた種類のイメージに依存しているオプションのデフォルト値は新しく指定した種類のイメージでは使えなくなるかもしれません。そのファイルが読み取りや変更の対象からも外れているかもしれません。これを使うと100以上のオプションの値を保管するため、実際に指定されたオプションを誰でも確認できます。最後に、<tt>lb config</tt> を実行した後に <i>live-build</i> をアップグレードして、オプションの名前が変更されていた場合、<tt>config/*</tt> には古いオプションが有効ではなくなった後に名付けられた変数も収録されます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#337" class="lnkocn">337</a></label>
  <p class="i0" id="337">
    以上に挙げた理由により <tt>auto/*</tt> スクリプトにより楽が出来るようになります。このスクリプト群は <tt>lb config</tt> や <tt>lb build</tt>、<tt>lb clean</tt> コマンドの単純なラッパーで、設定の管理を支援するように設計されています。<tt>auto/config</tt> スクリプトは <tt>lb config</tt> コマンドと希望したオプションを全て保管し、<tt>auto/clean</tt> スクリプトは設定用変数値を収録するファイルを削除し、<tt>auto/build</tt> スクリプトは各ビルドの <tt>build.log</tt> を維持します。このスクリプト群はそれぞれ対応する <tt>lb</tt> コマンドの実行時に自動的に実行されます。このスクリプト群を利用することで設定が見やすくなり、改訂を越えて内部的に一貫した状態が維持されます。また、更新された文書を読んだ後に <i>live-build</i> をアップグレードすれば変更の必要があるオプションを識別、修正するのははるかに容易になるでしょう。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#338" class="lnkocn">338</a></label>
  <h6 class="norm" id="338"><a name="338"></a>
    <a name="c6.1.2" ></a><a name="h6.1.2" ></a>6.1.2 自動化スクリプトの使用例
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#339" class="lnkocn">339</a></label>
  <p class="i0" id="339">
    便宜のため <i>live-build</i> には例の自動化シェルスクリプトが付属していてコピーして編集できるようになっています。デフォルトの設定を新しく作成してから例をコピーしましょう:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#340" class="lnkocn">340</a></label>
  <p class="code" id="340">
    $ mkdir mylive &amp;&amp; cd mylive &amp;&amp; lb config<br>
$ mkdir auto<br>
$ cp /usr/share/doc/live-build/examples/auto/* auto/<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#341" class="lnkocn">341</a></label>
  <p class="i0" id="341">
    <tt>auto/config</tt> を編集して、希望に合わせてオプションを追加します。例えば:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#342" class="lnkocn">342</a></label>
  <p class="code" id="342">
    #!/bin/sh<br>
lb config noauto \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--architectures i386 \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--linux-flavours 686-pae \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--binary-images hdd \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--mirror-bootstrap http://ftp.ch.debian.org/debian/ \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--mirror-binary http://ftp.ch.debian.org/debian/ \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"${@}"<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#343" class="lnkocn">343</a></label>
  <p class="i0" id="343">
    これで、<tt>lb config</tt> を使うたびに <tt>auto/config</tt> がそのオプションを基にして設定をリセットします。オプションを変更したいときには <tt>lb config</tt> に渡すのではなくこのファイルに書かれているものを編集します。<tt>lb clean</tt> を使うと <tt>auto/clean</tt> は <tt>config/*</tt> ファイルを、ビルドした他のものとあわせて削除します。最後に、<tt>lb build</tt> を使うとビルド時のログは <tt>auto/build</tt> により <tt>build.log</tt> に書かれます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#344" class="lnkocn">344</a></label>
  <p class="i0" id="344">
    <b>注意:</b> ここで特別な <tt>noauto</tt> パラメータを使い、<tt>auto/config</tt> を別に呼び出すことのないようにして無限再帰を回避しています。編集時に不注意で削除することのないようにしてください。また、読みやすくするために上記の例で示したように <tt>lb config</tt> コマンドを複数行に分割する場合は次の行に続く各行末のバックスラッシュ (\) を忘れることのないようにしてください。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#345" class="lnkocn">345</a></label>
  <h5 class="norm" id="345"><a name="345"></a>
    <a name="h6.2" ></a><a name="clone-configuration-via-git" ></a>6.2 Git経由で公開されている設定の複製
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#346" class="lnkocn">346</a></label>
  <p class="i0" id="346">
    <tt>lb config --config</tt> オプションを使って Live システムの設定を収録しているGitリポジトリを複製します。Live システムプロジェクトにより保守されている設定を基にしたい場合は ‹<a href="http://http://anonscm.debian.org/cgit/debian-live/" target="_top">http://http://anonscm.debian.org/cgit/debian-live/</a>› の <tt>Packages</tt> カテゴリーの <tt>live-images</tt> という名前のリポジトリに目を通してみてください。このリポジトリには Live システムの  <a href="#downloading-prebuilt-images">ビルド済みイメージ</a>  用の設定を収録しています。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#347" class="lnkocn">347</a></label>
  <p class="i0" id="347">
    例えば標準的なイメージをビルドするには <tt>live-images</tt> リポジトリを使って
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#348" class="lnkocn">348</a></label>
  <p class="code" id="348">
    $ mkdir live-images &amp;&amp; cd live-images<br>
$ lb config --config git://http://anonscm.debian.org/git/debian-live/live-images.git <br>
$ cd images/standard<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#349" class="lnkocn">349</a></label>
  <p class="i0" id="349">
    のようにし、必要に応じて <tt>auto/config</tt> やその他 <tt>config</tt> ツリーにあるものを必要なだけ編集します。例えば非公式の non-free ビルド済みイメージは単純に <tt>--archive-areas "main contrib non-free"</tt> を追加することで作成されます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#350" class="lnkocn">350</a></label>
  <p class="i0" id="350">
    オプションとしてGit設定でショートカットを定義することもできます。<tt>${HOME}/.gitconfig</tt> に
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#351" class="lnkocn">351</a></label>
  <p class="code" id="351">
    [url "git://http://anonscm.debian.org/git/debian-live/"] <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;insteadOf = lso:<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#352" class="lnkocn">352</a></label>
  <p class="i0" id="352">
    を追加すると <tt>debian-live.alioth.debian.org</tt> にあるgitリポジトリのアドレスを指定する必要があるところで <tt>lso:</tt> を使えるようになります。さらにオプションで末尾の <tt>.git</tt> も省くと、この設定を使って新しいイメージの作成を始めるのはこれだけ簡単になります:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#353" class="lnkocn">353</a></label>
  <p class="code" id="353">
    $ lb config --config lso:live-images<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#354" class="lnkocn">354</a></label>
  <p class="i0" id="354">
    <tt>live-images</tt> リポジトリ全体を複製すると数種類のイメージの設定を取得します。最初のイメージが出来上がってから異なるイメージをビルドしたい場合は別のディレクトリに移動して繰り返し、必要に応じて変更を加えてください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#355" class="lnkocn">355</a></label>
  <p class="i0" id="355">
    どの場合も、イメージのビルド <tt>lb build</tt> は毎回スーパーユーザで行う必要があることを覚えておいてください。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#356" class="lnkocn">356</a></label>
  <h1 class="norm" id="356"><a name="356"></a>
    収録内容の独自化
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#357" class="lnkocn">357</a></label>
  <h4 class="norm" id="357"><a name="357"></a>
    <a name="h7" ></a><a name="" ></a><a name="customization-overview" ></a>7. 独自化の概要
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a href="#358" class="lnkocn">358</a></label>
  <p class="i0" id="358">
    この章では Live システムを独自化できる様々な方法について概要を示します。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#359" class="lnkocn">359</a></label>
  <h5 class="norm" id="359"><a name="359"></a>
    <a name="c7.1" ></a><a name="h7.1" ></a>7.1 ビルド時とブート時の設定
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#360" class="lnkocn">360</a></label>
  <p class="i0" id="360">
    Live システムの設定オプションはビルド時に適用されるビルド時オプションとブート時に適用されるブート時オプションとに分けられます。ブート時オプションはさらに、<i>live-boot</i> パッケージにより適用され、ブートの早い段階で起きるものと <i>live-config</i> パッケージにより適用され、ブートの遅い段階で起きるものとに分けられます。ブート時オプションはどれも、ユーザがブートプロンプトで指定することで変更できます。イメージは、デフォルトのブートパラメータを指定してビルドし、デフォルト値を全て適応する場合オプションをユーザが何も指定せずに普通に Live システムを直接ブートするようにもできます。特に、<tt>lb --bootappend-live</tt> への引数は設定の維持やキーボードレイアウト、タイムゾーン等、Live システムのカーネルコマンドラインオプションのデフォルト値で構成されます。例については <a href="#customizing-locale-and-language">ロケールと言語の独自化</a>  を見てください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#361" class="lnkocn">361</a></label>
  <p class="i0" id="361">
    ビルド時設定オプションは <tt>lb config</tt> の man ページで説明されています。ブート時オプションは <i>live-boot</i> と <i>live-config</i> の man ページで説明されています。<i>live-boot</i> 及び <i>live-config</i> パッケージはビルドする Live システム内にインストールされますが、設定作業時に参照しやすいようにビルドシステムにもインストールすることを勧めます。収録されているスクリプトはどれも、そのシステムが Live システムとして設定されていないと実行されないため、ビルドシステムへのインストールは安全です。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#362" class="lnkocn">362</a></label>
  <h5 class="norm" id="362"><a name="362"></a>
    <a name="h7.2" ></a><a name="stages-of-the-build" ></a>7.2 ビルド段階
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#363" class="lnkocn">363</a></label>
  <p class="i0" id="363">
    ビルドプロセスは段階ごとに分けられ、様々な独自化がそれぞれ順に適用されます。実行の最初の段階は*{パッケージ収集}*段階です。この初期段階では chroot ディレクトリを作成して Debian システムの骨子を構成するパッケージを集めます。引き続いて*{chroot}*段階があり、chroot ディレクトリの構成を完了させ、他の内容とともに設定に列挙されているパッケージを全て収集します。収録内容の独自化はほとんどがこの段階で起こります。Live イメージの準備の最終段階は*{バイナリ}*段階で、ブート可能なイメージをビルドします。chroot ディレクトリの内容を使って Live システムのルートファイルシステムを作成し、インストーラと 対象メディアの Live システムのファイルシステム外に配置する、他の追加の内容を全て収録します。Live イメージをビルドした後は、有効化されている場合はソースの tar アーカイブを*{ソース}*段階で作成します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#364" class="lnkocn">364</a></label>
  <p class="i0" id="364">
    各段階で、コマンドの適用には特定の順序があります。そのように配置することで、独自化を合理的に階層化できるようになります。例えば <b>chroot</b> 段階ではどのパッケージをインストールするよりも前に preseed が適用され、ローカルに収録したどのファイルをコピーするよりも前にパッケージをインストールし、フックはその後に、収録内容を全て配置してから実行されます。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#365" class="lnkocn">365</a></label>
  <h5 class="norm" id="365"><a name="365"></a>
    <a name="c7.3" ></a><a name="h7.3" ></a>7.3 ファイルによる lb config の補完
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#366" class="lnkocn">366</a></label>
  <p class="i0" id="366">
    <tt>lb config</tt> は設定の骨格を <tt>config/</tt> ディレクトリに作成しますが、目標を実現するには <tt>config/</tt> サブディレクトリ以下に追加のファイルを提供する必要があるかもしれません。設定のどこにファイルを置くかにより、Live システムのファイルシステムやバイナリイメージのファイルシステムにコピーされるか、コマンドラインオプションとして渡す方法では扱いにくいビルド時のシステム設定を提供することになります。独自のパッケージ一覧やアートワーク、あるいはビルド時またはブート時に実行するフックスクリプト等を収録し、debian-live は既にかなりの柔軟性がありますが、自身のコードでそれを後押しすることができます。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#367" class="lnkocn">367</a></label>
  <h5 class="norm" id="367"><a name="367"></a>
    <a name="c7.4" ></a><a name="h7.4" ></a>7.4 独自化タスク
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#368" class="lnkocn">368</a></label>
  <p class="i0" id="368">
    以下の章ではユーザがよく行う類の独自化タスクをほんの一部ですがまとめています:  <a href="#customizing-package-installation">インストールするパッケージの独自化</a>   <a href="#customizing-contents">収録内容の独自化</a>   <a href="#customizing-locale-and-language">ロケールと言語の独自化</a>
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#369" class="lnkocn">369</a></label>
  <h1 class="norm" id="369"><a name="369"></a>
    インストールするパッケージの独自化
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#370" class="lnkocn">370</a></label>
  <h4 class="norm" id="370"><a name="370"></a>
    <a name="h8" ></a><a name="" ></a><a name="customizing-package-installation" ></a>8. インストールするパッケージの独自化
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a href="#371" class="lnkocn">371</a></label>
  <p class="i0" id="371">
    恐らく Live システムの最も基本的な独自化はイメージに収録するパッケージの選択でしょう。この章では <i>live-build</i> でのパッケージのインストールの独自化のためのビルド時の様々なオプションを見ていきます。イメージへのインストールに利用可能なパッケージに関して最も影響が大きい選択はディストリビューションとアーカイブ領域です。まともなダウンロード速度を確保するため、近いディストリビューションミラーを選択してください。backports や experimental あるいは独自のパッケージのある自身専用のリポジトリを追加することもできます。また、ファイルを直接パッケージとして収録することもできます。特定のデスクトップや言語のパッケージ等、多数の関連パッケージを同時にインストールするメタパッケージを含め、パッケージ一覧は定義できます。最後に、ビルドでパッケージをインストールするときに <i>apt</i> や好みにより <i>aptitude</i> を制御するオプションもいくらかあります。プロキシを使っていたり、推奨パッケージのインストールを無効にして容量を節約したい、インストールするパッケージのバージョンをAPTのピン経由で制御する必要がある、等便利だと思う場面があるかもしれません。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#372" class="lnkocn">372</a></label>
  <h5 class="norm" id="372"><a name="372"></a>
    <a name="c8.1" ></a><a name="h8.1" ></a>8.1 パッケージソース
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#373" class="lnkocn">373</a></label>
  <h6 class="norm" id="373"><a name="373"></a>
    <a name="c8.1.1" ></a><a name="h8.1.1" ></a>8.1.1 ディストリビューション、アーカイブ領域とモード
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#374" class="lnkocn">374</a></label>
  <p class="i0" id="374">
    ディストリビューションの選択は Live イメージへの収録に利用できるパッケージに最も影響があります。コード名を指定してください。<b>buster</b> バージョンの <i>live-build</i> では <b>buster</b> がデフォルトになっています。現在アーカイブにある任意のディストリビューションをコード名で指定できます (詳細については <a href="#terms">条件</a>  参照)。<tt>--distribution</tt> オプションはアーカイブ内のパッケージソースに影響するだけでなく、サポートしている各ディストリビューションをビルドするのに必要な動作をするよう <i>live-build</i> に指示します。例えば*{unstable}*リリースであるsidに対してビルドする場合は:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#375" class="lnkocn">375</a></label>
  <p class="code" id="375">
    $ lb config --distribution sid<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#376" class="lnkocn">376</a></label>
  <p class="i0" id="376">
    のように指定します。ディストリビューションアーカイブ内で、アーカイブ領域はアーカイブを大きく分類します。Debian では#{main}#、<tt>contrib</tt>、<tt>non-free</tt> となっています。<tt>main</tt>に収録されるソフトウェアだけが Debian ディストリビューションの一部であり、したがってそれがデフォルトとなっています。複数指定することもできます。例えば
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#377" class="lnkocn">377</a></label>
  <p class="code" id="377">
    $ lb config --archive-areas "main contrib non-free"<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#378" class="lnkocn">378</a></label>
  <p class="i0" id="378">
    Debian 派生物によっては <tt>--mode</tt> オプションの実験的サポートが利用できるものがあります。このオプションは Debian または未知のシステムでビルドしている場合にのみデフォルトで <tt>debian</tt> がセットされています。サポートしている派生物のどれかで <tt>lb config</tt> を実行した場合のデフォルト値はその派生物のイメージを作成するための値になります。<tt>lb config</tt> を例えば <tt>ubuntu</tt> モードで実行すると Debian 向けに代えて指定された派生物のディストリビューション名やアーカイブ領域がサポートされます。このモードはその派生物に合うように <i>live-build</i> の挙動も変更します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#379" class="lnkocn">379</a></label>
  <p class="i0" id="379">
    <b>注意:</b> モードを追加したプロジェクトの設定については主にそのオプションのサポートユーザの担当です。Live システムプロジェクトは最善の努力をもって開発サポートを提供はしますが、私たちは派生物を自ら開発あるいはサポートしているわけではないため、あくまで派生物プロジェクトからのフィードバックが基になります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#380" class="lnkocn">380</a></label>
  <h6 class="norm" id="380"><a name="380"></a>
    <a name="c8.1.2" ></a><a name="h8.1.2" ></a>8.1.2 ディストリビューションミラー
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#381" class="lnkocn">381</a></label>
  <p class="i0" id="381">
    Debian アーカイブは世界中の巨大なネットワークミラーにまたがって複製されているため、各地域の人が最高のダウンロード速度を求めて近いミラーを選択できます。<tt>--mirror-*</tt> オプションはそれぞれ、ビルドの様々な段階でどのディストリビューションミラーを利用するのかを決定します。 <a href="#stages-of-the-build">ビルド段階</a>  の繰り返しになりますが*{パッケージ収集}*段階は最小限のシステムで <i>debootstrap</i> により最初に chroot を構成する段階、<b>chroot</b> 段階は chroot を使って Live システムのファイルシステムをビルドする段階です。ミラーはこの各段階ごとにそれぞれのオプションで指定するため*{バイナリ}*の段階では <tt>--mirror-binary</tt> や <tt>--mirror-binary-security</tt> の値が採用され、早い段階で使っていたミラーは置き換えられることになります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#382" class="lnkocn">382</a></label>
  <h6 class="norm" id="382"><a name="382"></a>
    <a name="h8.1.3" ></a><a name="distribution-mirrors-build-time" ></a>8.1.3 ビルド時に利用するディストリビューションミラー
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#383" class="lnkocn">383</a></label>
  <p class="i0" id="383">
    ビルド時に利用するディストリビューションミラーにローカルミラーを指定するには、<tt>--mirror-bootstrap</tt> と <tt>--mirror-chroot-security</tt> を以下のように指定するだけです。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#384" class="lnkocn">384</a></label>
  <p class="code" id="384">
    $ lb config --mirror-bootstrap http://localhost/debian/ \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--mirror-chroot-security http://localhost/debian-security/<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#385" class="lnkocn">385</a></label>
  <p class="i0" id="385">
    <tt>--mirror-chroot</tt> で指定する chroot ミラーのデフォルト値は <tt>--mirror-bootstrap</tt> の値になっています。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#386" class="lnkocn">386</a></label>
  <h6 class="norm" id="386"><a name="386"></a>
    <a name="c8.1.4" ></a><a name="h8.1.4" ></a>8.1.4 実行時に利用するディストリビューションミラー
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#387" class="lnkocn">387</a></label>
  <p class="i0" id="387">
    <tt>--mirror-binary*</tt> オプションはバイナリイメージ中のディストリビューションミラーの位置を決定します。このオプションは Live システムの実行中に追加のパッケージをインストールする際に利用できます。デフォルトは <tt>httpredir.debian.org</tt> で、利用できるミラーの中から特にユーザのIPアドレスを基にして地理的に近いミラーを選択するサービスになっています。これはその Live システムを利用するユーザにとって最適なミラーを予測できない場合に適切な選択です。以下の例に示すように自分専用の値を指定することもできます。この設定でビルドされたイメージはその"<tt>ミラー</tt>"が到達可能なネットワークにいるユーザにとってのみ適します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#388" class="lnkocn">388</a></label>
  <p class="code" id="388">
    $ lb config --mirror-binary http://mirror/debian/ \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--mirror-binary-security http://mirror/debian-security/ \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--mirror-binary-backports http://mirror/debian-backports/<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#389" class="lnkocn">389</a></label>
  <h6 class="norm" id="389"><a name="389"></a>
    <a name="h8.1.5" ></a><a name="additional-repositories" ></a>8.1.5 追加リポジトリ
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#390" class="lnkocn">390</a></label>
  <p class="i0" id="390">
    リポジトリをさらに追加して、利用できるパッケージ選択の幅を対象ディストリビューション以外にも広げられます。それにより、例えば backports や experimental、そして独自のパッケージを利用できます。追加のリポジトリを設定するには <tt>config/archives/your-repository.list.chroot</tt> や <tt>config/archives/your-repository.list.binary</tt> ファイルを作成します。<tt>--mirror-*</tt> オプションにより、イメージのビルドの <b>chroot</b> 段階や*{バイナリ}*段階、つまり Live システムの実行時に利用するリポジトリを決定できます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#391" class="lnkocn">391</a></label>
  <p class="i0" id="391">
    例えば <tt>config/archives/live.list.chroot</tt> により Live システムのビルド時に debian-live スナップショットリポジトリからパッケージをインストールできます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#392" class="lnkocn">392</a></label>
  <p class="code" id="392">
    deb http://debian-live.alioth.debian.org/ sid-snapshots main contrib non-free<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#393" class="lnkocn">393</a></label>
  <p class="i0" id="393">
    同一の行を <tt>config/archives/live.list.binary</tt> に追加すると、Live システムの <tt>/etc/apt/sources.list.d/</tt> ディレクトリにそのリポジトリが追加されます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#394" class="lnkocn">394</a></label>
  <p class="i0" id="394">
    こういったファイルが存在すれば自動的に処理されます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#395" class="lnkocn">395</a></label>
  <p class="i0" id="395">
    リポジトリの署名に利用されたGPG鍵を <tt>config/archives/your-repository.key.{binary,chroot}</tt> ファイルに置くこともできます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#396" class="lnkocn">396</a></label>
  <p class="i0" id="396">
    APTのピン止めが独自に必要な場合、APT設定行等を <tt>config/archives/your-repository.pref.{binary,chroot}</tt> ファイルに配置すれば自動的に Live システムの <tt>/etc/apt/preferences.d/</tt> ディレクトリに追加されます。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#397" class="lnkocn">397</a></label>
  <h5 class="norm" id="397"><a name="397"></a>
    <a name="h8.2" ></a><a name="choosing-packages-to-install" ></a>8.2 インストールするパッケージの選択
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#398" class="lnkocn">398</a></label>
  <p class="i0" id="398">
    There are a number of ways to choose which packages <i>live-build</i> will install in your image, covering a variety of different needs. You can simply name individual packages to install in a package list. You can also use metapackages in those lists, or select them using package control file fields. And finally, you may place package files in your <tt>config/</tt> tree, which is well suited to testing of new or experimental packages before they are available from a repository.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#399" class="lnkocn">399</a></label>
  <h6 class="norm" id="399"><a name="399"></a>
    <a name="h8.2.1" ></a><a name="package-lists" ></a>8.2.1 パッケージ一覧
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#400" class="lnkocn">400</a></label>
  <p class="i0" id="400">
    パッケージ一覧はインストールするパッケージを明確にする強力な方法です。一覧の構文では条件付けをサポートし、一覧の生成や複数の設定への適合を容易にしています。ビルド時にシェルヘルパーを使って一覧にパッケージ名を差し込むこともできます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#401" class="lnkocn">401</a></label>
  <p class="i0" id="401">
    <b>注意:</b>  存在しないパッケージが指定されたときの <i>live-build</i> の挙動はAPTユーティリティの選択により決定されます。さらなる詳細については  <a href="#choosing-apt-or-aptitude">apt と aptitude の選択</a>  を見てください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#402" class="lnkocn">402</a></label>
  <h6 class="norm" id="402"><a name="402"></a>
    <a name="h8.2.2" ></a><a name="using-metapackages" ></a>8.2.2 メタパッケージの利用
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#403" class="lnkocn">403</a></label>
  <p class="i0" id="403">
    パッケージ一覧を指示するもっとも簡単な方法は利用するディストリビューションで保守されているタスクのメタパッケージの利用です。例えば:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#404" class="lnkocn">404</a></label>
  <p class="code" id="404">
    $ lb config<br>
$ echo task-gnome-desktop &gt; config/package-lists/desktop.list.chroot<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#405" class="lnkocn">405</a></label>
  <p class="i0" id="405">
    <tt>live-build</tt> 2.x でサポートされていた、一覧を事前定義する古い方法はこれで置き換えられました。一覧の事前定義とは異なり、タスクのメタパッケージは Live システムプロジェクト特有のものではありません。タスクのメタパッケージはディストリビューション内の専門の作業グループにより保守されているため、要求したユーザに対して提供する最善のパッケージについて、各グループでの合意を反映したものとなっています。また、一覧を事前定義する置き換えられた方法よりはるかに幅広い事例にも対応できます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#406" class="lnkocn">406</a></label>
  <p class="i0" id="406">
    タスクのメタパッケージには全て先頭が <tt>task-</tt> から始まるため、利用できるものを簡単に判別する方法があります (名前が該当しても実際にはメタパッケージではないものもほんの一部とはいえありますが)。パッケージ名を前方一致で検索します:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#407" class="lnkocn">407</a></label>
  <p class="code" id="407">
    $ apt-cache search --names-only ^task-<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#408" class="lnkocn">408</a></label>
  <p class="i0" id="408">
    以上に加え、他に様々な目的を持ったメタパッケージを見つけられるでしょう。<tt>gnome-core</tt> のように他のもっと範囲の広いタスクパッケージの一部を構成するものや、<tt>education-*</tt> メタパッケージのように Debian Pure Blend の中のある個々の専門分野に特化したものもあります。アーカイブにある全メタパッケージを列挙するには、<tt>debtags</tt> パッケージをインストールして <tt>role::metapackage</tt> タグの付けられたパッケージを全て列挙させます:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#409" class="lnkocn">409</a></label>
  <p class="code" id="409">
    $ debtags search role::metapackage<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#410" class="lnkocn">410</a></label>
  <h6 class="norm" id="410"><a name="410"></a>
    <a name="c8.2.3" ></a><a name="h8.2.3" ></a>8.2.3 ローカルパッケージ一覧
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#411" class="lnkocn">411</a></label>
  <p class="i0" id="411">
    列挙したものがメタパッケージであれ、個々のパッケージであれ、両方の組み合わせであれ、ローカルパッケージ一覧は全て <tt>config/package-lists/</tt> に保存されます。この一覧は複数利用できるため、うまい具合にこの一覧自体を組み込める設計になっています。例えばある一覧は特定のデスクトップ選択時向け、別の一覧は異なるデスクトップでも簡単に使えるような関連パッケージ群を、というようにできます。これにより、パッケージ群の異なる組み合わせを最小限の手間で試したり、あるいは異なる Live イメージプロジェクトで一覧を共有する、といったことが可能になります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#412" class="lnkocn">412</a></label>
  <p class="i0" id="412">
    このディレクトリに存在するパッケージ一覧は、処理対象とするためには後ろに <tt>.list</tt> を付ける必要があり、さらにその一覧をどの段階の対象とするのか示すためには <tt>.chroot</tt> や <tt>.binary</tt> をその後に追加します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#413" class="lnkocn">413</a></label>
  <p class="i0" id="413">
    <b>注意:</b> 対象とする段階の指定を追加しない場合、その一覧は両方の段階で利用されます。通常指定するのは <tt>.list.chroot</tt> で、この場合そのパッケージは Live ファイルシステムにのみインストールされ、メディア上に <tt>.deb</tt> の余計なコピーは置かれません。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#414" class="lnkocn">414</a></label>
  <h6 class="norm" id="414"><a name="414"></a>
    <a name="c8.2.4" ></a><a name="h8.2.4" ></a>8.2.4 ローカルバイナリパッケージ一覧
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#415" class="lnkocn">415</a></label>
  <p class="i0" id="415">
    バイナリ段階の一覧を作成する場合はファイルの末尾を <tt>.list.binary</tt> にして <tt>config/package-lists/</tt> に置きます。それにより指定したパッケージは Live ファイルシステムにはインストールされず、Live メディアの <tt>pool/</tt> 以下に収録されます。Live ではないインストーラでこういった一覧を標準的に利用しているものもあります。バイナリ段階で chroot 段階と同一の一覧を利用したい場合は上述したように末尾を <tt>.list</tt> とします。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#416" class="lnkocn">416</a></label>
  <h6 class="norm" id="416"><a name="416"></a>
    <a name="h8.2.5" ></a><a name="generated-package-lists" ></a>8.2.5 生成されたパッケージ一覧
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#417" class="lnkocn">417</a></label>
  <p class="i0" id="417">
    一覧の構成はスクリプトで生成するのが最善の方法だということもあります。感嘆符から始まる行は全て、そのコマンドがイメージのビルド後に chroot 内で実行されることを示します。例えばパッケージ一覧に <tt>! grep-aptavail -n -sPackage -FPriority standard | sort</tt> という行を書いておけば、<tt>Priority: standard</tt> で利用可能なパッケージをソートした一覧を生成できます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#418" class="lnkocn">418</a></label>
  <p class="i0" id="418">
    実際、パッケージの選択に <tt>grep-aptavail</tt> コマンド (<tt>dctrl-tools</tt> パッケージに収録) はとても有用なので、<tt>live-build</tt> では便宜のため <tt>Packages</tt> 補助スクリプトを提供しています。このスクリプトは引数を#{フィールド}#と#{パターン}#の2つ取ります。一覧を作成する例:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#419" class="lnkocn">419</a></label>
  <p class="code" id="419">
    $ lb config<br>
$ echo '! Packages Priority standard' &gt; config/package-lists/standard.list.chroot<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#420" class="lnkocn">420</a></label>
  <h6 class="norm" id="420"><a name="420"></a>
    <a name="c8.2.6" ></a><a name="h8.2.6" ></a>8.2.6 条件付き内部パッケージ一覧の利用
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#421" class="lnkocn">421</a></label>
  <p class="i0" id="421">
    <tt>config/*</tt> (<tt>LB_</tt> が先頭に付くものは除く) に保存された <i>live-build</i> の設定変数はどれもパッケージ一覧の条件文で利用できます。一般には <tt>lb config</tt> オプションを大文字に、ダッシュ文字をアンダースコアに変更したものになります。しかし実際に意味があるのは、パッケージ選択に関わるもの、例えば <tt>DISTRIBUTION</tt> や <tt>ARCHITECTURES</tt>、<tt>ARCHIVE_AREAS</tt> だけです。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#422" class="lnkocn">422</a></label>
  <p class="i0" id="422">
    例えば <tt>--architectures amd64</tt> が指定された場合に <tt>ia32-libs</tt> をインストールする場合:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#423" class="lnkocn">423</a></label>
  <p class="code" id="423">
    #if ARCHITECTURES amd64<br>
ia32-libs<br>
#endif<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#424" class="lnkocn">424</a></label>
  <p class="i0" id="424">
    任意の1つを条件の値とすることもできます。<tt>--architectures i386</tt> または <tt>--architectures amd64</tt> のどちらかが指定された場合に <i>memtest86+</i> をインストールする場合の例:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#425" class="lnkocn">425</a></label>
  <p class="code" id="425">
    #if ARCHITECTURES i386 amd64<br>
memtest86+<br>
#endif<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#426" class="lnkocn">426</a></label>
  <p class="i0" id="426">
    値を複数指定できる変数を条件にすることもできます。<tt>--archive-areas</tt> で <tt>contrib</tt> または <tt>non-free</tt> のどちらかが指定されている場合に <i>vrms</i> をインストールする場合の例:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#427" class="lnkocn">427</a></label>
  <p class="code" id="427">
    #if ARCHIVE_AREAS contrib non-free<br>
vrms<br>
#endif<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#428" class="lnkocn">428</a></label>
  <p class="i0" id="428">
    入り組んだ条件分岐はサポートしていません。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#429" class="lnkocn">429</a></label>
  <h6 class="norm" id="429"><a name="429"></a>
    <a name="c8.2.7" ></a><a name="h8.2.7" ></a>8.2.7 インストール時のパッケージの削除
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#430" class="lnkocn">430</a></label>
  <p class="i0" id="430">
    <tt>config/package-lists</tt> ディレクトリの末尾が <tt>.list.chroot_live</tt> や <tt>.list.chroot_install</tt> のファイルにパッケージを列挙できます。Live 用とインストール用の両方の一覧が存在する場合、<tt>.list.chroot_live</tt> に列挙されているパッケージは (ユーザがインストーラを利用している場合) インストール後にフックにより削除されます。<tt>.list.chroot_install</tt> に列挙されているパッケージは Live システムとインストールされたシステムの両方に存在することになります。これはインストーラ向けの特別な調整で、設定で <tt>--debian-installer live</tt> をセットしている場合や Live システム特有のパッケージをインストール時には削除したい場合に有用かもしれません。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#431" class="lnkocn">431</a></label>
  <h6 class="norm" id="431"><a name="431"></a>
    <a name="h8.2.8" ></a><a name="desktop-and-language-tasks" ></a>8.2.8 デスクトップ及び言語タスク
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#432" class="lnkocn">432</a></label>
  <p class="i0" id="432">
    デスクトップと言語のタスクは特別で、計画性や設定が追加で必要となります。Live イメージが Debian インストーライメージとは異なる点です。Debian インストーラでは、特定のデスクトップ環境向けに用意されたメディアでは対応するタスクは自動的にインストールされます。内部に <tt>gnome-desktop</tt> や <tt>kde-desktop</tt>、<tt>lxde-desktop</tt>、<tt>xfce-desktop</tt> タスクがあり、<tt>tasksel</tt> のメニューにはどれも出てきません。同様に言語向けタスクのメニュー項目はありませんが、インストール中にユーザが選択した言語が対応する言語タスクの選択に影響します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#433" class="lnkocn">433</a></label>
  <p class="i0" id="433">
    デスクトップ向け Live イメージ開発時には、イメージは通常動作するデスクトップを直接ブートし、デスクトップやデフォルト言語はどちらも Debian インストーラの場合のように実行時に選択するのではなくビルド時に決められています。これは Live イメージでデスクトップや言語を複数サポートしてユーザに選択の機会を与えるようにできないわけではなく、それが <i>live-build</i> のデフォルトの挙動ではないというだけです。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#434" class="lnkocn">434</a></label>
  <p class="i0" id="434">
    言語特有のフォントや入力メソッドにどのパッケージを収録するのか、といった規定は言語タスクにはないので、特定のパッケージを収録したい場合は設定で指定する必要があります。ドイツ語サポートを収録した GNOME デスクトップイメージの場合に収録するタスクのメタパッケージの例:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#435" class="lnkocn">435</a></label>
  <p class="code" id="435">
    $ lb config<br>
$ echo "task-gnome-desktop task-laptop" &gt;&gt; config/package-lists/my.list.chroot<br>
$ echo "task-german task-german-desktop task-german-gnome-desktop" &gt;&gt; config/package-lists/my.list.chroot<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#436" class="lnkocn">436</a></label>
  <h6 class="norm" id="436"><a name="436"></a>
    <a name="h8.2.9" ></a><a name="kernel-flavour-and-version" ></a>8.2.9 カーネルのフレーバー (種類) とバージョン
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#437" class="lnkocn">437</a></label>
  <p class="i0" id="437">
    アーキテクチャによっては、イメージに複数のカーネルをデフォルトで収録することができます。フレーバーは <tt>--linux-flavours</tt> オプションで選択できます。各フレーバーはデフォルトの短い <tt>linux-image</tt> に、イメージに収録される実際のカーネルパッケージに依存する各メタパッケージの名前を付加した形式になります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#438" class="lnkocn">438</a></label>
  <p class="i0" id="438">
    そうして、デフォルトで <tt>amd64</tt> アーキテクチャのイメージは <tt>linux-image-amd64</tt> のメタパッケージを収録し、<tt>i386</tt> アーキテクチャのイメージは <tt>linux-image-586</tt> メタパッケージを収録します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#439" class="lnkocn">439</a></label>
  <p class="i0" id="439">
    設定したアーカイブで複数バージョンのカーネルパッケージが利用できる場合、<tt>--linux-packages</tt> オプションでカーネルパッケージ名の前半部を指定できます。例えば <tt>amd64</tt> アーキテクチャのイメージをビルドする際にテスト用に experimental アーカイブを追加すると <tt>linux-image-3.18.0-trunk-amd64</tt> カーネルをインストールできます。そのイメージの設定例:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#440" class="lnkocn">440</a></label>
  <p class="code" id="440">
    $ lb config --linux-packages linux-image-3.18.0-trunk<br>
$ echo "deb http://ftp.debian.org/debian/ experimental main" &gt; config/archives/experimental.list.chroot<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#441" class="lnkocn">441</a></label>
  <h6 class="norm" id="441"><a name="441"></a>
    <a name="h8.2.10" ></a><a name="custom-kernels" ></a>8.2.10 独自のカーネル
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#442" class="lnkocn">442</a></label>
  <p class="i0" id="442">
    Debian パッケージ管理システムに組み入れられていれば、独自のカーネルを自分でビルド、収録できます。<i>live-build</i> システムは <tt>.deb</tt> パッケージでビルドされていないカーネルはサポートしていません。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#443" class="lnkocn">443</a></label>
  <p class="i0" id="443">
    自身のカーネルパッケージを配置するための適切で推奨する方法は <tt>kernel-handbook</tt> の指示に従うことです。パッケージ名のABIとフレーバーの部分を忘れずに適切に変更し、リポジトリに <tt>linux</tt> の完全なビルドとそれに該当する <tt>linux-latest</tt> パッケージを収録してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#444" class="lnkocn">444</a></label>
  <p class="i0" id="444">
    該当するメタパッケージ無しでカーネルパッケージをビルドしたい場合は、 <a href="#kernel-flavour-and-version">カーネルのフレーバー (種類) とバージョン</a>  で説明しているように <tt>--linux-packages</tt> でパッケージ名の適切な前半部を指定する必要があります。 <a href="#installing-modified-or-third-party-packages">変更したあるいはサードパーティ製パッケージのインストール</a>  で説明しているように、自身のリポジトリに独自のカーネルパッケージを収録する場合はそのようにするのが最善ですが、別の方法についても説明しています。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#445" class="lnkocn">445</a></label>
  <p class="i0" id="445">
    カーネルを独自化する方法はこの文書の対象範囲ではありません。とはいえ、設定が最低限満たさないといけない要件があります:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#446" class="lnkocn">446</a></label>
  <ul>
  <li class="bullet" id="446">
    初期RAMディスクを利用する。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#447" class="lnkocn">447</a></label>
  <ul>
  <li class="bullet" id="447">
    結合ファイルシステムモジュール (つまり通常は <tt>aufs</tt>) を収録する。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#448" class="lnkocn">448</a></label>
  <ul>
  <li class="bullet" id="448">
    自分の設定で必要とする他のファイルシステムモジュール (つまり通常は <tt>squashfs</tt>) があればそれを収録する。
  </li>
  </ul>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#449" class="lnkocn">449</a></label>
  <h5 class="norm" id="449"><a name="449"></a>
    <a name="h8.3" ></a><a name="installing-modified-or-third-party-packages" ></a>8.3 変更したあるいはサードパーティ製パッケージのインストール
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#450" class="lnkocn">450</a></label>
  <p class="i0" id="450">
    Live システムの哲学には反しますが、Debian リポジトリにあるバージョンのパッケージを改変して Live システムをビルドする必要に迫られることもあります。それは機能や言語、商標を変更あるいは追加するものであったり、既存のパッケージから望ましくない要素を削除するものであるかもしれません。同様に求める機能や独自開発の機能を追加するのに「サードパーティ製」パッケージを利用できます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#451" class="lnkocn">451</a></label>
  <p class="i0" id="451">
    この節では変更したパッケージのビルドや保守については対象としていません。Joachim Breitner さんの ‹<a href="http://www.joachim-breitner.de/blog/archives/282-How-to-fork-privately.html" target="_top">http://www.joachim-breitner.de/blog/archives/282-How-to-fork-privately.html</a>› にある「How to fork privately」に書かれている方法が該当するのかもしれませんが。求める機能を収録したパッケージの作成については ‹<a href="https://www.debian.org/doc/maint-guide/" target="_top">https://www.debian.org/doc/maint-guide/</a>› にある Debian 新メンテナーガイドその他で説明されています。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#452" class="lnkocn">452</a></label>
  <p class="i0" id="452">
    変更した独自のパッケージをインストールする方法は2つあります:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#453" class="lnkocn">453</a></label>
  <ul>
  <li class="bullet" id="453">
    <tt>packages.chroot</tt>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#454" class="lnkocn">454</a></label>
  <ul>
  <li class="bullet" id="454">
    独自APTリポジトリの利用
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#455" class="lnkocn">455</a></label>
  <p class="i0" id="455">
    <tt>packages.chroot</tt> を使う方法はより簡単に出来て「一度限りの」独自化には有用ですが欠点がいくつかあります。一方独自のAPTリポジトリを使う方法はその準備に時間がかかりまます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#456" class="lnkocn">456</a></label>
  <h6 class="norm" id="456"><a name="456"></a>
    <a name="c8.3.1" ></a><a name="h8.3.1" ></a>8.3.1 <tt>packages.chroot</tt> を利用した独自のパッケージのインストール
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#457" class="lnkocn">457</a></label>
  <p class="i0" id="457">
    独自化したパッケージをインストールするには、単に#{config/packages.chroot/}# ディレクトリにコピーします。このディレクトリ内に置かれたパッケージはビルドの際に Live システムに自動的にインストールされます - 他のどこかを指定する必要はありません。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#458" class="lnkocn">458</a></label>
  <p class="i0" id="458">
    パッケージ名は規定の命名規則に従わ*{ないといけません}*。それを簡単に行う方法は <tt>dpkg-name</tt> の利用です。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#459" class="lnkocn">459</a></label>
  <p class="i0" id="459">
    <tt>packages.chroot</tt> を利用した独自のパッケージのインストールには欠点があります:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#460" class="lnkocn">460</a></label>
  <ul>
  <li class="bullet" id="460">
    secure APT を利用することができません。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#461" class="lnkocn">461</a></label>
  <ul>
  <li class="bullet" id="461">
    <tt>config/packages.chroot/</tt> ディレクトリに適切なパッケージを全てインストールしないといけません。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#462" class="lnkocn">462</a></label>
  <ul>
  <li class="bullet" id="462">
    Live システムの設定をリビジョン管理するには適しません。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#463" class="lnkocn">463</a></label>
  <h6 class="norm" id="463"><a name="463"></a>
    <a name="c8.3.2" ></a><a name="h8.3.2" ></a>8.3.2 APTリポジトリを利用した独自パッケージのインストール
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#464" class="lnkocn">464</a></label>
  <p class="i0" id="464">
    <tt>packages.chroot</tt>  を使う場合とは異なり、独自のAPTリポジトリを使う場合は他のどこかでパッケージを指定する必要があります。詳細については <a href="#choosing-packages-to-install">インストールするパッケージの選択</a>  を見てください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#465" class="lnkocn">465</a></label>
  <p class="i0" id="465">
    独自のパッケージをインストールするためにAPTリポジトリを作成するのは不要な手間だと思うかもしれませんが、その基盤は変更したパッケージを後で更新する際に簡単に再利用できます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#466" class="lnkocn">466</a></label>
  <h6 class="norm" id="466"><a name="466"></a>
    <a name="c8.3.3" ></a><a name="h8.3.3" ></a>8.3.3 独自パッケージとAPT
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#467" class="lnkocn">467</a></label>
  <p class="i0" id="467">
    <i>live-build</i> は Live システムへのパッケージのインストールに全てAPTを利用するため、そのプログラムの挙動を引き継ぎます。関連する一例としては (デフォルト設定だと仮定して)、異なる2つのリポジトリでバージョン番号の異なるあるパッケージが利用可能な場合に、APTはバージョン番号の大きい方のパッケージをインストールに選択します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#468" class="lnkocn">468</a></label>
  <p class="i0" id="468">
    そのため、独自パッケージの <tt>debian/changeLog</tt> ファイルでバージョン番号を増加させ、公式の Debian リポジトリにあるものよりも変更したバージョンが確実にインストールされるようにすると良いでしょう。Live システムのAPTのピン設定を改変する方法もあります - さらなる情報については、 <a href="#apt-pinning">APTのピン止め</a>  を見てください。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#469" class="lnkocn">469</a></label>
  <h5 class="norm" id="469"><a name="469"></a>
    <a name="c8.4" ></a><a name="h8.4" ></a>8.4 ビルド時のAPT設定
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#470" class="lnkocn">470</a></label>
  <p class="i0" id="470">
    ビルド時だけに適用されるオプションを使ってAPTを設定できます (実行中の Live システムで利用されるAPTの設定は Live システムの内容による通常の、<tt>config/includes.chroot/</tt> で適切な設定を収録する) 方法により設定できます。オプションの全容については <tt>lb_config</tt> man ページの <tt>apt</tt> で始まるオプションを見てください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#471" class="lnkocn">471</a></label>
  <h6 class="norm" id="471"><a name="471"></a>
    <a name="h8.4.1" ></a><a name="choosing-apt-or-aptitude" ></a>8.4.1 apt と aptitude の選択
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#472" class="lnkocn">472</a></label>
  <p class="i0" id="472">
    ビルド時にパッケージをインストールする際に <i>apt</i> と <i>aptitude</i> のどちらを利用するのか選択できます。利用するユーティリティは <tt>lb config</tt> の <tt>--apt</tt> 引数で決定します。パッケージが欠けている場合の処理方法に顕著な違いがあることに着目し、パッケージのインストール時に望ましい挙動を実装している方を選択してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#473" class="lnkocn">473</a></label>
  <ul>
  <li class="bullet" id="473">
    <tt>apt</tt>: この方法では、欠けているパッケージが指定された場合にそのパッケージのインストールは失敗します。これはデフォルトの設定です。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#474" class="lnkocn">474</a></label>
  <ul>
  <li class="bullet" id="474">
    <tt>aptitude</tt>: この方法では、欠けているパッケージが指定された場合にそのパッケージのインストールは成功します。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#475" class="lnkocn">475</a></label>
  <h6 class="norm" id="475"><a name="475"></a>
    <a name="c8.4.2" ></a><a name="h8.4.2" ></a>8.4.2 APTでのプロキシの利用
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#476" class="lnkocn">476</a></label>
  <p class="i0" id="476">
    よく要求されるAPTの設定として、プロキシの内側でのイメージのビルドへの対応があります。必要に応じて、<tt>--apt-ftp-proxy</tt> や <tt>--apt-http-proxy</tt> オプションによりAPTプロキシを指定できます。例:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#477" class="lnkocn">477</a></label>
  <p class="code" id="477">
    $ lb config --apt-http-proxy http://proxy/<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#478" class="lnkocn">478</a></label>
  <h6 class="norm" id="478"><a name="478"></a>
    <a name="h8.4.3" ></a><a name="tweaking-apt-to-save-space" ></a>8.4.3 APTの調整による容量節約
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#479" class="lnkocn">479</a></label>
  <p class="i0" id="479">
    イメージのメディアの容量をいくらか節約する必要があるかもしれません。その場合は以下に挙げるオプションを利用するといいかもしれません。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#480" class="lnkocn">480</a></label>
  <p class="i0" id="480">
    APTの索引をイメージに収録したくない場合は除外できます:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#481" class="lnkocn">481</a></label>
  <p class="code" id="481">
    $ lb config --apt-indices false<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#482" class="lnkocn">482</a></label>
  <p class="i0" id="482">
    これは <tt>/etc/apt/sources.list</tt> 内の項目には影響せず、単に <tt>/var/lib/apt</tt> に索引ファイルを収録するかどうかだけに影響します。その代わりに、Live システムでAPTを操作するためにはこの索引が必要なので、<tt>apt-cache search</tt> や <tt>apt-get install</tt> を実行する前にユーザは例えば <tt>apt-get update</tt> をまず実行して索引を作成しないといけません。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#483" class="lnkocn">483</a></label>
  <p class="i0" id="483">
    推奨パッケージのインストールによりイメージが肥大化しているような場合、以下で説明している影響を踏まえた上でAPTのデフォルトオプションを無効にできます:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#484" class="lnkocn">484</a></label>
  <p class="code" id="484">
    $ lb config --apt-recommends false<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#485" class="lnkocn">485</a></label>
  <p class="i0" id="485">
    推奨パッケージを無効にした場合の最も重要な影響は、<tt>live-boot</tt> や <tt>live-config</tt> 自体が、ほとんどの Live 設定に利用している重要な機能を提供する一部のパッケージを推奨していることによるもので、例えば <tt>live-config</tt> が推奨し、Live ユーザの作成に利用している <tt>user-setup</tt> があります。ほぼ例外なく、パッケージ一覧に追加しないといけないパッケージが推奨パッケージの中にいくらかあります。追加しない場合は、イメージが期待通りに動作しないということになります。ビルドに収録されている各 <tt>live-*</tt> パッケージの推奨パッケージを確認し、省略できると確信できない場合はパッケージ一覧に当該パッケージを追加するようにしてください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#486" class="lnkocn">486</a></label>
  <p class="i0" id="486">
    あるパッケージの推奨パッケージをインストールしないことによるもっと一般的な影響は「異常なインストール状態でなければあるパッケージとともにあるはずの」(Debian ポリシーマニュアル7.2節) Live システムのユーザが実際に必要とする一部のパッケージが省略されているかもしれないということです。したがって、推奨パッケージのインストールを無効にした場合とのパッケージ一覧 (<tt>lb build</tt> により生成される <tt>binary.packages</tt> ファイル参照) の違いを確認して、欠けているパッケージの中にインストールしたいものがあれば一覧に収録することを推奨しています。推奨パッケージからほんの一部を除外したい場合は、推奨パッケージのインストールは有効なままにしておき、 <a href="#apt-pinning">APTのピン止め</a>  で説明しているようにAPTのピン機能で、選択したパッケージについて負の優先度をセットしてインストールされないようにする方法があります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#487" class="lnkocn">487</a></label>
  <h6 class="norm" id="487"><a name="487"></a>
    <a name="c8.4.4" ></a><a name="h8.4.4" ></a>8.4.4 apt や aptitude へのオプションの受け渡し
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#488" class="lnkocn">488</a></label>
  <p class="i0" id="488">
    障害となるAPTの挙動を変更するための <tt>lb config</tt> オプションがない場合、<tt>--apt-options</tt> や <tt>--aptitude-options</tt> により任意のオプションを選択したAPTツールに渡せます。詳細については <tt>apt</tt> や <tt>aptitude</tt> の man ページを見てください。どちらのオプションにも、優先設定に加えて保持しておく必要のあるデフォルト値があることに注意してください。そのため、例えば <tt>snapshot.debian.org</tt> からテスト用に何か取得する場合に <tt>Acquire::Check-Valid-Until=false</tt> を指定するとAPTは古いままの <tt>Release</tt> ファイルを使い続けます。以下の例のように、デフォルト値 <tt>--yes</tt> の後に新しいオプションを付加します:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#489" class="lnkocn">489</a></label>
  <p class="code" id="489">
    $ lb config --apt-options "--yes -oAcquire::Check-Valid-Until=false"<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#490" class="lnkocn">490</a></label>
  <p class="i0" id="490">
    このオプションを利用する場合は man ページを確認して完全に理解するようにしてください。これはあくまで例であり、イメージをこの方法で設定するようにという助言だと解釈することのないようにしてください。このオプションは例えば Live イメージの最終的なリリースには適しません。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#491" class="lnkocn">491</a></label>
  <p class="i0" id="491">
    <tt>apt.conf</tt> のオプションを利用するようなもっと複雑なAPT設定には代わりに <tt>config/apt/apt.conf</tt> ファイルを作成すると良いでしょう。少数ですが、よく必要とされるオプションへの有用なショートカットがあります。他の <tt>apt-*</tt> オプションについても参照してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#492" class="lnkocn">492</a></label>
  <h6 class="norm" id="492"><a name="492"></a>
    <a name="h8.4.5" ></a><a name="apt-pinning" ></a>8.4.5 APTのピン止め
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#493" class="lnkocn">493</a></label>
  <p class="i0" id="493">
    背景として、<tt>apt_preferences(5)</tt> man ページをまず読んでください。APTのピン機能はビルド時用と実行時用に設定できます。前者については <tt>config/archives/*.pref</tt>、<tt>config/archives/*.pref.chroot</tt>、<tt>config/apt/preferences</tt> を、後者については <tt>config/includes.chroot/etc/apt/preferences</tt> を作成してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#494" class="lnkocn">494</a></label>
  <p class="i0" id="494">
    <b>buster</b> の Live システムをビルドするとしましょう。その場合に必要な Live パッケージは全て、ビルド時にバイナリイメージを <b>sid</b> からインストールする必要があります。APTソースに <b>sid</b> を追加して、ピン機能で <b>sid</b> の Live パッケージには高い優先度をセットし、他のパッケージには全てデフォルトよりも低い優先度をセットする必要があります。そうするとビルド時に望むパッケージだけを <b>sid</b> からインストールし、他は全て対象システムのディストリビューションである <b>buster</b> から取得します。以下によりその動作になります:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#495" class="lnkocn">495</a></label>
  <p class="code" id="495">
    $ echo "deb http://mirror/debian/ sid main" &gt; config/archives/sid.list.chroot<br>
$ cat &gt;&gt; config/archives/sid.pref.chroot &lt;&lt; EOF<br>
Package: live-*<br>
Pin: release n=sid<br>
Pin-Priority: 600<br><br>
Package: *<br>
Pin: release n=sid<br>
Pin-Priority: 1<br>
EOF<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#496" class="lnkocn">496</a></label>
  <p class="i0" id="496">
    別のパッケージにより推奨されたパッケージを望まない場合に、ピン機能で優先度に負の値をセットすることによりそのパッケージをインストールしないようにできます。<tt>config/package-lists/desktop.list.chroot</tt> で <tt>task-lxde-desktop</tt> を使って LXDE イメージをビルドしていて、wifi パスワードをキーリングに保存するかユーザに聞かないようにしたいと仮定しましょう。このメタパッケージは <i>lxde-core</i> に依存し、<i>lxde-core</i> は <i>gksu</i> を推奨し、<i>gksu</i> は <i>gnome-keyring</i> を推奨しています。そこで、推奨された <i>gnome-keyring</i> パッケージを除外したい場合、<tt>config/apt/preferences</tt> に以下を追加することで除外できます:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#497" class="lnkocn">497</a></label>
  <p class="code" id="497">
    Package: gnome-keyring<br>
Pin: version *<br>
Pin-Priority: -1<br>
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#498" class="lnkocn">498</a></label>
  <h1 class="norm" id="498"><a name="498"></a>
    収録内容の独自化
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#499" class="lnkocn">499</a></label>
  <h4 class="norm" id="499"><a name="499"></a>
    <a name="h9" ></a><a name="" ></a><a name="customizing-contents" ></a>9. 収録内容の独自化
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a href="#500" class="lnkocn">500</a></label>
  <p class="i0" id="500">
    この章では収録するパッケージを単に選択だけにとどまらない、微調整まで含めた Live システムの収録内容の独自化について説明します。インクルードにより Live システムイメージの任意のファイルを追加、置換できるようになり、フックによりビルド時及びブート時の異なる段階で任意のコマンドを実行できるようになり、preseed が debconf の質問に対する回答を提供することでパッケージのインストール時に設定できるようになります。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#501" class="lnkocn">501</a></label>
  <h5 class="norm" id="501"><a name="501"></a>
    <a name="h9.1" ></a><a name="includes" ></a>9.1 Includes
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#502" class="lnkocn">502</a></label>
  <p class="i0" id="502">
    理想的なのは変更されていないパッケージにより提供されるファイルを Live システムで完全に収録することではありますが、ファイルを使って内容をいくらか提供あるいは変更することが便利なこともあります。インクルードを使うと Live システムイメージ中の任意のファイルを追加 (または置換) することができるようになります。<i>live-build</i> ではこれを使う仕組みを2つ提供しています:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#503" class="lnkocn">503</a></label>
  <ul>
  <li class="bullet" id="503">
    chroot ローカルインクルード: chroot/Live ファイルシステムに対してファイルの追加や置換ができるようになります。さらなる情報については、 <a href="#live-chroot-local-includes">Live/chroot ローカルインクルード</a>  を見てください。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#504" class="lnkocn">504</a></label>
  <ul>
  <li class="bullet" id="504">
    バイナリローカルインクルード: バイナリイメージ中のファイルの追加や置換ができるようになります。さらなる情報については、 <a href="#binary-local-includes">バイナリローカルインクルード</a>  を見てください。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#505" class="lnkocn">505</a></label>
  <p class="i0" id="505">
    「Live」及び「バイナリ」イメージの違いについてのさらなる情報は、 <a href="#terms">用語</a>  を見てください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#506" class="lnkocn">506</a></label>
  <h6 class="norm" id="506"><a name="506"></a>
    <a name="h9.1.1" ></a><a name="live-chroot-local-includes" ></a>9.1.1 Live/chroot ローカルインクルード
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#507" class="lnkocn">507</a></label>
  <p class="i0" id="507">
    chroot ローカルインクルードを使って chroot/Live ファイルシステム中のファイルの追加や置換を行い、それを Live システムで利用することができます。代表的な使い方として Live システムで利用するユーザディレクトリ (<tt>/etc/skel</tt>) の骨格を構成させ、live ユーザのホームディレクトリを作成するということがあります。別の使い方としては設定ファイルを提供し、そのまま加工せずイメージ中に追加または置換するということがあります。加工が必要な場合は  <a href="#chroot-local-hooks">chroot ローカルフック</a>  を見てください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#508" class="lnkocn">508</a></label>
  <p class="i0" id="508">
    ファイルを収録するには <tt>config/includes.chroot</tt> ディレクトリに単純に追加します。このディレクトリが Live システムのルートディレクトリ <tt>/</tt> に対応します。例えば Live システムにファイル <tt>/var/www/index.html</tt> を追加する場合:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#509" class="lnkocn">509</a></label>
  <p class="code" id="509">
    $ mkdir -p config/includes.chroot/var/www<br>
$ cp /path/to/my/index.html config/includes.chroot/var/www<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#510" class="lnkocn">510</a></label>
  <p class="i0" id="510">
    それから設定は以下の配置になっているでしょう:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#511" class="lnkocn">511</a></label>
  <p class="code" id="511">
    -- config<br>
&nbsp;&nbsp;&nbsp;&nbsp;[...]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|-- includes.chroot<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;`-- var<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`-- www<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`-- index.html<br>
&nbsp;&nbsp;&nbsp;&nbsp;[...]<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#512" class="lnkocn">512</a></label>
  <p class="i0" id="512">
    chroot ローカルインクルードはパッケージがインストールされた後にインストールされるので、パッケージによりインストールされたファイルは上書きされます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#513" class="lnkocn">513</a></label>
  <h6 class="norm" id="513"><a name="513"></a>
    <a name="h9.1.2" ></a><a name="binary-local-includes" ></a>9.1.2 バイナリローカルインクルード
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#514" class="lnkocn">514</a></label>
  <p class="i0" id="514">
    文書やビデオ等の内容をメディアのファイルシステムに収録して、メディアを差し込んで Live システムをブートしなくてもすぐにアクセスできるようにするのにバイナリローカルインクルードを使えます。これは chroot ローカルインクルードと同様の方法で動作します。例えばファイル <tt>~/video_demo.*</tt> が Live システムの実演ビデオで、リンク先の HTML 索引ページでそれを説明しているものと仮定しましょう。単純に内容を <tt>config/includes.binary/</tt> にコピーします:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#515" class="lnkocn">515</a></label>
  <p class="code" id="515">
    $ cp ~/video_demo.* config/includes.binary/<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#516" class="lnkocn">516</a></label>
  <p class="i0" id="516">
    これでファイルは Live メディアの最上位ディレクトリに現れます。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#517" class="lnkocn">517</a></label>
  <h5 class="norm" id="517"><a name="517"></a>
    <a name="h9.2" ></a><a name="hooks" ></a>9.2 フック
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#518" class="lnkocn">518</a></label>
  <p class="i0" id="518">
    フックを利用すると、ビルドの chroot 及びバイナリの段階でコマンドを実行し、イメージを独自化できます。ビルドするのが Live イメージなのか普通のシステムのイメージなのかにより、フックはそれぞれ <tt>config/hooks/live</tt> または <tt>config/hooks/normal</tt> に場所/置かないといけません。この2つはビルド環境内で実行されるため、ローカルフックとよく呼ばれます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#519" class="lnkocn">519</a></label>
  <p class="i0" id="519">
    ブート時のフックもあり、イメージのビルド完了後のブートの過程でコマンドを実行できます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#520" class="lnkocn">520</a></label>
  <h6 class="norm" id="520"><a name="520"></a>
    <a name="h9.2.1" ></a><a name="chroot-local-hooks" ></a>9.2.1 chroot ローカルフック
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#521" class="lnkocn">521</a></label>
  <p class="i0" id="521">
    chroot の段階でコマンドを実行するにはファイル名末尾が <tt>.hook.chroot</tt> でコマンドを収録するフックスクリプトを <tt>config/hooks/live</tt> または <tt>config/hooks/normal</tt> ディレクトリに作成します。フックは残りの chroot 設定の適用後に chroot 内で実行されるため、フックの実行に必要なパッケージやファイルを全て確実に設定に収録することを忘れないようにしてください。代表的な chroot の様々な独自化タスクについて <tt>/usr/share/doc/live-build/examples/hooks</tt> で提供されている chroot フックスクリプトの例を確認してください。この例からコピーやシンボリックリンクを作成して自分の設定で使えます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#522" class="lnkocn">522</a></label>
  <h6 class="norm" id="522"><a name="522"></a>
    <a name="c9.2.2" ></a><a name="h9.2.2" ></a>9.2.2 バイナリローカルフック
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#523" class="lnkocn">523</a></label>
  <p class="i0" id="523">
    バイナリ段階でコマンドを実行するには、コマンドを収録するフックスクリプトを、末尾に <tt>.hook.binary</tt> を付けて <tt>config/hooks/live</tt> または <tt>config/hooks/normal</tt> ディレクトリに作成します。このフックは他の binary_checksums を除いたバイナリコマンドを全て実行した後の、バイナリコマンドのほぼ最後に実行されます。フック内のコマンドは chroot 内で実行されるのではないため、ビルドツリー外のファイルを変更することのないように注意してください。変更するとビルドシステムが機能しなくなるかもしれません! 代表的なバイナリ独自化タスクについて <tt>/usr/share/doc/live-build/examples/hooks</tt> で提供されているバイナリフックスクリプトの例を確認してください。この例からコピーやシンボリックリンクを作成して自分の設定で使えます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#524" class="lnkocn">524</a></label>
  <h6 class="norm" id="524"><a name="524"></a>
    <a name="h9.2.3" ></a><a name="boot-time-hooks" ></a>9.2.3 ブート時フック
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#525" class="lnkocn">525</a></label>
  <p class="i0" id="525">
    ブート時にコマンドを実行するために man ページの「独自化」節で説明されている <i>live-config</i> フックを提供することができます。<tt>/lib/live/config/</tt> で提供している <i>live-config</i> 独自のフックを、実行順を示す頭の番号に注意して調べてください。それから自分のフックに実行順を示す適切な番号を頭に付けて、<tt>config/includes.chroot/lib/live/config/</tt> 内の chroot ローカルインクルードか、 <a href="#installing-modified-or-third-party-packages">変更したあるいはサードパーティのパッケージのインストール</a>  で説明している独自パッケージとして提供してください。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#526" class="lnkocn">526</a></label>
  <h5 class="norm" id="526"><a name="526"></a>
    <a name="c9.3" ></a><a name="h9.3" ></a>9.3 Debconf 質問の preseed
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#527" class="lnkocn">527</a></label>
  <p class="i0" id="527">
    <tt>config/preseed/</tt> ディレクトリにある、末尾が段階 (<tt>.chroot</tt> か <tt>.binary</tt>) に続いて <tt>.cfg</tt> で終わるファイルは debconf の preseed ファイルと見なされ、対応する段階で <i>live-build</i> により <tt>debconf-set-selections</tt> を使ってインストールされます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#528" class="lnkocn">528</a></label>
  <p class="i0" id="528">
    debconf のさらなる情報については、<i>debconf</i> パッケージの <tt>debconf(7)</tt> を見てください。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#529" class="lnkocn">529</a></label>
  <h1 class="norm" id="529"><a name="529"></a>
    実行時の挙動の独自化
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#530" class="lnkocn">530</a></label>
  <h4 class="norm" id="530"><a name="530"></a>
    <a name="h10" ></a><a name="" ></a><a name="customizing-run-time-behaviours" ></a>10. 実行時の挙動の独自化
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a href="#531" class="lnkocn">531</a></label>
  <p class="i0" id="531">
    実行時に行われる設定は全て <i>live-config</i> により行われます。ユーザが関心を持つであろう <i>live-config</i> の最も一般的なオプションから一部を説明します。オプションの全容は <i>live-config</i> の man ページにあります。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#532" class="lnkocn">532</a></label>
  <h5 class="norm" id="532"><a name="532"></a>
    <a name="c10.1" ></a><a name="h10.1" ></a>10.1 live ユーザの独自化
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#533" class="lnkocn">533</a></label>
  <p class="i0" id="533">
    重要な検討事項が1つあり、live ユーザはブート時に <i>live-boot</i> により作成され、ビルド時に <i>live-build</i> により作成されるのではないということです。この影響は  <a href="#live-chroot-local-includes">Live/chroot ローカルインクルード</a>  で説明しているように、ビルドで live ユーザに関連する内容が導入されるところだけにはとどまらず、live ユーザに関連するグループや権限にも影響します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#534" class="lnkocn">534</a></label>
  <p class="i0" id="534">
    <i>live-config</i> を設定できる複数の方法で live ユーザの所属する追加のグループを指定できます。例えば live ユーザを <tt>fuse</tt> グループに追加するには <tt>config/includes.chroot/etc/live/config/user-setup.conf</tt> ファイルに
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#535" class="lnkocn">535</a></label>
  <p class="code" id="535">
    LIVE_USER_DEFAULT_GROUPS="audio cdrom dip floppy video plugdev netdev powerdev scanner bluetooth fuse"<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#536" class="lnkocn">536</a></label>
  <p class="i0" id="536">
    を追加するかブートパラメータとして <tt>live-config.user-default-groups=audio,cdrom,dip,floppy,video,plugdev,netdev,powerdev,scanner,bluetooth,fuse</tt> と指定します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#537" class="lnkocn">537</a></label>
  <p class="i0" id="537">
    デフォルトのユーザ名「user」やデフォルトのパスワード「live」を変更することもできます。何らかの理由で変更したい場合は以下のようにして簡単に変更できます:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#538" class="lnkocn">538</a></label>
  <p class="i0" id="538">
    デフォルトのユーザ名を変更するには単に設定で指定します:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#539" class="lnkocn">539</a></label>
  <p class="code" id="539">
    $ lb config --bootappend-live "boot=live components username=live-user"<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#540" class="lnkocn">540</a></label>
  <p class="i0" id="540">
    デフォルトのパスワードを変更できる1つの方法は <a href="#boot-time-hooks">ブート時フック</a>  で説明しているフックを使います。そのためには <tt>/usr/share/doc/live-config/examples/hooks</tt> から「passwd」を使い、適当な名前 (例えば 2000-passwd) で保存してそれを <tt>config/includes.chroot/lib/live/config/</tt> に追加します。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#541" class="lnkocn">541</a></label>
  <h5 class="norm" id="541"><a name="541"></a>
    <a name="h10.2" ></a><a name="customizing-locale-and-language" ></a>10.2 ロケールと言語の独自化
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#542" class="lnkocn">542</a></label>
  <p class="i0" id="542">
    Live システムがブートする際、2つの段階で言語が関わってきます:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#543" class="lnkocn">543</a></label>
  <ul>
  <li class="bullet" id="543">
    ロケール生成
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#544" class="lnkocn">544</a></label>
  <ul>
  <li class="bullet" id="544">
    キーボードの設定
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#545" class="lnkocn">545</a></label>
  <p class="i0" id="545">
    Live システムをビルドする際のデフォルトのロケールは <tt>locales=en_US.UTF-8</tt> となっています。生成したいロケールの定義には <tt>lb config</tt> の <tt>--bootappend-live</tt> オプションで <tt>locales</tt> パラメータを指定します。例えば
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#546" class="lnkocn">546</a></label>
  <p class="code" id="546">
    $ lb config --bootappend-live "boot=live components locales=de_CH.UTF-8"<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#547" class="lnkocn">547</a></label>
  <p class="i0" id="547">
    ロケールをコンマで区切って複数指定することもできます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#548" class="lnkocn">548</a></label>
  <p class="i0" id="548">
    このパラメータも以下に示すキーボード設定用パラメータと同様にカーネルコマンドラインで指定できます。ロケールは <tt>言語_国</tt> (デフォルトのエンコーディングを使う場合) または完全な <tt>言語_国.エンコーディング</tt> の形式で指定できます。サポートしているロケールやそれぞれで利用されるエンコーディングの一覧は <tt>/usr/share/i18n/SUPPORTED</tt> にあります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#549" class="lnkocn">549</a></label>
  <p class="i0" id="549">
    コンソールとXキーボードの設定はどちらも <tt>live-config</tt> により <tt>console-setup</tt> パッケージを使って行われます。設定には <tt>--bootappend-live</tt> オプション経由で <tt>keyboard-layouts</tt>、<tt>keyboard-variants</tt>、<tt>keyboard-options</tt>、<tt>keyboard-model</tt> ブートパラメータを利用します。それぞれの有効なオプションは <tt>/usr/share/X11/xkb/rules/base.lst</tt> にあります。ある言語向けのレイアウトや配列を見つけるには、その言語の英語名やその言語が話されている国を検索してみてください。例:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#550" class="lnkocn">550</a></label>
  <p class="code" id="550">
    $ egrep -i '(^!|german.*switzerland)' /usr/share/X11/xkb/rules/base.lst<br>
! model<br>
! layout<br>
&nbsp;&nbsp;&nbsp;ch&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;German (Switzerland)<br>
! variant<br>
&nbsp;&nbsp;&nbsp;legacy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ch: German (Switzerland, legacy)<br>
&nbsp;&nbsp;&nbsp;de_nodeadkeys&nbsp;&nbsp;&nbsp;ch: German (Switzerland, eliminate dead keys)<br>
&nbsp;&nbsp;&nbsp;de_sundeadkeys&nbsp;&nbsp;ch: German (Switzerland, Sun dead keys)<br>
&nbsp;&nbsp;&nbsp;de_mac&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ch: German (Switzerland, Macintosh)<br>
! option<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#551" class="lnkocn">551</a></label>
  <p class="i0" id="551">
    それぞれの配列の説明に、適合するレイアウトが示されていることに注意してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#552" class="lnkocn">552</a></label>
  <p class="i0" id="552">
    レイアウトだけを設定する必要があることはよくあります。例えばXで利用するドイツ語のロケールファイル及びスイスのドイツ語のキーボードレイアウトを利用する場合:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#553" class="lnkocn">553</a></label>
  <p class="code" id="553">
    $ lb config --bootappend-live "boot=live components locales=de_CH.UTF-8 keyboard-layouts=ch"<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#554" class="lnkocn">554</a></label>
  <p class="i0" id="554">
    非常に具体的な事例ですが他のパラメータを同時に指定することもできます。例えばフランス語のシステムを用意して TypeMatrix EZ-Reach 2030 USB キーボードで (Bepo と呼ばれる) フランス語用の Dvorak 配置を使う場合:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#555" class="lnkocn">555</a></label>
  <p class="code" id="555">
    $ lb config --bootappend-live \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"boot=live components locales=fr_FR.UTF-8 keyboard-layouts=fr keyboard-variants=bepo keyboard-model=tm2030usb"<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#556" class="lnkocn">556</a></label>
  <p class="i0" id="556">
    値を1つだけ受け付ける <tt>keyboard-model</tt> は例外ですが、他の <tt>keyboard-*</tt> オプションではそれぞれに値をコンマで区切って複数指定することもできます。<tt>XKBMODEL</tt> や <tt>XKBLAYOUT</tt>、<tt>XKBVARIANT</tt>、<tt>XKBOPTIONS</tt> 変数の詳細や例については <tt>keyboard(5)</tt> man ページを見てください。<tt>keyboard-variants</tt> に複数の値を指定した場合、1つずつ <tt>keyboard-layouts</tt> の値 (<tt>setxkbmap(1)</tt> の <tt>-variant</tt> オプション参照) との照合が行われます。空白の値も使えます。例えばデフォルトとして米国向けの QWERTY、それとは別に米国向けの Dvorak、の2つの配列を指定する場合:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#557" class="lnkocn">557</a></label>
  <p class="code" id="557">
    $ lb config --bootappend-live \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"boot=live components keyboard-layouts=us,us keyboard-variants=,dvorak"<br>
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#558" class="lnkocn">558</a></label>
  <h5 class="norm" id="558"><a name="558"></a>
    <a name="h10.3" ></a><a name="persistence" ></a>10.3 保持機能
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#559" class="lnkocn">559</a></label>
  <p class="i0" id="559">
    典型的なライブCDというものは CD-ROM 等の読み取り専用メディアから起動するインストール済みシステムで、書き込みや変更は起動したホストハードウェアの再起動により消え去ります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#560" class="lnkocn">560</a></label>
  <p class="i0" id="560">
    Live システムはそれを一般化したものであり、CD以外のメディアもサポートしますが、デフォルトの挙動としては読み取り専用であり、そのシステムで実行時に行ったことは全てシャットダウンにより失われるものだと考えるべきです。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#561" class="lnkocn">561</a></label>
  <p class="i0" id="561">
    「保持機能」というのは、実行時にシステムに行ったことの一部あるいは全てを保存し、リブート後に引き継ぐための様々な策の共通の呼び名です。それが機能する仕組みを理解するためには、読み取り専用メディアからブート、実行している場合でもファイルやディレクトリへの変更が書き込み可能メディア、標準的にはRAMディスク (tmpfs) に書かれ、RAMディスクのデータはリブート後には残らないのだ、ということを知っておくと良いでしょう。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#562" class="lnkocn">562</a></label>
  <p class="i0" id="562">
    このRAMディスクに保存されるデータは、ローカルストレージメディアやネットワーク共有、あるいはマルチセッションで (再)書き込み可能な CD/DVD のセッション等の書き込み可能な保持用メディアに保存する必要があります。こういったメディアは Live システムで様々な方法でサポートされています。また、特別なブートパラメータ <tt>persistence</tt> をブート時に指定する必要があるということも重要です。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#563" class="lnkocn">563</a></label>
  <p class="i0" id="563">
    ブートパラメータ <tt>persistence</tt> がセットされている (と同時に <tt>nopersistence</tt> がセットされていない) 場合、保持用ボリューム用のローカルストレージメディア (例えばハードディスクやUSBドライブ) がブート中に調査されます。<i>live-boot</i>(7) man ページで説明している特定のブートパラメータを指定することにより、利用する保持用ボリュームの種類を制限できます。保持用ボリュームは以下のどれかになります:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#564" class="lnkocn">564</a></label>
  <ul>
  <li class="bullet" id="564">
    GPT名により識別されるパーティション
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#565" class="lnkocn">565</a></label>
  <ul>
  <li class="bullet" id="565">
    ファイルシステムラベルにより識別されるファイルシステム
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#566" class="lnkocn">566</a></label>
  <ul>
  <li class="bullet" id="566">
    読み取り可能な任意のファイルシステム (異質のOSの NTFS パーティションも利用可) の最上位に置かれている、ファイル名により識別されるイメージファイル
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#567" class="lnkocn">567</a></label>
  <p class="i0" id="567">
    オーバーレイ用のボリュームラベルは <tt>persistence</tt> でないといけません。さらにその最上位に、ボリュームの保持を完全に制御するのに利用する <tt>persistence.conf</tt> というファイルが置かれていない限り無視されます。これは言うに及ばず、リブート後に保持用ボリュームに保存する対象となるディレクトリを指定します。さらなる詳細については  <a href="#persistence-conf">persistence.conf ファイル</a>  を見てください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#568" class="lnkocn">568</a></label>
  <p class="i0" id="568">
    保持用に利用するボリュームを用意する方法についていくつか例を示します。これは例えばハードディスクやUSBメモリに例えば
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#569" class="lnkocn">569</a></label>
  <p class="code" id="569">
    # mkfs.ext4 -L persistence /dev/sdb1<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#570" class="lnkocn">570</a></label>
  <p class="i0" id="570">
    により作成した ext4 パーティションを利用できます。 <a href="#using-usb-extra-space">USBメモリの空きスペースの利用</a>  も見てください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#571" class="lnkocn">571</a></label>
  <p class="i0" id="571">
    デバイスに既存のパーティションがある場合は以下に示すどれかによりラベルを変更するだけで準備は終わりです:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#572" class="lnkocn">572</a></label>
  <p class="code" id="572">
    # tune2fs -L persistence /dev/sdb1 # for ext2,3,4 filesystems<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#573" class="lnkocn">573</a></label>
  <p class="i0" id="573">
    保持用に利用する ext4 ベースのイメージファイルの作成例:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#574" class="lnkocn">574</a></label>
  <p class="code" id="574">
    $ dd if=/dev/null of=persistence bs=1 count=0 seek=1G # for a 1GB sized image file<br>
$ /sbin/mkfs.ext4 -F persistence<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#575" class="lnkocn">575</a></label>
  <p class="i0" id="575">
    イメージファイル作成後、例えば <tt>/usr</tt> を保持させる場合に、保存するのはディレクトリに対する変更だけで、<tt>/usr</tt> の内容を丸ごと保存したいわけではない、という場合、「union」オプションを利用できます。イメージファイルがホームディレクトリに置かれている場合はハードドライブのファイルシステム最上位にコピーして <tt>/mnt</tt> にマウントします:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#576" class="lnkocn">576</a></label>
  <p class="code" id="576">
    # cp persistence /<br>
# mount -t ext4 /persistence /mnt<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#577" class="lnkocn">577</a></label>
  <p class="i0" id="577">
    それから、内容を追加する <tt>persistence.conf</tt> ファイルを作成してイメージファイルのマウントを解除します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#578" class="lnkocn">578</a></label>
  <p class="code" id="578">
    # echo "/usr union" &gt;&gt; /mnt/persistence.conf<br>
# umount /mnt<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#579" class="lnkocn">579</a></label>
  <p class="i0" id="579">
    ブートパラメータ「persistence」を指定して Live メディアでリブートします。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#580" class="lnkocn">580</a></label>
  <h6 class="norm" id="580"><a name="580"></a>
    <a name="h10.3.1" ></a><a name="persistence-conf" ></a>10.3.1 persistence.conf ファイル
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#581" class="lnkocn">581</a></label>
  <p class="i0" id="581">
    <tt>persistence</tt> のラベルを付けられたボリュームは <tt>persistence.conf</tt> ファイルを使って、任意のディレクトリを保持するように設定します。ボリュームのファイルシステム最上位に置かれているこのファイルは保持するディレクトリや方法を制御します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#582" class="lnkocn">582</a></label>
  <p class="i0" id="582">
    独自のオーバーレイマウントの設定方法は persistence.conf(5) man ページで詳細に説明されていますが、ほとんどの場合簡単な例で十分なはずです。/dev/sdb1 パーティションの ext4 ファイルシステムにホームディレクトリとAPTキャッシュを保持させる場合:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#583" class="lnkocn">583</a></label>
  <p class="code" id="583">
    # mkfs.ext4 -L persistence /dev/sdb1<br>
# mount -t ext4 /dev/sdb1 /mnt<br>
# echo "/home" &gt;&gt; /mnt/persistence.conf<br>
# echo "/var/cache/apt" &gt;&gt; /mnt/persistence.conf<br>
# umount /mnt<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#584" class="lnkocn">584</a></label>
  <p class="i0" id="584">
    それからリブートします。最初のブート中に <tt>/home</tt> と <tt>/var/cache/apt</tt> の内容が保持用ボリュームにコピーされ、以後のこのディレクトリへの変更は全て保持用ボリュームに残ります。<tt>persistence.conf</tt> ファイルに列挙するパスには空白文字や特別なパス構成要素 <tt>.</tt> and <tt>..</tt> を含めることは一切できないことに注意してください。また、<tt>/lib</tt> や <tt>/lib/live</tt> (はそのサブディレクトリを含めて)、<tt>/</tt> は独自マウントを使って保持させることができません。この制約の回避策として、<tt>persistence.conf</tt> ファイルに <tt>/ union</tt> を追加すると完全な保持を実現できます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#585" class="lnkocn">585</a></label>
  <h6 class="norm" id="585"><a name="585"></a>
    <a name="c10.3.2" ></a><a name="h10.3.2" ></a>10.3.2 保持先を複数使いたい場合
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#586" class="lnkocn">586</a></label>
  <p class="i0" id="586">
    複数の保存先を使う方法は複数あります。目的の明確な例として、複数のボリュームを同時に使う場合と1つだけを選択して使う場合を取り上げます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#587" class="lnkocn">587</a></label>
  <p class="i0" id="587">
    異なる (個別の <tt>persistence.conf</tt> ファイルを利用する) 独自オーバーレイボリュームを複数同時に利用できますが、同一のディレクトリを保持させる設定のボリュームが複数ある場合はその中から1つだけが利用されます。ある2つのマウントが「入り組んでいる」(つまり他にマウントしたディレクトリ以下のサブディレクトリとしてマウントする) ような場合には子孫側ディレクトリよりも前に親側ディレクトリがマウントされるため、他のマウントにより見えなくなるマウントは発生しません。入り組んでいる独自マウントが同一の <tt>persistence.conf</tt> ファイルで指定されている場合は問題があります。そういった状況が実際に必要な場合の処理方法については persistence.conf(5) man ページを見てください (ヒント: 通常は必要ありません)。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#588" class="lnkocn">588</a></label>
  <p class="i0" id="588">
    ありそうな事例: ユーザデータ、つまり <tt>/home</tt> とスーパーユーザのデータ、つまり <tt>/root</tt> を異なるパーティションに保存するため <tt>persistence</tt> ラベルの付いたパーティションを2つ作成し、それぞれに <tt>persistence.conf</tt> ファイルを1つはユーザのファイルを保存する最初のパーティション向けに <tt># echo "/home" &gt; persistence.conf</tt>、もう1つはスーパーユーザのファイルを保存する2つ目のパーティション向けに <tt># echo "/root" &gt; persistence.conf</tt> として作成します。最後に、ブートパラメータとして <tt>persistence</tt> を使います。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#589" class="lnkocn">589</a></label>
  <p class="i0" id="589">
    別の位置やテストのために例えば <tt>private</tt> と <tt>work</tt> のようにして同一の種類で複数の保持先が必要な場合、ブートパラメータ <tt>persistence</tt> と合わせてブートパラメータ <tt>persistence-label</tt> を使うと、複数でそれぞれ一意となる保持用メディアを使えるようになります。例として、ブラウザのブックマークその他の個人用データ用に <tt>private</tt> のラベルを付けられた保持用パーティションを使いたい場合、ブートパラメータとして <tt>persistence</tt> <tt>persistence-label=private</tt> を使います。そして文書や研究プロジェクトその他の仕事関係のデータ用にはブートパラメータとして <tt>persistence</tt> <tt>persistence-label=work</tt> を使います。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#590" class="lnkocn">590</a></label>
  <p class="i0" id="590">
    各ボリューム <tt>private</tt> 及び <tt>work</tt> にはそれぞれ最上位に <tt>persistence.conf</tt> ファイルが必要だということは重要ですので覚えておいてください。古い名前でこういったラベルを使う方法についてさらなる情報が <i>live-boot</i> man ページにあります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#591" class="lnkocn">591</a></label>
  <h6 class="norm" id="591"><a name="591"></a>
    <a name="c10.3.3" ></a><a name="h10.3.3" ></a>10.3.3 暗号化した保持先の利用
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#592" class="lnkocn">592</a></label>
  <p class="i0" id="592">
    保持機能を使うことには重要なデータが漏洩する危険がいくらか存在します。特に保持するデータがUSBメモリや外付ハードドライブ等のポータブル機器に保存される場合は。そういった場合には暗号化が便利です。手順が多いために全体として複雑に見えるかもしれませんが、<i>live-boot</i> で暗号化したパーティションを扱うのは実際には簡単です。サポートしている <b>luks</b> という種類の暗号化を利用するためには、暗号化したパーティションを作成する側と暗号化した保持用パーティションを利用する Live システムの両方のマシンに <i>cryptsetup</i> をインストールする必要があります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#593" class="lnkocn">593</a></label>
  <p class="i0" id="593">
    マシンへの <i>cryptsetup</i> のインストール:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#594" class="lnkocn">594</a></label>
  <p class="code" id="594">
    # apt-get install cryptsetup<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#595" class="lnkocn">595</a></label>
  <p class="i0" id="595">
    Live システムに <i>cryptsetup</i> をインストールするには、パッケージ一覧に追加します:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#596" class="lnkocn">596</a></label>
  <p class="code" id="596">
    $ lb config<br>
$ echo "cryptsetup" &gt; config/package-lists/encryption.list.chroot<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#597" class="lnkocn">597</a></label>
  <p class="i0" id="597">
    <i>cryptsetup</i> を備えた Live システムが出来たら、基本的に必要なのは新しいパーティションを作成して暗号化し、<tt>persistence</tt> と <tt>persistence-encryption=luks</tt> パラメータを指定してブートするだけです。既にこの段階を予測し、通常の手順に沿ったブートパラメータを追加してあります:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#598" class="lnkocn">598</a></label>
  <p class="code" id="598">
    $ lb config --bootappend-live "boot=live components persistence persistence-encryption=luks"<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#599" class="lnkocn">599</a></label>
  <p class="i0" id="599">
    暗号化についてよく理解していない人たちのために詳細を見て行きましょう。以下の例では <tt>/dev/sdc2</tt> に対応するUSBメモリ上のパーティションを利用します。自分で使う際にはどのパーティションになるのか判断する必要があることに注意してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#600" class="lnkocn">600</a></label>
  <p class="i0" id="600">
    最初の段階はUSBメモリを接続してそれがどのデバイスになるのか判断することです。<i>live-manual</i> で推奨するデバイス一覧方法では <tt>ls -l /dev/disk/by-id</tt> を使います。それから新しいパーティションを作成、さらにパスフレーズを使って暗号化します:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#601" class="lnkocn">601</a></label>
  <p class="code" id="601">
    # cryptsetup --verify-passphrase luksFormat /dev/sdc2<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#602" class="lnkocn">602</a></label>
  <p class="i0" id="602">
    仮想デバイスマッパーから luks パーティションを開きます。好きな名前を使ってください。ここでは例として <b>live</b> を使います:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#603" class="lnkocn">603</a></label>
  <p class="code" id="603">
    # cryptsetup luksOpen /dev/sdc2 live<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#604" class="lnkocn">604</a></label>
  <p class="i0" id="604">
    次の段階はファイルシステムを作成する前にデバイスをゼロで埋めることです:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#605" class="lnkocn">605</a></label>
  <p class="code" id="605">
    # dd if=/dev/zero of=/dev/mapper/live<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#606" class="lnkocn">606</a></label>
  <p class="i0" id="606">
    これでファイルシステムを作成する準備ができました。ラベル <tt>persistence</tt> の指定を追加しているためこのデバイスはブート時に保持用としてマウントされるということに注意してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#607" class="lnkocn">607</a></label>
  <p class="code" id="607">
    # mkfs.ext4 -L persistence /dev/mapper/live<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#608" class="lnkocn">608</a></label>
  <p class="i0" id="608">
    準備を続けるにはデバイスをマウントする必要があります。例として <tt>/mnt</tt> にマウントします。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#609" class="lnkocn">609</a></label>
  <p class="code" id="609">
    # mount /dev/mapper/live /mnt<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#610" class="lnkocn">610</a></label>
  <p class="i0" id="610">
    そしてパーティション最上位に <tt>persistence.conf</tt> ファイルを作成します。これは前に説明したように必ず必要です。 <a href="#persistence-conf">persistence.conf ファイル</a>  を見てください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#611" class="lnkocn">611</a></label>
  <p class="code" id="611">
    # echo "/ union" &gt; /mnt/persistence.conf<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#612" class="lnkocn">612</a></label>
  <p class="i0" id="612">
    それからマウントポイントのマウントを解除します:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#613" class="lnkocn">613</a></label>
  <p class="code" id="613">
    # umount /mnt<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#614" class="lnkocn">614</a></label>
  <p class="i0" id="614">
    オプションですがパーティションに追加したばかりのデータを安全にしておくと良いでしょう。デバイスを閉じます:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#615" class="lnkocn">615</a></label>
  <p class="code" id="615">
    # cryptsetup luksClose live<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#616" class="lnkocn">616</a></label>
  <p class="i0" id="616">
    手順をまとめます。これまでに、暗号化を有効化した Live システムを作成しました。これは  <a href="#copying-iso-hybrid-to-usb">ISO hybrid イメージのUSBメモリへのコピー</a>  で説明しているようにUSBメモリにコピーできます。暗号化したパーティションも作成しました。これは同一のUSBメモリに置いて持ち運べます。保持先として利用する暗号化パーティションを設定しました。あと必要なのは Live システムをブートするだけです。ブート時に <i>live-boot</i> は保持用として利用する暗号化したパーティションのパスフレーズを質問し、マウントします。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#617" class="lnkocn">617</a></label>
  <h1 class="norm" id="617"><a name="617"></a>
    バイナリイメージの独自化
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#618" class="lnkocn">618</a></label>
  <h4 class="norm" id="618"><a name="618"></a>
    <a name="h11" ></a><a name="" ></a><a name="customizing-binary" ></a>11. バイナリイメージの独自化
  </h4>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#619" class="lnkocn">619</a></label>
  <h5 class="norm" id="619"><a name="619"></a>
    <a name="c11.1" ></a><a name="h11.1" ></a>11.1 ブートローダ
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#620" class="lnkocn">620</a></label>
  <p class="i0" id="620">
    <i>live-build</i> は <i>syslinux</i> や (イメージの種類により) その派生物の一部をブートローダとしてデフォルトで利用します。これは要件に合わせて簡単に独自化できます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#621" class="lnkocn">621</a></label>
  <p class="i0" id="621">
    全面的なテーマを使うには <tt>/usr/share/live/build/bootloaders</tt> を <tt>config/bootloaders</tt> にコピーしてその中のファイルを編集します。サポートしているブートローダ全部の設定変更を望まない場合は、ブートローダの1つ、例えば <tt>config/bootloaders/isolinux</tt> にある <b>isolinux</b> だけを局所的に地域化したものを提供するのでも、活用方法によりますが十分です。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#622" class="lnkocn">622</a></label>
  <p class="i0" id="622">
    のようになります。デフォルトのテーマを変更してブートメニューとともに表示される背景画像に個別のものを使いたい場合は 640x480 ピクセルの画像を splash.png というファイル名で追加し、splash.svg ファイルを削除します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#623" class="lnkocn">623</a></label>
  <p class="i0" id="623">
    変更を加えるに至る要因は多々あります。例えば syslinux 派生物ではデフォルトでタイムアウト時間が0に設定されていて、この場合はスプラッシュ画面でキーが押されるまでいつまでも一時停止状態で止まっているということになります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#624" class="lnkocn">624</a></label>
  <p class="i0" id="624">
    デフォルトの <tt>iso-hybrid</tt> イメージのブート時のタイムアウト時間を変更する方法は、デフォルトの <b>isolinux.cfg</b> ファイルを編集して1/10秒単位でタイムアウト時間を指定するだけです。5秒後にブートするように <b>isolinux.cfg</b> を変更する場合は
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#625" class="lnkocn">625</a></label>
  <p class="code" id="625">
    include menu.cfg<br>
default vesamenu.c32<br>
prompt 0<br>
timeout 50<br>
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#626" class="lnkocn">626</a></label>
  <h5 class="norm" id="626"><a name="626"></a>
    <a name="c11.2" ></a><a name="h11.2" ></a>11.2 ISO メタ情報
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#627" class="lnkocn">627</a></label>
  <p class="i0" id="627">
    ISO9660 バイナリイメージの作成時に以下のオプションを使って、テキストの様々なメタ情報をイメージに追加できます。これはイメージのバージョンや設定をブートせずに簡単に識別する手助けとなります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#628" class="lnkocn">628</a></label>
  <ul>
  <li class="bullet" id="628">
    <tt>LB_ISO_APPLICATION/--iso-application NAME</tt>: これにはイメージ上に置かれる、アプリケーションの説明を記述します。最大長は128文字です。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#629" class="lnkocn">629</a></label>
  <ul>
  <li class="bullet" id="629">
    <tt>LB_ISO_PREPARER/--iso-preparer NAME</tt>: これはイメージの作成者を説明し、通常連絡先の詳細をいくらか含めます。このオプションのデフォルト値は作成に利用した <i>live-build</i> のバージョンで、後でデバッグするときに手がかりとなることを意図しています。最大長は128文字です。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#630" class="lnkocn">630</a></label>
  <ul>
  <li class="bullet" id="630">
    <tt>LB_ISO_PUBLISHER/--iso-publisher NAME</tt>: これはイメージの発行者を説明し、通常連絡先の詳細をいくらか含めます。最大長は128文字です。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#631" class="lnkocn">631</a></label>
  <ul>
  <li class="bullet" id="631">
    <tt>LB_ISO_VOLUME/--iso-volume NAME</tt>: これはイメージのボリュームIDを指定します。Windows や Apple Mac OS 等一部のプラットフォームではユーザから見えるラベルとして利用されます。最大長は32文字です。
  </li>
  </ul>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#632" class="lnkocn">632</a></label>
  <h1 class="norm" id="632"><a name="632"></a>
    Debian インストーラの独自化
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#633" class="lnkocn">633</a></label>
  <h4 class="norm" id="633"><a name="633"></a>
    <a name="h12" ></a><a name="debian_" ></a><a name="customizing-installer" ></a>12. Debian インストーラの独自化
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a href="#634" class="lnkocn">634</a></label>
  <p class="i0" id="634">
    Live システムのイメージは Debian インストーラと統合できます。インストールには収録内容やインストーラの動作方法によりいくつもの異なる種類があります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#635" class="lnkocn">635</a></label>
  <p class="i0" id="635">
    この節で「Debian インストーラ」と大文字を使った表記で参照しているところに注意してください - この表記の場合には公式の Debian システム用インストーラを明示的に指していて、他の何かではありません。「d-i」と短縮することもよくあります。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#636" class="lnkocn">636</a></label>
  <h5 class="norm" id="636"><a name="636"></a>
    <a name="c12.1" ></a><a name="h12.1" ></a>12.1 Debian インストーラの種類
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#637" class="lnkocn">637</a></label>
  <p class="i0" id="637">
    インストーラの主な3つの種類:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#638" class="lnkocn">638</a></label>
  <p class="i0" id="638">
    <b>「通常の」Debian インストーラ</b>: これは通常の Live システムのイメージで、(適切なブートローダからそれを選択した場合に) Debian のCDイメージをダウンロードしてそれをブートしたのと同様に標準の Debian インストーラを起動するための別個のカーネルと initrd を収録しています。Live システムとこういった別個の独立したインストーラを収録するイメージはよく「複合イメージ」と呼ばれます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#639" class="lnkocn">639</a></label>
  <p class="i0" id="639">
    こういったイメージでは、<i>debootstrap</i> を使ってローカルメディアやネットワークから .deb パッケージを取得、インストールすることで Debian がインストールされます。結果としてはデフォルトの Debian システムがハードディスクにインストールされます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#640" class="lnkocn">640</a></label>
  <p class="i0" id="640">
    このプロセス全体で、いくつもの方法で preseed を使って独自化できます。さらなる情報については Debian インストーラマニュアルの関連するページを見てください。機能する preseed ファイルが得られたら <i>live-build</i> が自動的にイメージに取り込んで使えるようになります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#641" class="lnkocn">641</a></label>
  <p class="i0" id="641">
    <b>「Live」Debian インストーラ</b>: これは Live システムイメージで、(適切なブートローダからそれを選択した場合に) Debian インストーラを起動するための別個のカーネルと initrd を収録しています。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#642" class="lnkocn">642</a></label>
  <p class="i0" id="642">
    インストールは上記で説明した「通常の」インストールと全く同じように進みますが、実際にパッケージをインストールする段階で、<i>debootstrap</i> を使ってパッケージを取得、インストールする代わりに、Live ファイルシステムのイメージを対象にコピーします。これは <i>live-installer</i> という特別な udeb により行っています。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#643" class="lnkocn">643</a></label>
  <p class="i0" id="643">
    この段階の後は、Debian インストーラはインストールや、ブートローダやローカルユーザ等の設定を通常どおり続けます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#644" class="lnkocn">644</a></label>
  <p class="i0" id="644">
    <b>注意:</b> 一つの Live メディアのブートローダの項目で通常のインストーラと Live インストーラの両方に対応するには、<tt>live-installer/enable=false</tt> という preseed により <i>live-installer</i> を無効化する必要があります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#645" class="lnkocn">645</a></label>
  <p class="i0" id="645">
    <b>「デスクトップ」Debian インストーラ</b>: 収録する Debian インストーラの種類を問わず、デスクトップからアイコンをクリックすることで <tt>d-i</tt> を起動できます。状況によってはこちらの方がユーザからわかりやすいこともあります。これを使えるようにするには <i>debian-installer-launcher</i> パッケージを収録する必要があります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#646" class="lnkocn">646</a></label>
  <p class="i0" id="646">
    <i>live-build</i> は Debian インストーラのイメージをデフォルトではイメージに収録しないことに注意してください。<tt>lb config</tt> により具体的に有効化する必要があります。さらに、「デスクトップ」インストーラが機能するようにするには Live システムのカーネルが指定されたアーキテクチャで <tt>d-i</tt> が利用するカーネルと一致する必要があることに注意してください。例えば:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#647" class="lnkocn">647</a></label>
  <p class="code" id="647">
    $ lb config --architectures i386 --linux-flavours 586 \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--debian-installer live<br>
$ echo debian-installer-launcher &gt;&gt; config/package-lists/my.list.chroot<br>
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#648" class="lnkocn">648</a></label>
  <h5 class="norm" id="648"><a name="648"></a>
    <a name="c12.2" ></a><a name="h12.2" ></a>12.2 preseed による Debian インストーラの独自化
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#649" class="lnkocn">649</a></label>
  <p class="i0" id="649">
    ‹<a href="https://www.debian.org/releases/stable/i386/apb.html" target="_top">https://www.debian.org/releases/stable/i386/apb.html</a>› にある Debian インストーラマニュアルの付録Bで説明されていますが「preseed は、インストールの実行中に手作業により回答を入力せずに、インストールプロセス中の質問の回答を設定する方法を提供します。これにより、ほとんどの方法のインストールを完全に自動化し、さらに通常のインストールでは利用できない特徴もあります」。この種の独自化は <i>live-build</i> を使って設定を <tt>preseed.cfg</tt> ファイルに書き、<tt>config/includes.installer/</tt> に置くことで最も完成させることができます。例えばロケールを <tt>en_US</tt> に設定する preseed は:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#650" class="lnkocn">650</a></label>
  <p class="code" id="650">
    $ echo "d-i debian-installer/locale string en_US" \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt; config/includes.installer/preseed.cfg<br>
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#651" class="lnkocn">651</a></label>
  <h5 class="norm" id="651"><a name="651"></a>
    <a name="c12.3" ></a><a name="h12.3" ></a>12.3 Debian インストーラの収録内容の独自化
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#652" class="lnkocn">652</a></label>
  <p class="i0" id="652">
    実験やデバッグの目的で、ローカルでビルドした <tt>d-i</tt> の一部である udeb パッケージを収録したいことがあるかもしれません。<tt>config/packages.binary/</tt> にそれを配置してイメージに収録します。 <a href="#live-chroot-local-includes">Live/chroot ローカルインクルード</a>  と同じ方法で内容を <tt>config/includes.installer/</tt> に置くことで、追加または置換するファイルやディレクトリを同様にインストーラの initrd に収録することもできます。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#653" class="lnkocn">653</a></label>
  <h1 class="norm" id="653"><a name="653"></a>
    プロジェクト
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#654" class="lnkocn">654</a></label>
  <h1 class="norm" id="654"><a name="654"></a>
    プロジェクトへの貢献
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#655" class="lnkocn">655</a></label>
  <h4 class="norm" id="655"><a name="655"></a>
    <a name="h13" ></a><a name="" ></a><a name="contributing-to-project" ></a>13. プロジェクトへの貢献
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a href="#656" class="lnkocn">656</a></label>
  <p class="i0" id="656">
    貢献物の提出にあたっては著作権者を明確に識別し、適用するライセンス文を収録してください。受け入れられるためには、その貢献物はその文書の他の部分と同一の、GPL バージョン 3 以降というライセンスを採用する必要があることに注意してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#657" class="lnkocn">657</a></label>
  <p class="i0" id="657">
    翻訳やパッチといったプロジェクトへの貢献は大いに歓迎します。誰もがリポジトリに直接コミットできますが、大きな変更についてはまずメーリングリストに送って議論するようお願いします。さらなる情報については <a href="#contact">連絡先</a>  節を見てください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#658" class="lnkocn">658</a></label>
  <p class="i0" id="658">
    Live システムプロジェクトではGitをソースコード管理用のバージョン管理システムとして利用しています。 <a href="#git-repositories">Gitリポジトリ</a>  で説明しているように、開発用ブランチは <b>debian</b> と <b>debian-next</b> の2つあります。debian-next ブランチの <i>live-boot</i>、<i>live-build</i>、<i>live-config</i>、<i>live-images</i>、<i>live-manual</i>、<i>live-tools</i> リポジトリには誰でもコミットできます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#659" class="lnkocn">659</a></label>
  <p class="i0" id="659">
    ただし、特定の制限があります。サーバは
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#660" class="lnkocn">660</a></label>
  <ul>
  <li class="bullet" id="660">
    fast-forward ではないプッシュ
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#661" class="lnkocn">661</a></label>
  <ul>
  <li class="bullet" id="661">
    マージコミット
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#662" class="lnkocn">662</a></label>
  <ul>
  <li class="bullet" id="662">
    タグやブランチの追加や削除
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#663" class="lnkocn">663</a></label>
  <p class="i0" id="663">
    を拒否します。あらゆるコミットを訂正できるとはいえ、自分の常識に従って、良いコミットメッセージを使って良いコミットを行うようお願いします。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#664" class="lnkocn">664</a></label>
  <ul>
  <li class="bullet" id="664">
    完結した、有意な文で構成されるコミットメッセージを英語で書き、大文字から始めて句点で終えるようにしてください。通常、「Fixing/Adding/Removing/Correcting/Translating/...」のようなものから開始します。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#665" class="lnkocn">665</a></label>
  <ul>
  <li class="bullet" id="665">
    良いコミットメッセージを書いてください。先頭行はそのコミットの内容を正確にまとめるようにしてください。これは changelog に収録されることになります。何か説明がさらに必要であれば、先頭行の後に1行空けてから書き、各段落の後には新たな空行を空けてください。段落の行の長さは80文字を超えないようにしてください。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#666" class="lnkocn">666</a></label>
  <ul>
  <li class="bullet" id="666">
    コミットは小分けにしてください。これは関係のないものをまとめてコミットしないようにということです。各変更ごとに別個にコミットするようにしてください。
  </li>
  </ul>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#667" class="lnkocn">667</a></label>
  <h5 class="norm" id="667"><a name="667"></a>
    <a name="c13.1" ></a><a name="h13.1" ></a>13.1 変更を加える
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#668" class="lnkocn">668</a></label>
  <p class="i0" id="668">
    リポジトリに送るには、以下の手順に従う必要があります。ここでは <i>live-manual</i> を例として使うのでそれは作業したいリポジトリに置き換えてください。<i>live-manual</i> を変更する方法に関する詳細な情報については <a href="#how-to-contribute">この文書への貢献</a>  を見てください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#669" class="lnkocn">669</a></label>
  <ul>
  <li class="bullet" id="669">
    公開コミットキーを取得します:
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#670" class="lnkocn">670</a></label>
  <p class="code" id="670">
    $ mkdir -p ~/.ssh/keys<br>
$ wget http://debian-live.alioth.debian.org/other/keys/git@debian-live.alioth.debian.org -O ~/.ssh/keys/git@debian-live.alioth.debian.org<br>
$ wget http://debian-live.alioth.debian.org/other/keys/git@debian-live.alioth.debian.org.pub -O ~/.ssh/keys/git@debian-live.alioth.debian.org.pub<br>
$ chmod 0600 ~/.ssh/keys/git@debian-live.alioth.debian.org*<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#671" class="lnkocn">671</a></label>
  <ul>
  <li class="bullet" id="671">
    openssh-client の設定に以下を追記します:
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#672" class="lnkocn">672</a></label>
  <p class="code" id="672">
    $ cat &gt;&gt; ~/.ssh/config &lt;&lt; EOF<br>
Host debian-live.alioth.debian.org<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hostname debian-live.alioth.debian.org<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;User git<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IdentitiesOnly yes<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IdentityFile ~/.ssh/keys/git@debian-live.alioth.debian.org<br>
EOF<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#673" class="lnkocn">673</a></label>
  <ul>
  <li class="bullet" id="673">
    ssh 経由で <i>live-manual</i> の複製を取得します:
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#674" class="lnkocn">674</a></label>
  <p class="code" id="674">
    $ git clone ssh://git.debian.org/git/debian-live/live-manual.git<br>
$ cd live-manual &amp;&amp; git checkout debian-next<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#675" class="lnkocn">675</a></label>
  <ul>
  <li class="bullet" id="675">
    Gitで作者とメールをセットしたことを確認してください:
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#676" class="lnkocn">676</a></label>
  <p class="code" id="676">
    &nbsp;&nbsp;$ git config user.name "John Doe"<br>
&nbsp;&nbsp;$ git config user.email john@example.org<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#677" class="lnkocn">677</a></label>
  <p class="i0" id="677">
    <b>重要:</b> 変更はどれも <b>debian-next</b> ブランチにコミットする必要があるということを忘れないでください
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#678" class="lnkocn">678</a></label>
  <ul>
  <li class="bullet" id="678">
    変更を加えます。この例ではまずパッチの適用を扱う新しい節を書き、ファイルの追加をコミットする下準備をしてコミットメッセージを
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#679" class="lnkocn">679</a></label>
  <p class="code" id="679">
    $ git commit -a -m "Adding a section on applying patches."<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#680" class="lnkocn">680</a></label>
  <ul>
  <li class="bullet" id="680">
    のように書いてサーバにコミットを送ります:
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#681" class="lnkocn">681</a></label>
  <p class="code" id="681">
    $ git push<br>
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#682" class="lnkocn">682</a></label>
  <h5 class="norm" id="682"><a name="682"></a>
    <a name="h13.2" ></a><a name="translation-of-manpages" ></a>13.2 man ページの翻訳
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#683" class="lnkocn">683</a></label>
  <p class="i0" id="683">
    プロジェクトが保守している様々な live-* パッケージの man ページを翻訳することによりプロジェクトに貢献することもできます。手順は新しく最初から翻訳を開始するのか、それとも既に存在する翻訳について作業を続けるのか、によって異なります:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#684" class="lnkocn">684</a></label>
  <ul>
  <li class="bullet" id="684">
    既に存在する翻訳について作業する
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#685" class="lnkocn">685</a></label>
  <p class="i0" id="685">
    既存の言語版への翻訳を保守したい場合、変更は <tt>manpages/po/${言語}/*.po</tt> ファイルに対して行い、それから <tt>manpages/</tt> ディレクトリで <tt>make rebuild</tt> を実行する必要があります。これにより <tt>manpages/${言語}/*</tt> にある実際の man ページが更新されます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#686" class="lnkocn">686</a></label>
  <ul>
  <li class="bullet" id="686">
    新しく最初から翻訳を開始する
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#687" class="lnkocn">687</a></label>
  <p class="i0" id="687">
    プロジェクトの man ページに新しい翻訳を追加する場合も同じような手順を追うことになります。以下のような手順になるでしょう:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#688" class="lnkocn">688</a></label>
  <ul>
  <li class="i2" id="688">
    <i>poedit</i> 等、自分の使いやすいテキストエディタで <tt>manpages/pot/</tt> ファイルを開き、<tt>manpages/po/${言語}/</tt> に .po ファイルを保存してください (<tt>${言語}/</tt> ディレクトリを作成しておく必要があるでしょう)。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#689" class="lnkocn">689</a></label>
  <ul>
  <li class="i2" id="689">
    <tt>manpages/</tt> ディレクトリで <tt>make rebuild</tt> を実行し、実際の man ページを収録する <tt>manpages/${言語}/</tt> 以下のファイルを作成します。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#690" class="lnkocn">690</a></label>
  <p class="i0" id="690">
    ディレクトリやファイルを全て git add して対象に入れて git commit し、最後に git push して git サーバに送らないといけないことを覚えておいてください。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#691" class="lnkocn">691</a></label>
  <h1 class="norm" id="691"><a name="691"></a>
    バグの報告
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#692" class="lnkocn">692</a></label>
  <h4 class="norm" id="692"><a name="692"></a>
    <a name="h14" ></a><a name="" ></a><a name="bugs" ></a>14. バグの報告
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a href="#693" class="lnkocn">693</a></label>
  <p class="i0" id="693">
    Live システムは完璧にはほど遠いですが、可能な限り完璧に近づけたいと思っています - あなたの支援とともに。バグの報告を躊躇わないでください。バグがあるのに報告されないよりも二重に報告される方がいいからです。この章ではバグ報告を提出するにあたっての推奨事項について説明します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#694" class="lnkocn">694</a></label>
  <p class="i0" id="694">
    せっかちな人向け:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#695" class="lnkocn">695</a></label>
  <ul>
  <li class="bullet" id="695">
    常にまず ‹<a href="http://debian-live.alioth.debian.org/" target="_top">http://debian-live.alioth.debian.org/</a>› にある私達のホームページにあるイメージの更新状況により既知の問題を確認してください。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#696" class="lnkocn">696</a></label>
  <ul>
  <li class="bullet" id="696">
    バグ報告を提出する前に使用している <i>live-build</i>、<i>live-boot</i>、<i>live-config</i>、<i>live-tools</i> のブランチの*{最新版}* (<i>live-build</i> 4 を使っているなら最新のバージョン 4.x の <i>live-build</i>) でそのバグを再現できるか常に確認します。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#697" class="lnkocn">697</a></label>
  <ul>
  <li class="bullet" id="697">
    バグについて*{できるだけ具体的な情報}*を提示するようにしてください。これには (最低限) 利用した <i>live-build</i>、<i>live-boot</i>、<i>live-config</i>、<i>live-tools</i> のバージョンや Live システムをどのディストリビューションでビルドしたのか、等があります。
  </li>
  </ul>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#698" class="lnkocn">698</a></label>
  <h5 class="norm" id="698"><a name="698"></a>
    <a name="c14.1" ></a><a name="h14.1" ></a>14.1 既知の問題
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#699" class="lnkocn">699</a></label>
  <p class="i0" id="699">
    Debian <b>テスト版 (testing)</b> と Debian <b>不安定版 (unstable)</b> ディストリビューションは変化しているのでこのどちらかを対象システムディストリビューションに指定している場合、ビルドが常に成功するとは限りません。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#700" class="lnkocn">700</a></label>
  <p class="i0" id="700">
    そのためにあまり困難になる場合はビルドに*{テスト版 (testing)}* や*{不安定版 (unstable)}* をベースにしたシステムではなく*{安定版 (stable)} を使ってください。<i>live-build</i> は常に*{安定版 (stable)}* リリースをデフォルトとしています。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#701" class="lnkocn">701</a></label>
  <p class="i0" id="701">
    現在わかっている問題は ‹<a href="http://debian-live.alioth.debian.org/" target="_top">http://debian-live.alioth.debian.org/</a>› にある私達のホームページの「status」に一覧があります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#702" class="lnkocn">702</a></label>
  <p class="i0" id="702">
    開発用ディストリビューションのパッケージにある問題を正しく識別、修正するための訓練はこのマニュアルの目的ではありませんが、常に確認できることが2つあります: <b>テスト版 (testing)</b> を対象ディストリビューションとしてビルドに失敗した場合に*{不安定版 (unstable)}* で試してみるということです。<b>不安定版 (unstable)</b> でもダメな場合は*{テスト版 (testing)}* に差し戻し、失敗しているパッケージのもっと新しいバージョンを*{不安定版 (unstable)}* から利用するようにしてみます (詳細については  <a href="#apt-pinning">APTのPIN設定</a>  参照)。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#703" class="lnkocn">703</a></label>
  <h5 class="norm" id="703"><a name="703"></a>
    <a name="c14.2" ></a><a name="h14.2" ></a>14.2 最初から再ビルド
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#704" class="lnkocn">704</a></label>
  <p class="i0" id="704">
    きれいではない環境でシステムがビルドされたことにより特定のバグが発生しているのではないことを保証するため、Live システム全体を最初から再ビルドして、そのバグが再現するか常に確認してください。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#705" class="lnkocn">705</a></label>
  <h5 class="norm" id="705"><a name="705"></a>
    <a name="c14.3" ></a><a name="h14.3" ></a>14.3 最新のパッケージを使う
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#706" class="lnkocn">706</a></label>
  <p class="i0" id="706">
    問題を再現 (最終的には修正) しようとするときに古くなったパッケージを使用すると重大な問題を引き起こす可能性があります。ビルドシステムが最新であること、同様にそのイメージに収録されているパッケージがどれも最新であることを確認してください。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#707" class="lnkocn">707</a></label>
  <h5 class="norm" id="707"><a name="707"></a>
    <a name="h14.4" ></a><a name="collect-information" ></a>14.4 情報収集
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#708" class="lnkocn">708</a></label>
  <p class="i0" id="708">
    報告では十分な情報を提供してください。最低でもそのバグが発生した <i>live-build</i> の正確なバージョンとそれを再現する手順を含めてください。常識的に考えて問題解決の支援になりそうだと思う関連情報が何か他にあればそれも提供してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#709" class="lnkocn">709</a></label>
  <p class="i0" id="709">
    バグ報告を最大限に活用するため、最低限次の情報が必要です:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#710" class="lnkocn">710</a></label>
  <ul>
  <li class="bullet" id="710">
    ホストシステムのアーキテクチャ
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#711" class="lnkocn">711</a></label>
  <ul>
  <li class="bullet" id="711">
    ホストシステムのディストリビューション
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#712" class="lnkocn">712</a></label>
  <ul>
  <li class="bullet" id="712">
    ホストシステムの <i>live-build</i> のバージョン
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#713" class="lnkocn">713</a></label>
  <ul>
  <li class="bullet" id="713">
    ホストシステムの <i>debootstrap</i> のバージョン
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#714" class="lnkocn">714</a></label>
  <ul>
  <li class="bullet" id="714">
    Live システムのアーキテクチャ
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#715" class="lnkocn">715</a></label>
  <ul>
  <li class="bullet" id="715">
    Live システムのディストリビューション
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#716" class="lnkocn">716</a></label>
  <ul>
  <li class="bullet" id="716">
    Live システムの <i>live-boot</i> のバージョン
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#717" class="lnkocn">717</a></label>
  <ul>
  <li class="bullet" id="717">
    Live システムの <i>live-config</i> のバージョン
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#718" class="lnkocn">718</a></label>
  <ul>
  <li class="bullet" id="718">
    Live システムの <i>live-tools</i> のバージョン
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#719" class="lnkocn">719</a></label>
  <p class="i0" id="719">
    <tt>tee</tt>  コマンドを使ってビルドプロセスのログを生成することができます。<tt>auto/build</tt> スクリプトによりこれを自動的に行うことを推奨します (詳細は <a href="#managing-a-configuration">設定管理</a>  参照)。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#720" class="lnkocn">720</a></label>
  <p class="code" id="720">
    # lb build 2&gt;&amp;1 | tee build.log<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#721" class="lnkocn">721</a></label>
  <p class="i0" id="721">
    ブート時に、<i>live-boot</i> と <i>live-config</i> はログファイルを <tt>/var/log/live/</tt> に保存します。エラーメッセージはここを確認してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#722" class="lnkocn">722</a></label>
  <p class="i0" id="722">
    さらに、他のエラーを除外するため、<tt>config/</tt> ディレクトリを tar でまとめてどこかにアップロードするのは常に良い方法です (メーリングリストに添付として送ら*{ないでください}*)。それにより、そのエラーの再現を試みることが可能になります。それが (例えばサイズの問題により) 困難な場合は <tt>lb config --dump</tt> の出力を使ってください。これは設定ツリーのまとめです (つまり <tt>config/</tt> のサブディレクトリにあるファイル一覧を列挙しますがファイル自体は収録しません)。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#723" class="lnkocn">723</a></label>
  <p class="i0" id="723">
    ログは全て英語のロケール設定で生成されたものを提示することを忘れないでください。例えば先頭に <tt>LC_ALL=C</tt> や <tt>LC_ALL=en_US</tt> を付けて <i>live-build</i> コマンドを実行してください。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#724" class="lnkocn">724</a></label>
  <h5 class="norm" id="724"><a name="724"></a>
    <a name="c14.5" ></a><a name="h14.5" ></a>14.5 可能であれば失敗している状況を分離する
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#725" class="lnkocn">725</a></label>
  <p class="i0" id="725">
    可能であれば失敗している状況を可能な限りうまくいかなくなる最小の変更に分離してください。これは常に簡単だとは限らないので、報告の際にできないようであれば気にする必要はありません。しかし、開発サイクルを向上させたい場合、繰り返しのたびに変更する量を十分に小さくすると、実際の設定により近く、より単純な「ベース」設定を構成することによりうまくいかなくなる追加の変更点だけに問題を分離することができるかもしれません。どの変更によりうまくいかなくなっているのか区別するのに苦労している場合、それぞれの変更点が多すぎることが考えられ、その場合開発の進行は緩くなるはずです。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#726" class="lnkocn">726</a></label>
  <h5 class="norm" id="726"><a name="726"></a>
    <a name="c14.6" ></a><a name="h14.6" ></a>14.6 正しいパッケージに対してバグを報告する
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#727" class="lnkocn">727</a></label>
  <p class="i0" id="727">
    どの構成要素がそのバグの原因なのかわからない、あるいはそのバグが Live システム全般に関係するバグである場合は debian-live 疑似パッケージに対するバグとして報告してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#728" class="lnkocn">728</a></label>
  <p class="i0" id="728">
    とはいうものの、バグの現れ方を元にその範囲を限定してくれると助かります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#729" class="lnkocn">729</a></label>
  <h6 class="norm" id="729"><a name="729"></a>
    <a name="c14.6.1" ></a><a name="h14.6.1" ></a>14.6.1 ビルド時のパッケージ収集中
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#730" class="lnkocn">730</a></label>
  <p class="i0" id="730">
    <i>live-build</i> は最初に <i>debootstrap</i> で Debian システムの基本的なパッケージを収集します。バグがここで起きていると思われる場合は、そのエラーが特定の Debian パッケージに (ほとんどの場合こちらです) 関連するのか、パッケージ収集ツール自体に関連するものなのか確認してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#731" class="lnkocn">731</a></label>
  <p class="i0" id="731">
    どちらの場合でも、これは Live システムではなく Debian 自体のバグで、恐らく私達が直接修正することはできません。こういったバグはパッケージ収集ツールまたは失敗しているパッケージに対して報告してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#732" class="lnkocn">732</a></label>
  <h6 class="norm" id="732"><a name="732"></a>
    <a name="c14.6.2" ></a><a name="h14.6.2" ></a>14.6.2 ビルド時のパッケージインストール中
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#733" class="lnkocn">733</a></label>
  <p class="i0" id="733">
    <i>live-build</i> は追加のパッケージを Debian アーカイブからインストールしているため、利用する Debian ディストリビューションとその日のアーカイブの状態によっては失敗するかもしれません。バグがここで起きていると思われる場合は、そのエラーが通常のシステムで再現できるか確認してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#734" class="lnkocn">734</a></label>
  <p class="i0" id="734">
    通常のシステムで再現できる場合これは Live システムではなく Debian のバグです - 失敗しているパッケージに対して報告してください。Live システムのビルドとは別に <i>debootstrap</i> を実行、あるいは <tt>lbbootstrap --debug</tt> を実行するとさらなる情報を得られるでしょう。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#735" class="lnkocn">735</a></label>
  <p class="i0" id="735">
    また、ローカルミラーやプロキシの類を使っていて問題が起きている場合はまず、公式ミラーからパッケージを収集した場合に再現するか常に確認してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#736" class="lnkocn">736</a></label>
  <h6 class="norm" id="736"><a name="736"></a>
    <a name="c14.6.3" ></a><a name="h14.6.3" ></a>14.6.3 ブート時
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#737" class="lnkocn">737</a></label>
  <p class="i0" id="737">
    イメージがブートしない場合は <a href="#collect-information">情報収集</a>  で指定している情報を添えてメーリングリストに報告してください。そのイメージが正確にどのように/どの段階で失敗しているのか、仮想化を使っているのか実際のハードウェアなのか、ということについて忘れずに言及してください。何らかの仮想化技術を使っている場合はバグを報告する前に常に実際のハードウェアで実行してください。失敗しているときのスクリーンショットを提供することも、とても参考になります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#738" class="lnkocn">738</a></label>
  <h6 class="norm" id="738"><a name="738"></a>
    <a name="c14.6.4" ></a><a name="h14.6.4" ></a>14.6.4 実行時
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#739" class="lnkocn">739</a></label>
  <p class="i0" id="739">
    パッケージのインストールには成功したけれども Live システムを実際に実行している間に何か失敗している場合、これは恐らく Live システムのバグです。その場合:
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#740" class="lnkocn">740</a></label>
  <h5 class="norm" id="740"><a name="740"></a>
    <a name="c14.7" ></a><a name="h14.7" ></a>14.7 調査してください
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#741" class="lnkocn">741</a></label>
  <p class="i0" id="741">
    バグを報告する前に、問題の症状やそのエラーメッセージについてウェブを検索してください。その問題に遭っているのがあなた一人だけだという可能性は非常に低いからです。他のどこかで議題に上り、解決できそうな方法やパッチ、回避策が提案されている可能性は常にあります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#742" class="lnkocn">742</a></label>
  <p class="i0" id="742">
    Live システムのメーリングリストや同様にホームページには。最新の情報がある可能性があるので、特に注意を払ってください。そういった情報が存在する場合は、バグ報告で常に参照するようにしてください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#743" class="lnkocn">743</a></label>
  <p class="i0" id="743">
    さらに、似たことが既に報告されていないか <i>live-build</i>、<i>live-boot</i>、<i>live-config</i>、<i>live-tools</i> の現在のバグ一覧を確認してください。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#744" class="lnkocn">744</a></label>
  <h5 class="norm" id="744"><a name="744"></a>
    <a name="c14.8" ></a><a name="h14.8" ></a>14.8 バグの報告先
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#745" class="lnkocn">745</a></label>
  <p class="i0" id="745">
    Live システムプロジェクトではバグ追跡システム (BTS) に報告されたバグを全て追跡しています。このシステムの使い方についての情報は ‹<a href="https://bugs.debian.org/" target="_top">https://bugs.debian.org/</a>› を見てください。<tt>reportbug</tt> パッケージの同名コマンドを使ってバグを報告することもできます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#746" class="lnkocn">746</a></label>
  <p class="i0" id="746">
    一般的に、ビルド時のエラーは <i>live-build</i> に、ブート時のエラーは <i>live-boot</i> に、実行時のエラーは <i>live-config</i> パッケージに対して報告してください。どのパッケージが適切なのかよくわからない、あるいはバグの報告前にもっと支援が必要だという場合は debian-live 疑似パッケージに対して報告してください。その場合は私達が調べて適切なものに割り当てし直します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#747" class="lnkocn">747</a></label>
  <p class="i0" id="747">
    (Ubuntu その他の) Debian 派生ディストリビューションで見つかったバグは、それが公式の Debian パッケージを使っている Debian システムでも再現するものでない限り、Debian BTS に報告すべきでは*{ない}*ことに注意してください。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#748" class="lnkocn">748</a></label>
  <h1 class="norm" id="748"><a name="748"></a>
    コーディングスタイル
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#749" class="lnkocn">749</a></label>
  <h4 class="norm" id="749"><a name="749"></a>
    <a name="h15" ></a><a name="" ></a><a name="coding-style" ></a>15. コーディングスタイル
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a href="#750" class="lnkocn">750</a></label>
  <p class="i0" id="750">
    この章では Live システムで利用されているコーディングスタイルについて述べます。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#751" class="lnkocn">751</a></label>
  <h5 class="norm" id="751"><a name="751"></a>
    <a name="c15.1" ></a><a name="h15.1" ></a>15.1 互換性
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#752" class="lnkocn">752</a></label>
  <ul>
  <li class="bullet" id="752">
    Bash シェル固有の書式や記号を使わないでください。例えば配列構造の利用など
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#753" class="lnkocn">753</a></label>
  <ul>
  <li class="bullet" id="753">
    POSIX のサブセットだけを使ってください - 例えば `foo` よりも $(foo) を使ってください。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#754" class="lnkocn">754</a></label>
  <ul>
  <li class="bullet" id="754">
    'sh -n' と 'checkbashisms' によりスクリプトをチェックできます。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#755" class="lnkocn">755</a></label>
  <ul>
  <li class="bullet" id="755">
    シェルコードが全て確実に 'set -e' で動作するようにしてください。
  </li>
  </ul>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#756" class="lnkocn">756</a></label>
  <h5 class="norm" id="756"><a name="756"></a>
    <a name="c15.2" ></a><a name="h15.2" ></a>15.2 インデント
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#757" class="lnkocn">757</a></label>
  <ul>
  <li class="bullet" id="757">
    常にスペースよりもタブを使います。
  </li>
  </ul>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#758" class="lnkocn">758</a></label>
  <h5 class="norm" id="758"><a name="758"></a>
    <a name="c15.3" ></a><a name="h15.3" ></a>15.3 改行
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#759" class="lnkocn">759</a></label>
  <ul>
  <li class="bullet" id="759">
    通常、行は最大で80文字までです。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#760" class="lnkocn">760</a></label>
  <ul>
  <li class="bullet" id="760">
    「Linux 式」で改行します:
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#761" class="lnkocn">761</a></label>
  <p class="i0" id="761">
    悪い例:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#762" class="lnkocn">762</a></label>
  <p class="code" id="762">
    if foo; then<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bar<br>
fi<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#763" class="lnkocn">763</a></label>
  <p class="i0" id="763">
    良い例:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#764" class="lnkocn">764</a></label>
  <p class="code" id="764">
    if foo<br>
then<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bar<br>
fi<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#765" class="lnkocn">765</a></label>
  <ul>
  <li class="bullet" id="765">
    関数についても同様です:
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#766" class="lnkocn">766</a></label>
  <p class="i0" id="766">
    悪い例:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#767" class="lnkocn">767</a></label>
  <p class="code" id="767">
    Foo () {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bar<br>
}<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#768" class="lnkocn">768</a></label>
  <p class="i0" id="768">
    良い例:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#769" class="lnkocn">769</a></label>
  <p class="code" id="769">
    Foo ()<br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bar<br>
}<br>
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#770" class="lnkocn">770</a></label>
  <h5 class="norm" id="770"><a name="770"></a>
    <a name="c15.4" ></a><a name="h15.4" ></a>15.4 変数
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#771" class="lnkocn">771</a></label>
  <ul>
  <li class="bullet" id="771">
    変数は常に大文字です。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#772" class="lnkocn">772</a></label>
  <ul>
  <li class="bullet" id="772">
    <i>live-build</i> で利用する変数は先頭を常に <tt>LB_</tt> で始めます。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#773" class="lnkocn">773</a></label>
  <ul>
  <li class="bullet" id="773">
    <i>live-build</i> 内部の一時変数は <tt>&#095;LB_</tt> で始めます。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#774" class="lnkocn">774</a></label>
  <ul>
  <li class="bullet" id="774">
    <i>live-build</i> のローカル変数は <tt>&#095;&#095;LB_</tt> で始めます。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#775" class="lnkocn">775</a></label>
  <ul>
  <li class="bullet" id="775">
    <i>live-config</i> 中のブートパラメータにつながる変数は <tt>LIVE_</tt> で始めます。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#776" class="lnkocn">776</a></label>
  <ul>
  <li class="bullet" id="776">
    <i>live-config</i> 中の他の変数は全て <tt>_</tt> で始めます。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#777" class="lnkocn">777</a></label>
  <ul>
  <li class="bullet" id="777">
    変数は大括弧「{}」で囲みます。例えば <tt>$FOO</tt> ではなく <tt>${FOO}</tt> とします。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#778" class="lnkocn">778</a></label>
  <ul>
  <li class="bullet" id="778">
    空白文字の可能性を考慮し、常に引用符を使って変数を保護します: <tt>${FOO}</tt> ではなく <tt>"${FOO}"</tt> とします。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#779" class="lnkocn">779</a></label>
  <ul>
  <li class="bullet" id="779">
    一貫性を保つため、変数に値を割り当てるときは常に引用符を使います:
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#780" class="lnkocn">780</a></label>
  <p class="i0" id="780">
    悪い例:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#781" class="lnkocn">781</a></label>
  <p class="code" id="781">
    FOO=bar<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#782" class="lnkocn">782</a></label>
  <p class="i0" id="782">
    良い例:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#783" class="lnkocn">783</a></label>
  <p class="code" id="783">
    FOO="bar"<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#784" class="lnkocn">784</a></label>
  <ul>
  <li class="bullet" id="784">
    複数の変数を使うときは表現全体を引用符で囲みます:
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#785" class="lnkocn">785</a></label>
  <p class="i0" id="785">
    悪い例:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#786" class="lnkocn">786</a></label>
  <p class="code" id="786">
    if [ -f "${FOO}"/foo/"${BAR}"/bar ]<br>
then<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foobar<br>
fi<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#787" class="lnkocn">787</a></label>
  <p class="i0" id="787">
    良い例:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#788" class="lnkocn">788</a></label>
  <p class="code" id="788">
    if [ -f "${FOO}/foo/${BAR}/bar" ]<br>
then<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foobar<br>
fi<br>
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#789" class="lnkocn">789</a></label>
  <h5 class="norm" id="789"><a name="789"></a>
    <a name="c15.5" ></a><a name="h15.5" ></a>15.5 その他
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#790" class="lnkocn">790</a></label>
  <ul>
  <li class="bullet" id="790">
    sed を呼び出すときは区切り文字に「<tt>|</tt>」を使います。例えば「<tt>sed -e 's|foo|bar|'</tt>」
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#791" class="lnkocn">791</a></label>
  <ul>
  <li class="bullet" id="791">
    比較やテストには <tt>test</tt> コマンドを使わず、「<tt>[</tt>」や「<tt>]</tt>」を使います。例えば「<tt>if [ -x /bin/foo ]; ...</tt>」を使い、「<tt>if test -x /bin/foo; ...</tt>」は使いません。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#792" class="lnkocn">792</a></label>
  <ul>
  <li class="bullet" id="792">
    <tt>test</tt> よりも <tt>case</tt> の方が読みやすく実行速度も早いため、可能な部分ではこちらを使います。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#793" class="lnkocn">793</a></label>
  <ul>
  <li class="bullet" id="793">
    ユーザの環境と混ざる可能性を限定するため、関数の名前には大文字を使います。
  </li>
  </ul>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#794" class="lnkocn">794</a></label>
  <h1 class="norm" id="794"><a name="794"></a>
    手順
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#795" class="lnkocn">795</a></label>
  <h4 class="norm" id="795"><a name="795"></a>
    <a name="h16" ></a><a name="" ></a><a name="procedures" ></a>16. 手順
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a href="#796" class="lnkocn">796</a></label>
  <p class="i0" id="796">
    この章では、Debian の他のチームと協調する必要のある、Live システムプロジェクトの様々な作業の手順について触れます。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#797" class="lnkocn">797</a></label>
  <h5 class="norm" id="797"><a name="797"></a>
    <a name="c16.1" ></a><a name="h16.1" ></a>16.1 主要リリース
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#798" class="lnkocn">798</a></label>
  <p class="i0" id="798">
    Debian の安定版の新しい主要バージョンのリリースでは、その完成のために多くの異なるチームが協調して作業しています。どこかの時点で、Live チームが参加して Live システムのイメージをビルドします。そのための要件は
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#799" class="lnkocn">799</a></label>
  <ul>
  <li class="bullet" id="799">
    リリースしたバージョンに該当する debian 及び debian-security アーカイブを収録している、debian-live の buildd からアクセスできるミラー
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#800" class="lnkocn">800</a></label>
  <ul>
  <li class="bullet" id="800">
    イメージの名前は既知の形式である必要があります (例えば debian-live-バージョン-アーキテクチャ-収録デスクトップ環境等.iso)。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#801" class="lnkocn">801</a></label>
  <ul>
  <li class="bullet" id="801">
    debian-cd から来るデータを同期する必要があります (udeb 除外一覧)。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#802" class="lnkocn">802</a></label>
  <ul>
  <li class="bullet" id="802">
    ビルドされたイメージのミラーが cdimage.debian.org に置かれます。
  </li>
  </ul>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#803" class="lnkocn">803</a></label>
  <h5 class="norm" id="803"><a name="803"></a>
    <a name="c16.2" ></a><a name="h16.2" ></a>16.2 ポイントリリース
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#804" class="lnkocn">804</a></label>
  <ul>
  <li class="bullet" id="804">
    ここでも、debian と debian-security の更新されたミラーが必要です。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#805" class="lnkocn">805</a></label>
  <ul>
  <li class="bullet" id="805">
    ビルドされたイメージのミラーが cdimage.debian.org に置かれます。
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#806" class="lnkocn">806</a></label>
  <ul>
  <li class="bullet" id="806">
    告知メールを送ります
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#807" class="lnkocn">807</a></label>
  <h6 class="norm" id="807"><a name="807"></a>
    <a name="c16.2.1" ></a><a name="h16.2.1" ></a>16.2.1 ある Debian リリースの最後のポイントリリース
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#808" class="lnkocn">808</a></label>
  <p class="i0" id="808">
    ある Debian リリース向けの最後のイメージを ftp.debian.org から archive.debian.org に移動した後にビルドするときには、chroot とバイナリミラーの両方を調整することを忘れないでください。そうすることで、古いビルド済み Live イメージをユーザが変更しなくてもそのまま続けて使えるようになります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#809" class="lnkocn">809</a></label>
  <h6 class="norm" id="809"><a name="809"></a>
    <a name="c16.2.2" ></a><a name="h16.2.2" ></a>16.2.2 ポイントリリース告知用テンプレート
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#810" class="lnkocn">810</a></label>
  <p class="i0" id="810">
    ポイントリリース用の告知メールはテンプレートと以下のコマンドを使って生成できます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#811" class="lnkocn">811</a></label>
  <p class="code" id="811">
    $ sed \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-e 's|@MAJOR@|9.0|g' \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-e 's|@MINOR@|9.0.1|g' \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-e 's|@CODENAME@|stretch|g' \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-e 's|@ANNOUNCE@|2017/msgXXXXX.html|g'<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#812" class="lnkocn">812</a></label>
  <p class="i0" id="812">
    メールを送る前に注意深く確認し、他の人による校正を受けてください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#813" class="lnkocn">813</a></label>
  <p class="code" id="813">
    Updated Live @MAJOR@: @MINOR@ released<br><br>
The Live Systems Project is pleased to announce the @MINOR@ update of the<br>
Live images for the stable distribution Debian @MAJOR@ (codename "@CODENAME@").<br><br>
The images are available for download at:<br><br>
&nbsp;&nbsp;&nbsp;&lt;http://debian-live.alioth.debian.org/cdimage/release/current/&gt;<br> <br>
and later at:<br><br>
&nbsp;&nbsp;&nbsp;&lt;http://cdimage.debian.org/cdimage/release/current-live/&gt;<br> <br>
This update includes the changes of the Debian @MINOR@ release:<br><br>
&nbsp;&nbsp;&nbsp;&lt;https://lists.debian.org/debian-announce/@ANNOUNCE@&gt;<br> <br>
Additionally it includes the following Live-specific changes:<br><br>
&nbsp;&nbsp;* [LIVE 固有の変更をここに]<br>
&nbsp;&nbsp;* [LIVE 固有の変更をここに]<br>
&nbsp;&nbsp;* [大きな問題については専用の節を作ることもあります]<br><br>
About Live Systems<br>
------------------<br>
The Live Systems Project produces the tools used to build official<br>
live systems and the official live images themselves for Debian.<br><br>
About Debian<br>
------------<br>
The Debian Project is an association of Free Software developers who<br>
volunteer their time and effort in order to produce the completely free<br>
operating system Debian.<br><br>
Contact Information<br>
-------------------<br>
For further information, please visit the Live Systems web pages at<br>
&lt;http://debian-live.alioth.debian.org/&gt;, or contact the Live Systems team at<br>
&lt;debian-live@lists.debian.org&gt;.<br>
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#814" class="lnkocn">814</a></label>
  <h1 class="norm" id="814"><a name="814"></a>
    Gitリポジトリ
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#815" class="lnkocn">815</a></label>
  <h4 class="norm" id="815"><a name="815"></a>
    <a name="h17" ></a><a name="git" ></a><a name="git-repositories" ></a>17. Gitリポジトリ
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a href="#816" class="lnkocn">816</a></label>
  <p class="i0" id="816">
    Live システムプロジェクトの利用可能な全リポジトリ一覧は ‹<a href="http://http://anonscm.debian.org/cgit/debian-live/" target="_top">http://http://anonscm.debian.org/cgit/debian-live/</a>› にあります。プロジェクトの git URL は: <tt>プロトコル://http://anonscm.debian.org/git/debian-live/リポジトリ</tt> という形式になっています。したがって、<i>live-manual</i> を読み込み専用で複製するには
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#817" class="lnkocn">817</a></label>
  <p class="code" id="817">
    $ git clone git://http://anonscm.debian.org/git/debian-live/live-manual.git<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#818" class="lnkocn">818</a></label>
  <p class="code" id="818">
    $ git clone https://http://anonscm.debian.org/git/debian-live/live-manual.git<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#819" class="lnkocn">819</a></label>
  <p class="code" id="819">
    $ git clone http://http://anonscm.debian.org/git/debian-live/live-manual.git<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#820" class="lnkocn">820</a></label>
  <p class="i0" id="820">
    のどれかを実行します。書き込み権限のある複製には <tt>ssh://git.debian.org/git/debian-live/リポジトリ</tt>という形式のアドレスを使います。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#821" class="lnkocn">821</a></label>
  <p class="i0" id="821">
    なので、繰り返しますが <i>live-manual</i> をssh経由で複製するには
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#822" class="lnkocn">822</a></label>
  <p class="code" id="822">
    $ git clone ssh://git.debian.org/git/debian-live/live-manual.git<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#823" class="lnkocn">823</a></label>
  <p class="i0" id="823">
    と入力する必要があります。gitツリーは複数の異なるブランチでできています。<b>debian</b> 及び <b>debian-next</b> ブランチは最終的には新しいリリースそれぞれに収録される実際の作業を収録しているため特に注目すべきです。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#824" class="lnkocn">824</a></label>
  <p class="i0" id="824">
    既存のリポジトリのどれかを複製した後は <b>debian</b> ブランチにいるでしょう。これはプロジェクトの最新リリースの状態を確認するには適切ですが、作業開始前に必ず <b>debian-next</b> ブランチに切り替える必要があります。切り替えには
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#825" class="lnkocn">825</a></label>
  <p class="code" id="825">
    $ git checkout debian-next<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#826" class="lnkocn">826</a></label>
  <p class="i0" id="826">
    を実行します。<b>debian-next</b> ブランチは常に fast-forward とは限らず、あらゆる変更が <b>debian</b> ブランチにマージされる前にまずはこにコミットされます。例えて言えばテストの場のようなものです。このブランチで作業していてサーバにある変更を取得する必要がある場合は <tt>git pull --rebase</tt> を実行する必要があります。それにより、サーバから取得するときにローカルでの変更が反映され、その変更が最上位に配置されます。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#827" class="lnkocn">827</a></label>
  <h5 class="norm" id="827"><a name="827"></a>
    <a name="c17.1" ></a><a name="h17.1" ></a>17.1 リポジトリを複数処理
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#828" class="lnkocn">828</a></label>
  <p class="i0" id="828">
    Live システムのリポジトリを複数複製してすぐに、最新コードの確認、パッチ作成、あるいは翻訳での貢献等のために <b>debian-next</b> ブランチに切り替えたい場合、複数のリポジトリを扱いやすくするための <tt>mrconfig</tt> ファイルをgitサーバで提供していることを紫知っておくべきでしょう。これを使うには <i>mr</i> パッケージをインストールする必要があります。その後、
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#829" class="lnkocn">829</a></label>
  <p class="code" id="829">
    $&nbsp;&nbsp;mr bootstrap http://debian-live.alioth.debian.org/other/mr/mrconfig<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#830" class="lnkocn">830</a></label>
  <p class="i0" id="830">
    を実行します。このコマンドは自動的に複製し、プロジェクトにより作成される Debian パッケージの開発用リポジトリである <b>debian-next</b> ブランチを取得します。これには、中でも <i>live-images</i> リポジトリがあり、プロジェクトが一般用途向けに公開しているビルド済みイメージで利用される設定を収録しています。このリポジトリの使い方に関するさらなる情報については、 <a href="#clone-configuration-via-git">Git経由で公開されている設定の複製</a>  を見てください。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#831" class="lnkocn">831</a></label>
  <h1 class="norm" id="831"><a name="831"></a>
    例
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#832" class="lnkocn">832</a></label>
  <h1 class="norm" id="832"><a name="832"></a>
    例
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#833" class="lnkocn">833</a></label>
  <h4 class="norm" id="833"><a name="833"></a>
    <a name="h18" ></a><a name="" ></a><a name="examples" ></a>18. 例
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a href="#834" class="lnkocn">834</a></label>
  <p class="i0" id="834">
    この章では特定の Live システム活用事例向けの見本ビルドについて触れます。自分用の Live システムイメージのビルドが初めてであれば、まず3つのチュートリアルを順に調べてみることを勧めます。それぞれで他の例の利用、理解を支援する新しい技術を学ぶようになっているためです。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#835" class="lnkocn">835</a></label>
  <h5 class="norm" id="835"><a name="835"></a>
    <a name="h18.1" ></a><a name="using-the-examples" ></a>18.1 例の使用
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#836" class="lnkocn">836</a></label>
  <p class="i0" id="836">
    提示している例を利用するためには、ビルドするために <a href="#requirements">要件</a>  に記載されている要件一覧に合致するシステムと、 <a href="#installing-live-build"><i>live-build</i> のインストール</a>  で説明しているように <i>live-build</i> がインストールされていることが必要となります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#837" class="lnkocn">837</a></label>
  <p class="i0" id="837">
    簡潔にするため、ここに挙げる例ではビルドで利用するローカルミラーを指定していないことに注意してください。ローカルミラーを利用するとダウンロード速度をかなり高速化できます。 <a href="#distribution-mirrors-build-time">ビルド時に利用するディストリビューションのミラー</a>  で説明しているように、<tt>lb config</tt> を使った場合はオプションを指定することができます。ビルドシステムのデフォルト値を <tt>/etc/live/build.conf</tt> でセットするともっと便利になります。このファイルを単純に作成し、対応する <tt>LB_MIRROR_*</tt> 変数に望ましいミラーをセットしてください。ビルドで利用する他のミラーは全て、これにより設定した値をデフォルト値として使います。例えば:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#838" class="lnkocn">838</a></label>
  <p class="code" id="838">
    LB_MIRROR_BOOTSTRAP="http://mirror/debian/" <br>
LB_MIRROR_CHROOT_SECURITY="http://mirror/debian-security/" <br>
LB_MIRROR_CHROOT_BACKPORTS="http://mirror/debian-backports/"<br>
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#839" class="lnkocn">839</a></label>
  <h5 class="norm" id="839"><a name="839"></a>
    <a name="h18.2" ></a><a name="tutorial-1" ></a>18.2 チュートリアル 1: デフォルトイメージ
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#840" class="lnkocn">840</a></label>
  <p class="i0" id="840">
    <b>事例:</b> 簡単な最初のイメージを作成して <i>live-build</i> の基礎を学びます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#841" class="lnkocn">841</a></label>
  <p class="i0" id="841">
    このチュートリアルでは、<i>live-build</i> を利用した最初の演習としてbase パッケージ (Xorg は含まない) と Live システムを支援するパッケージだけを収録する、デフォルトの ISO hybrid 形式の Live システムイメージをビルドします。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#842" class="lnkocn">842</a></label>
  <p class="i0" id="842">
    これ以上簡単にすることはなかなかできないでしょう:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#843" class="lnkocn">843</a></label>
  <p class="code" id="843">
    $ mkdir tutorial1 ; cd tutorial1 ; lb config<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#844" class="lnkocn">844</a></label>
  <p class="i0" id="844">
    何か望むことがあれば <tt>config/</tt> ディレクトリの内容を調べてください。ここには概略の設定があり、すぐ独自化もできますが、ここではそのままでデフォルトのイメージをビルドします。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#845" class="lnkocn">845</a></label>
  <p class="i0" id="845">
    スーパーユーザでイメージをビルドし、そのログを <tt>tee</tt> により保存します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#846" class="lnkocn">846</a></label>
  <p class="code" id="846">
    # lb build 2&gt;&amp;1 | tee build.log<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#847" class="lnkocn">847</a></label>
  <p class="i0" id="847">
    すべてがうまくいくとして、しばらくすると現在のディレクトリに <tt>live-image-i386.hybrid.iso</tt> が出来上がります。この ISO hybrid イメージは  <a href="#testing-iso-with-qemu">Qemu でのISOイメージのテスト</a>  や  <a href="#testing-iso-with-virtualbox">VirtualBox でのISOイメージのテスト</a>  で説明しているように仮想マシンで直接、あるいは <a href="#burning-iso-image">物理メディアへのISOイメージ書き込み</a>  や  <a href="#copying-iso-hybrid-to-usb">USBメモリへの ISO hybrid イメージのコピー</a>  で説明しているように光学メディアやUSBフラッシュ機器に書き込んだイメージ、それぞれからブートできます。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#848" class="lnkocn">848</a></label>
  <h5 class="norm" id="848"><a name="848"></a>
    <a name="h18.3" ></a><a name="tutorial-2" ></a>18.3 チュートリアル 2: ウェブブラウザユーティリティ
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#849" class="lnkocn">849</a></label>
  <p class="i0" id="849">
    <b>事例:</b> ウェブブラウザユーティリティイメージを作成し、独自化の適用方法を学びます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#850" class="lnkocn">850</a></label>
  <p class="i0" id="850">
    このチュートリアルでは Live システムイメージを独自化する方法の紹介として、ウェブブラウザユーティリティとしての利用に適するイメージを作成します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#851" class="lnkocn">851</a></label>
  <p class="code" id="851">
    $ mkdir tutorial2<br>
$ cd tutorial2<br>
$ lb config<br>
$ echo "task-lxde-desktop iceweasel" &gt;&gt; config/package-lists/my.list.chroot<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#852" class="lnkocn">852</a></label>
  <p class="i0" id="852">
    この例で LXDE を選択しているのは最小限のデスクトップ環境を提供するという私達の目的を反映しています。念頭に置いているこのイメージの目的はただ一つ、ウェブブラウザだけだからです。もっと細かく、<tt>config/includes.chroot/etc/iceweasel/profile/</tt> でのウェブブラウザ向けデフォルト設定やウェブ上の様々な種類の内容を表示するための追加のサポートパッケージを提供することはできますが、それは読み手の演習として残しておきます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#853" class="lnkocn">853</a></label>
  <p class="i0" id="853">
    <a href="#tutorial-1">チュートリアル 1</a>  と同様、ここでもスーパーユーザでイメージをビルドし、ログを残します:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#854" class="lnkocn">854</a></label>
  <p class="code" id="854">
    # lb build 2&gt;&amp;1 | tee build.log<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#855" class="lnkocn">855</a></label>
  <p class="i0" id="855">
    ここでも <a href="#tutorial-1">チュートリアル 1</a>  と同様、イメージがうまくできているか検証し、テストします。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#856" class="lnkocn">856</a></label>
  <h5 class="norm" id="856"><a name="856"></a>
    <a name="h18.4" ></a><a name="tutorial-3" ></a>18.4 チュートリアル 3: 私的イメージ
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#857" class="lnkocn">857</a></label>
  <p class="i0" id="857">
    <b>事例:</b> プロジェクトを作成して個人用イメージをビルドします。USBメモリを使って好みのソフトウェアを自由に収録し、要求や設定を変更しながらこのイメージを続けて改訂します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#858" class="lnkocn">858</a></label>
  <p class="i0" id="858">
    この個人用イメージを何度も改訂し、変更を追跡しておいて実験的に試してみてうまくいかなかったときには差し戻せるようにしたいため、人気のある#{git}#バージョン管理システムに設定を残します。 <a href="#managing-a-configuration">設定管理</a>  で説明している <tt>auto</tt> スクリプトによる自動設定を経由した最善の実践も利用します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#859" class="lnkocn">859</a></label>
  <h6 class="norm" id="859"><a name="859"></a>
    <a name="c18.4.1" ></a><a name="h18.4.1" ></a>18.4.1 最初の改訂
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#860" class="lnkocn">860</a></label>
  <p class="code" id="860">
    $ mkdir -p tutorial3/auto<br>
$ cp /usr/share/doc/live-build/examples/auto/* tutorial3/auto/<br>
$ cd tutorial3<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#861" class="lnkocn">861</a></label>
  <p class="i0" id="861">
    <tt>auto/config</tt> を以下のように変更します:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#862" class="lnkocn">862</a></label>
  <p class="code" id="862">
    #!/bin/sh<br><br>
lb config noauto \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--architectures i386 \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--linux-flavours 686-pae \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"${@}"<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#863" class="lnkocn">863</a></label>
  <p class="i0" id="863">
    <tt>lb config</tt> を実行して設定ツリーを生成し、生成された <tt>auto/config</tt> スクリプトを使います:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#864" class="lnkocn">864</a></label>
  <p class="code" id="864">
    $ lb config<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#865" class="lnkocn">865</a></label>
  <p class="i0" id="865">
    ここでローカルパッケージ一覧を設定します:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#866" class="lnkocn">866</a></label>
  <p class="code" id="866">
    $ echo "task-lxde-desktop iceweasel xchat" &gt;&gt; config/package-lists/my.list.chroot<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#867" class="lnkocn">867</a></label>
  <p class="i0" id="867">
    まず、<tt>--architectures i386</tt> により必ず <tt>amd64</tt> ビルドシステムでほとんどのマシンでの利用に適応する32ビット版をビルドするようにします。次に、相当に古いシステムでのこのイメージの利用を想定しないため <tt>--linux-flavours 686-pae</tt> を使います。<i>lxde</i> のタスクメタパッケージを選択して最小限のデスクトップを揃えます。最後に、好みのパッケージの初期値として <i>iceweasel</i> と <i>xchat</i> を追加しています。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#868" class="lnkocn">868</a></label>
  <p class="i0" id="868">
    そして、イメージをビルドします:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#869" class="lnkocn">869</a></label>
  <p class="code" id="869">
    # lb build<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#870" class="lnkocn">870</a></label>
  <p class="i0" id="870">
    最初の2つのチュートリアルとは異なり、<tt>2&gt;&amp;1 | tee build.log</tt> は <tt>auto/build</tt> に書かれているため打ち込む必要がなくなっていることに注意してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#871" class="lnkocn">871</a></label>
  <p class="i0" id="871">
    ( <a href="#tutorial-1">チュートリアル 1</a>  にあるように) イメージをテストしてうまく機能する確信を得たら#{git}#リポジトリを初期化し、作成したばかりの auto スクリプトだけを追加し、最初のコミットを行います:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#872" class="lnkocn">872</a></label>
  <p class="code" id="872">
    $ git init<br>
$ cp /usr/share/doc/live-build/examples/gitignore .gitignore<br>
$ git add .<br>
$ git commit -m "Initial import."<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#873" class="lnkocn">873</a></label>
  <h6 class="norm" id="873"><a name="873"></a>
    <a name="c18.4.2" ></a><a name="h18.4.2" ></a>18.4.2 2回目の改訂
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#874" class="lnkocn">874</a></label>
  <p class="i0" id="874">
    この改訂では、最初のビルドをきれいにし、<i>vlc</i> パッケージを設定に追加して再ビルド、テストコミットを行います。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#875" class="lnkocn">875</a></label>
  <p class="i0" id="875">
    <tt>lb clean</tt> コマンドは前のビルドで生成したファイルを、パッケージを再びダウンロードせずに済むようにキャッシュを除いて全てきれいにします。これにより以降の <tt>lb build</tt> が全段階で再び実行され、必ず新しい設定でファイルを再生成するようになります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#876" class="lnkocn">876</a></label>
  <p class="code" id="876">
    # lb clean<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#877" class="lnkocn">877</a></label>
  <p class="i0" id="877">
    <i>vlc</i> パッケージを <tt>config/package-lists/my.list.chroot</tt> のローカルパッケージ一覧に追記します:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#878" class="lnkocn">878</a></label>
  <p class="code" id="878">
    $ echo vlc &gt;&gt; config/package-lists/my.list.chroot<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#879" class="lnkocn">879</a></label>
  <p class="i0" id="879">
    再びビルドします:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#880" class="lnkocn">880</a></label>
  <p class="code" id="880">
    # lb build<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#881" class="lnkocn">881</a></label>
  <p class="i0" id="881">
    テストして満足したら次の改訂としてコミットします:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#882" class="lnkocn">882</a></label>
  <p class="code" id="882">
    $ git commit -a -m "Adding vlc media player."<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#883" class="lnkocn">883</a></label>
  <p class="i0" id="883">
    もちろん、<tt>config/</tt> 以下のサブディレクトリにファイルを追加する等により設定をもっと複雑に変更することも可能です。新しい改訂版をコミットする際、<tt>config</tt> の最上位にある、<tt>LB_*</tt> 変数を設定しているファイルもビルドされてできたもので、<tt>lb clean</tt> と、対応する <tt>auto</tt> スクリプトを経由して再作成した <tt>lb config</tt> により常に整理されるものなので、手で編集したりコミットすることのないように注意してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#884" class="lnkocn">884</a></label>
  <p class="i0" id="884">
    一連のチュートリアルもこれで終わりです。もっと多様な独自化はできますが、ここまでの簡単な例で見てきた少しの機能を使うだけでも、イメージはほぼ無限の異なる組み合わせを作成することができます。この節の残りの例では、収集してきた Live システムのユーザの経験を元にした他の事例についていくつか触れます。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#885" class="lnkocn">885</a></label>
  <h5 class="norm" id="885"><a name="885"></a>
    <a name="c18.5" ></a><a name="h18.5" ></a>18.5 VNC 公衆クライアント
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#886" class="lnkocn">886</a></label>
  <p class="i0" id="886">
    <b>事例:</b> <i>live-build</i> を使って、ブートすると直接 VNC サーバに接続するイメージを作成します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#887" class="lnkocn">887</a></label>
  <p class="i0" id="887">
    ビルド用ディレクトリを作ってそこに概略設定を作成し、推奨パッケージを無効にして最小限のシステムを作成します。それから初期パッケージ一覧を2つ作成します: 1つ目は <i>live-build</i> により提供される <tt>Packages</tt> というスクリプト ( <a href="#generated-package-lists">生成されるパッケージ一覧</a>  参照) により生成し、2つ目では <i>xorg</i>、<i>gdm3</i>、<i>metacity</i>、<i>xvnc4viewer</i> を収録します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#888" class="lnkocn">888</a></label>
  <p class="code" id="888">
    $ mkdir vnc-kiosk-client<br>
$ cd vnc-kiosk-client<br>
$ lb config -a i386 -k 686-pae --apt-recommends false<br>
$ echo '! Packages Priority standard' &gt; config/package-lists/standard.list.chroot<br>
$ echo "xorg gdm3 metacity xvnc4viewer" &gt; config/package-lists/my.list.chroot<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#889" class="lnkocn">889</a></label>
  <p class="i0" id="889">
    <a href="#tweaking-apt-to-save-space">APT の調整による容量の節約</a>  で説明しているように、イメージが適切に機能するためには推奨パッケージを再びいくらか追加する必要があるかもしれません。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#890" class="lnkocn">890</a></label>
  <p class="i0" id="890">
    推奨パッケージ一覧を調べるための簡単な方法として <i>apt-cache</i> の利用があります。例えば:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#891" class="lnkocn">891</a></label>
  <p class="code" id="891">
    $ apt-cache depends live-config live-boot<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#892" class="lnkocn">892</a></label>
  <p class="i0" id="892">
    この例では <i>live-config</i> 及び <i>live-boot</i> により推奨されるパッケージを複数、再び収録する必要があることがわかっています: 自動ログインが機能するためには <tt>user-setup</tt>、システムをシャットダウンするための不可欠なプログラムとして <tt>sudo</tt>。他に、イメージをRAMにコピーできるようになる <tt>live-tools</tt> や Live メディアを最終的に取り出す <tt>eject</tt> を追加しておくと便利でしょう。それを反映すると:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#893" class="lnkocn">893</a></label>
  <p class="code" id="893">
    $ echo "live-tools user-setup sudo eject" &gt; config/package-lists/recommends.list.chroot<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#894" class="lnkocn">894</a></label>
  <p class="i0" id="894">
    その後ディレクトリ <tt>/etc/skel</tt> を <tt>config/includes.chroot</tt> に作成し、その中にデフォルトユーザ向けの独自の <tt>.xsession</tt> を置きます。このファイルは <i>metacity</i> を立ち上げて <i>xvncviewer</i> を起動し、<tt>192.168.1.2</tt> にあるサーバのポート <tt>5901</tt> に接続します:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#895" class="lnkocn">895</a></label>
  <p class="code" id="895">
    $ mkdir -p config/includes.chroot/etc/skel<br>
$ cat &gt; config/includes.chroot/etc/skel/.xsession &lt;&lt; EOF<br>
#!/bin/sh<br><br>
/usr/bin/metacity &amp;<br>
/usr/bin/xvncviewer 192.168.1.2:1<br><br>
exit<br>
EOF<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#896" class="lnkocn">896</a></label>
  <p class="i0" id="896">
    イメージをビルドします:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#897" class="lnkocn">897</a></label>
  <p class="code" id="897">
    # lb build<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#898" class="lnkocn">898</a></label>
  <p class="i0" id="898">
    楽しみましょう。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#899" class="lnkocn">899</a></label>
  <h5 class="norm" id="899"><a name="899"></a>
    <a name="c18.6" ></a><a name="h18.6" ></a>18.6 128MB USB メモリ向けの基本イメージ
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#900" class="lnkocn">900</a></label>
  <p class="i0" id="900">
    <b>事例:</b> 128MB USB メモリに収まるように構成要素をいくらか削除して、収まることがわかるように容量を少し空けたデフォルトのイメージの作成。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#901" class="lnkocn">901</a></label>
  <p class="i0" id="901">
    特定のメディア容量に収まるようにイメージを最適化する場合、イメージのサイズと機能はトレードオフになることを理解する必要があります。この例では削るだけにしているので 128MB のメディアサイズ内に何か追加する余地をできるだけ残していますが、<i>localepurge</i> パッケージによるロケールの完全削除や収録しているパッケージ内の一貫性は何も壊していません。また、その他の「押し付ける」ような最適化もしていません。特に注目すべきなのは、最小限のシステムを最初から作成するために <tt>--debootstrap-options</tt> を利用している点です。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#902" class="lnkocn">902</a></label>
  <p class="code" id="902">
    $ lb config --apt-indices false --apt-recommends false --debootstrap-options "--variant=minbase" --firmware-chroot false --memtest none<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#903" class="lnkocn">903</a></label>
  <p class="i0" id="903">
    イメージを適切に機能させるためには、最低でも <tt>--apt-recommends false</tt> オプションにより外されていた推奨パッケージを2つ追加しなおす必要があります。 <a href="#tweaking-apt-to-save-space">APTの調整による容量の節約</a>  を見てください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#904" class="lnkocn">904</a></label>
  <p class="code" id="904">
    $ echo "user-setup sudo" &gt; config/package-lists/recommends.list.chroot<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#905" class="lnkocn">905</a></label>
  <p class="i0" id="905">
    ここで、普通の方法でイメージをビルドしてみます:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#906" class="lnkocn">906</a></label>
  <p class="code" id="906">
    # lb build 2&gt;&amp;1 | tee build.log<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#907" class="lnkocn">907</a></label>
  <p class="i0" id="907">
    これを書いている時点の著者のシステムでは、上記の設定により 110MB のイメージができました。これを <a href="#tutorial-1">チュートリアル 1</a>  のデフォルト設定で作成された 192MB のイメージと都合良く比較してみましょう。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#908" class="lnkocn">908</a></label>
  <p class="i0" id="908">
    <tt>--apt-indices false</tt> によりAPTの索引を省くことでかなりの容量を節約していますが、その代わりに Live システムで <i>apt</i> を使う前に <tt>apt-get update</tt> を実行する必要があります。<tt>--apt-recommends false</tt> により推奨パッケージを除外することで、本来あるはずのパッケージをいくらか除外する代わりにいくらか追加で容量を節約します。<tt>--debootstrap-options "--variant=minbase"</tt> で最初から最小限のシステムを構成します。<tt>--firmware-chroot false</tt> でファームウェアパッケージを自動的に収録しないようにすることでもさらに容量をいくらか節約します。そして最後に、<tt>--memtest none</tt> によりメモリテスターのインストールを抑制します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#909" class="lnkocn">909</a></label>
  <p class="i0" id="909">
    <b>注意:</b> 最小限のシステムの構成はフックを使って、例えば <tt>/usr/share/doc/live-build/examples/hooks</tt> にある <tt>stripped.hook.chroot</tt> でも実現できます。これは容量をさらに少し減らし、62MB のイメージを生成します。しかしこれはその実現のために、システムにインストールしたパッケージから文書その他のファイルを削除しています。これはそうしたパッケージの完全性を破壊し、ヘッダで警告しているように思わぬ結果をもたらすかもしれません。それが、この目標のために推奨するのが最小限の <i>debootstrap</i> を利用する方法になっている理由です。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#910" class="lnkocn">910</a></label>
  <h5 class="norm" id="910"><a name="910"></a>
    <a name="c18.7" ></a><a name="h18.7" ></a>18.7 地域化した GNOME デスクトップとインストーラ
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#911" class="lnkocn">911</a></label>
  <p class="i0" id="911">
    <b>事例:</b> GNOME デスクトップのイメージを作成し、スイス用の地域化とインストーラを収録する
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#912" class="lnkocn">912</a></label>
  <p class="i0" id="912">
    好みのデスクトップを使った i386 アーキテクチャ向けの iso-hybrid イメージを作りたい。ここでは GNOME を使用して、GNOME 用の標準の Debian インストーラによりインストールされるのと同一のパッケージを全て収録します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#913" class="lnkocn">913</a></label>
  <p class="i0" id="913">
    最初の問題は適切な言語用タスクの名前を判断する方法です。現在 <i>live-build</i> はこれを支援できません。運良くこれを試行錯誤で見つけられるかもしれませんが、そのためのツールがあります。<tt>grep-dctrl</tt> を利用して tasksel-data にあるタスクの説明を見つけることができます。そのため、準備としてこの両方が揃っていることを確認してください:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#914" class="lnkocn">914</a></label>
  <p class="code" id="914">
    # apt-get install dctrl-tools tasksel-data<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#915" class="lnkocn">915</a></label>
  <p class="i0" id="915">
    これで適切なタスクを検索できるようになりました。まず、
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#916" class="lnkocn">916</a></label>
  <p class="code" id="916">
    $ grep-dctrl -FTest-lang de /usr/share/tasksel/descs/debian-tasks.desc -sTask<br>
Task: german<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#917" class="lnkocn">917</a></label>
  <p class="i0" id="917">
    というコマンドにより、呼ばれたタスクが、簡単に言うとここではドイツだということがわかります。次は関連タスクを見つけます:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#918" class="lnkocn">918</a></label>
  <p class="code" id="918">
    $ grep-dctrl -FEnhances german /usr/share/tasksel/descs/debian-tasks.desc -sTask<br>
Task: german-desktop<br>
Task: german-kde-desktop<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#919" class="lnkocn">919</a></label>
  <p class="i0" id="919">
    ブート時に <b>de_CH.UTF-8</b> ロケールを生成して <b>ch</b> のキーボードレイアウトを選択します。一緒に見ていきましょう。 <a href="#using-metapackages">メタパッケージの利用</a>  から、タスクのメタパッケージには先頭に <tt>task-</tt> が付くことを思いだしてください。こういった言語のブートパラメータを指定し、それから優先度が標準のパッケージと発見したタスクの全メタパッケージをパッケージ一覧に追加するだけです:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#920" class="lnkocn">920</a></label>
  <p class="code" id="920">
    $ mkdir live-gnome-ch<br>
$ cd live-gnome-ch<br>
$ lb config \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-a i386 \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--bootappend-live "boot=live components locales=de_CH.UTF-8 keyboard-layouts=ch" \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--debian-installer live<br>
$ echo '! Packages Priority standard' &gt; config/package-lists/standard.list.chroot<br>
$ echo task-gnome-desktop task-german task-german-desktop &gt;&gt; config/package-lists/desktop.list.chroot<br>
$ echo debian-installer-launcher &gt;&gt; config/package-lists/installer.list.chroot<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#921" class="lnkocn">921</a></label>
  <p class="i0" id="921">
    のようになります。インストーラを Live デスクトップから立ち上げるために <i>debian-installer-launcher</i> パッケージを収録していることに注意してください。さらに、インストーラを立ち上げる機能が適切に動作するために現在必要な <tt>586</tt> 用のカーネルがデフォルトで収録されます。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#922" class="lnkocn">922</a></label>
  <h1 class="norm" id="922"><a name="922"></a>
    付録
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#923" class="lnkocn">923</a></label>
  <h1 class="norm" id="923"><a name="923"></a>
    スタイルガイド
  </h1>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#924" class="lnkocn">924</a></label>
  <h4 class="norm" id="924"><a name="924"></a>
    <a name="h19" ></a><a name="" ></a><a name="style-guide" ></a>19. スタイルガイド
  </h4>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#925" class="lnkocn">925</a></label>
  <h5 class="norm" id="925"><a name="925"></a>
    <a name="c19.1" ></a><a name="h19.1" ></a>19.1 著者向けガイドライン
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#926" class="lnkocn">926</a></label>
  <p class="i0" id="926">
    この節では Live マニュアル向けの技術的文書を記述する際に一般的に考慮すべき事項を扱います。言語特性と推奨手順に分かれています。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#927" class="lnkocn">927</a></label>
  <p class="i0" id="927">
    <b>注意:</b>  著者はまず <a href="#how-to-contribute">この文書への貢献</a>  を読んでください
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#928" class="lnkocn">928</a></label>
  <h6 class="norm" id="928"><a name="928"></a>
    <a name="c19.1.1" ></a><a name="h19.1.1" ></a>19.1.1 言語特性
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#929" class="lnkocn">929</a></label>
  <ul>
  <li class="bullet" id="929">
    <i>平易な英語を使う</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#930" class="lnkocn">930</a></label>
  <p class="i0" id="930">
    読み手は英語が母国語ではない人の割合が高いことに留意してください。そのため、一般的規則として短く有意な文章を使い、引き続いて終止符を打ってください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#931" class="lnkocn">931</a></label>
  <p class="i0" id="931">
    これは単純で幼稚な書き方をするように言っているわけではありません。英語が母国語ではない人にとって理解しにくい複雑な従属文にすることを可能な限り避けましょうという提案です。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#932" class="lnkocn">932</a></label>
  <ul>
  <li class="bullet" id="932">
    <i>英語の方言</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#933" class="lnkocn">933</a></label>
  <p class="i0" id="933">
    最も広く使われている英語の方言はイギリス英語とアメリカ英語なので、ほとんどの著者が非常に高い率でこのどちらかを使っています。共同作業環境下で理想的なのは「国際英語」ですが、既存の全ての方言からどれを使うのが最善なのか決定するのは不可能とは言いませんが非常に困難です。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#934" class="lnkocn">934</a></label>
  <p class="i0" id="934">
    誤解を生まずに複数の方言を混在させることもできるとは思いますが、一般論として一貫性を持たせるようにすべきで、また、イギリス英語やアメリカ英語、その他の英語の方言からどれを使うか自分の裁量で決める前に、他の人がどのように書いているのかを調べてそれを真似るようにしてください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#935" class="lnkocn">935</a></label>
  <ul>
  <li class="bullet" id="935">
    <i>バランス良く</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#936" class="lnkocn">936</a></label>
  <p class="i0" id="936">
    偏見を持たないようにしてください。Live マニュアルに全く関係のない思想への言及を引用することは避けてください。技術的文献は可能な限り中立であるべきです。科学的文献では中立こそが自然です。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#937" class="lnkocn">937</a></label>
  <ul>
  <li class="bullet" id="937">
    <i>政治的に正しく</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#938" class="lnkocn">938</a></label>
  <p class="i0" id="938">
    性差を表す言葉を可能な限り避けるようにしてください。個人の第三者を持ち出す必要がある場合は「he (彼)」や「she (彼女)」、あるいは「s/he や s(he) 彼(女)」などと複雑にするよりも「they (彼ら)」を使うのが好ましいです。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#939" class="lnkocn">939</a></label>
  <ul>
  <li class="bullet" id="939">
    <i>簡潔に</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#940" class="lnkocn">940</a></label>
  <p class="i0" id="940">
    要点を直接述べ、回りくどい表現を使わないようにしてください。必要な情報は十分に提示ながらも、必要以上の余計な情報を提示するのはやめてください。これは不要な詳細を説明しないようにということです。読み手には理解力があります。読み手の側にいくらか前提知識があることを仮定してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#941" class="lnkocn">941</a></label>
  <ul>
  <li class="bullet" id="941">
    <i>翻訳作業を最小限に</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#942" class="lnkocn">942</a></label>
  <p class="i0" id="942">
    書かれたものは他の複数の言語に翻訳されることになるということに留意してください。これは無意味あるいは冗長な情報を追加するとその分余計な作業をする人が出てくるということを意味します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#943" class="lnkocn">943</a></label>
  <ul>
  <li class="bullet" id="943">
    <i>一貫性を</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#944" class="lnkocn">944</a></label>
  <p class="i0" id="944">
    前にも提案しましたが、共同作業の文書を標準化して全体を完全に統一することはほぼ不可能です。しかし、文書を書く際に全体を通して他の著者と一貫した書き方をすることを歓迎します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#945" class="lnkocn">945</a></label>
  <ul>
  <li class="bullet" id="945">
    <i>結束性を</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#946" class="lnkocn">946</a></label>
  <p class="i0" id="946">
    必要なだけ文脈形成句を使い、文章に結束性を持たせて明確にしてください (文脈形成句は接続語句等の言語標識です)。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#947" class="lnkocn">947</a></label>
  <ul>
  <li class="bullet" id="947">
    <i>記述的に</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#948" class="lnkocn">948</a></label>
  <p class="i0" id="948">
    標準的な「changelog」形式で文を単に羅列するよりも段落を使って要点を説明する方が好ましいです。描写してください! 読み手はそれを歓迎するでしょう。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#949" class="lnkocn">949</a></label>
  <ul>
  <li class="bullet" id="949">
    <i>辞書</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#950" class="lnkocn">950</a></label>
  <p class="i0" id="950">
    英語で特定の概念を表現する方法がわからないときは辞書や百科事典でその語の意味を調べてください。ただし、辞書は最高の友ですが正しい使い方を知らなければ最悪の敵にもなることに留意してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#951" class="lnkocn">951</a></label>
  <p class="i0" id="951">
    英語には最大の語彙が存在する言語の一つです (100万語以上)。この語の多くは他の言語から取り入れられたものです。単語の意味を二カ国語の辞書で調べる際、英語が母国語ではない人は母国語の言葉により似ているものを選択する傾向があります。このことにより、英語ではあまり自然に聞こえない、過度に形式ばった文体になりがちです。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#952" class="lnkocn">952</a></label>
  <p class="i0" id="952">
    原則として、ある概念が複数の異なる同義語により表現できるとき、辞書で最初に提示された語を選択するのが良い判断となるでしょう。疑問がある場合はゲルマン起源の語 (通常単音節の語) を選択すると多くの場合正しいとなります。この2つの技ではどちらかというとくだけた表現になるかもしれないという点には注意が必要ですが、少なくとも広く使われていて通常受け入れられる語を選択することになります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#953" class="lnkocn">953</a></label>
  <p class="i0" id="953">
    共起辞書の利用を勧めます。通常合わせて利用する語がわかるようになると極めて役に立ちます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#954" class="lnkocn">954</a></label>
  <p class="i0" id="954">
    繰り返しますが、他の人の作業から学ぶことが最良の実践です。検索エンジンを使って他の著者が特定の表現をどのように使っているか確認することは大きな手助けとなるでしょう。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#955" class="lnkocn">955</a></label>
  <ul>
  <li class="bullet" id="955">
    <i>空似言葉や熟語その他の慣習的な表現</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#956" class="lnkocn">956</a></label>
  <p class="i0" id="956">
    空似言葉に気をつけてください。外国語の熟練度を問わず、2つの言語で同じように見える語だけれどもその意味や使い方が全く異なる「空似言葉」という罠にはまることがあることは避けられません。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#957" class="lnkocn">957</a></label>
  <p class="i0" id="957">
    熟語は可能な限り避けてください。「熟語」は個々の語が持っていた意味とは完全に異なる意味を表すことがあります。熟語は英語が母国語の人でさえ理解しにくいこともあります!
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#958" class="lnkocn">958</a></label>
  <ul>
  <li class="bullet" id="958">
    <i>俗語や省略、短縮表現等は避けましょう</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#959" class="lnkocn">959</a></label>
  <p class="i0" id="959">
    平易な、日常的な英語の使用を勧めるとはいっても、技術的文献は言語を正式に記録する類のものです。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#960" class="lnkocn">960</a></label>
  <p class="i0" id="960">
    俗語や通常使わない解釈困難な省略表現、特に母国語での表現を模倣するような短縮表現は避けてください。IRCや、家族や仲間内で使うような特有の表現での記述はしないでください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#961" class="lnkocn">961</a></label>
  <h6 class="norm" id="961"><a name="961"></a>
    <a name="c19.1.2" ></a><a name="h19.1.2" ></a>19.1.2 手順
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#962" class="lnkocn">962</a></label>
  <ul>
  <li class="bullet" id="962">
    <i>書く前にテストを</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#963" class="lnkocn">963</a></label>
  <p class="i0" id="963">
    著者が Live マニュアルに追加する前に例をテストして、全て確実に説明通りに動作するようにすることは重要です。きれいな chroot やVM環境でのテストが良い起点となるでしょう。他に、それから異なるハードウェアを使っている異なるマシンでテストを実施し、起きるであろう問題を発見することができれば理想でしょう。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#964" class="lnkocn">964</a></label>
  <ul>
  <li class="bullet" id="964">
    <i>例</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#965" class="lnkocn">965</a></label>
  <p class="i0" id="965">
    例示するときはできるだけ具体的にするようにしてください。例は結局例でしかありませんから。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#966" class="lnkocn">966</a></label>
  <p class="i0" id="966">
    抽象的な表現で読み手を混乱させるよりも、特定の状況でのみ適用できるような書き方をする方がより良いことはよくあります。この場合は提示した例の効果を簡単に説明することもできます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#967" class="lnkocn">967</a></label>
  <p class="i0" id="967">
    使い方を誤ればデータ消失や類似の望ましくない影響を及ぼす可能性のある、潜在的に危険なコマンド類の使用を例示する場合等、例外がいくらかあります。この場合は起こりうる副作用について十分な説明を提供すべきです。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#968" class="lnkocn">968</a></label>
  <ul>
  <li class="bullet" id="968">
    <i>外部リンク</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#969" class="lnkocn">969</a></label>
  <p class="i0" id="969">
    外部サイトへのリンクは、そのサイトにある情報が特別な点を理解するために決定的な効果が期待できる場合にのみ利用すべきです。その場合でも、外部サイトへのリンクは可能な限り少なくしてください。インターネット上のリンクはその内容がほとんどが変更される可能性があるもので、その結果機能しないリンクができたり、論拠を不完全な状態にしてしまうことになります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#970" class="lnkocn">970</a></label>
  <p class="i0" id="970">
    他に、インターネットに接続せずにそのマニュアルを読んでいる人にはそのリンクを追う機会がありません。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#971" class="lnkocn">971</a></label>
  <ul>
  <li class="bullet" id="971">
    <i>商標の主張やマニュアルの公開にあたって採用したライセンスに違反するものは避ける</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#972" class="lnkocn">972</a></label>
  <p class="i0" id="972">
    商標の主張は可能な限り避けてください。記述した文書は他の下流のプロジェクトで使うことになるかもしれないことに留意してください。つまり、ある種の特定の内容を追加することは事態を複雑にすることになります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#973" class="lnkocn">973</a></label>
  <p class="i0" id="973">
    <i>live-manual</i> は GNU GPL の条件下で使用を許可しています。これには、合わせて公開する (著作権のある画像やロゴを含むあらゆる種類の) 内容の配布物に適用する意味合いがいくつかあります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#974" class="lnkocn">974</a></label>
  <ul>
  <li class="bullet" id="974">
    <i>まず草稿を書き、改訂、変更して改善し、必要なら作り直す</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#975" class="lnkocn">975</a></label>
  <p class="i0" id="975">
    - 案を引き出しましょう! まず論理的に順を追って考えを整理する必要があります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#976" class="lnkocn">976</a></label>
  <p class="i0" id="976">
    - 頭の中で何とか形ができたら最初の草稿を書きます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#977" class="lnkocn">977</a></label>
  <p class="i0" id="977">
    - 文法や書式、つづりを直します。リリースの正しい名前は <b>buster</b> や <b>sid</b> で、これをコード名として参照するときは大文字にすべきではないことに留意してください。「spell」ターゲットを使って、つまり#{make spell}#でつづりの誤りがないか確認できます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#978" class="lnkocn">978</a></label>
  <p class="i0" id="978">
    - 記述を改善し、必要な部分があれば書き直します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#979" class="lnkocn">979</a></label>
  <ul>
  <li class="bullet" id="979">
    <i>章</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#980" class="lnkocn">980</a></label>
  <p class="i0" id="980">
    章や副題には慣習的な番号の付け方をしてください。例えば 1、1.1、1.1.1、1.1.2 ... 1.2、1.2.1、1.2.2 ... 2、2.1 ... などというようにです。以下のマークアップを見てください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#981" class="lnkocn">981</a></label>
  <p class="i0" id="981">
    説明するのに一連の手順や段階を列挙する必要がある場合は、First (最初に)、second (2つ目に)、third (3つ目に) ... というように序数を使ったり、First (最初に)、Then (それから)、After that (その後)、Finally (最後に)、... あるいは箇条書きすることもできます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#982" class="lnkocn">982</a></label>
  <ul>
  <li class="bullet" id="982">
    <i>マークアップ</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#983" class="lnkocn">983</a></label>
  <p class="i0" id="983">
    大事なことを言い忘れましたが、<i>live-manual</i> では  <a href="http://www.sisudoc.org/">SiSU</a>  を使ってテキストファイルを処理し、複数の形式の出力を生成しています。 <a href="http://www.sisudoc.org/sisu/en/html/sisu_manual/markup.html">SiSU マニュアル</a>  を眺めてそのマークアップ方法をよく理解することを勧めます。代わりに
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#984" class="lnkocn">984</a></label>
  <p class="code" id="984">
    $ sisu --help markup<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#985" class="lnkocn">985</a></label>
  <p class="i0" id="985">
    と入力する方法もあります。マークアップをいくらか例示してみます。有用だということはわかるかもしれません。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#986" class="lnkocn">986</a></label>
  <p class="i0" id="986">
    - 文字列の強調/太字:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#987" class="lnkocn">987</a></label>
  <p class="code" id="987">
    *{foo}* または !{foo}!<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#988" class="lnkocn">988</a></label>
  <p class="i0" id="988">
    は「<b>foo</b> または <b>foo</b> 」となります。これは特定のキーワードを強調するのに使います。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#989" class="lnkocn">989</a></label>
  <p class="i0" id="989">
    - 斜体:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#990" class="lnkocn">990</a></label>
  <p class="code" id="990">
    /{foo}/<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#991" class="lnkocn">991</a></label>
  <p class="i0" id="991">
    は <i>foo</i> となります。これは例えば Debian パッケージの名前に使います。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#992" class="lnkocn">992</a></label>
  <p class="i0" id="992">
    - 等幅:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#993" class="lnkocn">993</a></label>
  <p class="code" id="993">
    #{foo}#<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#994" class="lnkocn">994</a></label>
  <p class="i0" id="994">
    は <tt>foo</tt> となります。これは例えばコマンドの名前に使います。また、キーワードやパスのようなものの一部を強調するのにも使います。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#995" class="lnkocn">995</a></label>
  <p class="i0" id="995">
    - コードブロック:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#996" class="lnkocn">996</a></label>
  <p class="code" id="996">
    code{<br><br>
&nbsp;&nbsp;$ foo<br>
&nbsp;&nbsp;# bar<br><br>
}code<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#997" class="lnkocn">997</a></label>
  <p class="i0" id="997">
    は
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#998" class="lnkocn">998</a></label>
  <p class="code" id="998">
    $ foo<br>
# bar<br>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#999" class="lnkocn">999</a></label>
  <p class="i0" id="999">
    となります。タグの開始には <tt>code{</tt> を、終了には <tt>}code</tt> を使います。コードの各行には先頭に空白が必要だということを必ず覚えておいてください。
  </p>
</div>

<br><hr width=90% /><br>
<div class="substance">
  <label class="ocn"><a href="#1000" class="lnkocn">1000</a></label>
  <h5 class="norm" id="1000"><a name="1000"></a>
    <a name="h19.2" ></a><a name="guidelines-translators" ></a>19.2 翻訳者向けガイドライン
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a href="#1001" class="lnkocn">1001</a></label>
  <p class="i0" id="1001">
    この節では Live マニュアルの内容を翻訳する際に一般的に考慮すべき事項を扱います。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#1002" class="lnkocn">1002</a></label>
  <p class="i0" id="1002">
    一般的な推奨事項として、翻訳者は自分の言語に適用される翻訳規則を既に読んで理解しておくべきです。通常、翻訳用のグループやメーリングリストが Debian の品質標準に合致する翻訳物を作成する方法についての情報を提供しています。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#1003" class="lnkocn">1003</a></label>
  <p class="i0" id="1003">
    <b>注意:</b>  翻訳者は <a href="#how-to-contribute">この文書への貢献</a>  も読むべきです。特に <a href="#translation">翻訳</a>  節を
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#1004" class="lnkocn">1004</a></label>
  <h6 class="norm" id="1004"><a name="1004"></a>
    <a name="c19.2.1" ></a><a name="h19.2.1" ></a>19.2.1 翻訳の手がかり
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a href="#1005" class="lnkocn">1005</a></label>
  <ul>
  <li class="bullet" id="1005">
    <i>コメント</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#1006" class="lnkocn">1006</a></label>
  <p class="i0" id="1006">
    翻訳者の役割は元の著者により書かれた語や文、段落、そして文章の意味を可能な限り忠実に目標の言語で伝えることです。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#1007" class="lnkocn">1007</a></label>
  <p class="i0" id="1007">
    そのため、個人的なコメントや自分の余計な情報の追加は控えるべきです。同一の文書について作業している他の翻訳者に向けてコメントを追加したい場合はそのために用意されている場があります。これは <b>po</b> ファイルの番号記号 <b>#</b> に続く文字列のヘッダです。ほとんどの視覚的な翻訳用プログラムで自動的にこれをコメントの種類に属するものとして処理します。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#1008" class="lnkocn">1008</a></label>
  <ul>
  <li class="bullet" id="1008">
    <i>TN, Translator's Note (翻訳者によるメモ)</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#1009" class="lnkocn">1009</a></label>
  <p class="i0" id="1009">
    完全に受け入れられるとはいえ、翻訳済みテキストの括弧「()」内に語や表現を含めることは、ややこしい語や表現の意味を読み手にとってより明確にする場合にのみ行ってください。翻訳者は括弧内に「(訳注)」等と記載して、その追記が翻訳者によるものであることを明確にすべきです。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#1010" class="lnkocn">1010</a></label>
  <ul>
  <li class="bullet" id="1010">
    <i>非人称の文を</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#1011" class="lnkocn">1011</a></label>
  <p class="i0" id="1011">
    英語で書かれた文書は「you」を非人称として幅広く使います。他の言語にはこの特徴を共有しないものもあります。このことで、元の文が読み手に対して直接呼びかけているかのような誤った印象を実際にはそうではないのに与えてしまうかもしれません。翻訳者はこの点に注意して、可能な限り正確に自分の言語に反映する必要があります。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#1012" class="lnkocn">1012</a></label>
  <ul>
  <li class="bullet" id="1012">
    <i>空似言葉</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#1013" class="lnkocn">1013</a></label>
  <p class="i0" id="1013">
    前に説明した「空似言葉」の罠は特に翻訳者に当てはまります。疑いがあれば、その疑わしい空似言葉の意味を再点検してください。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#1014" class="lnkocn">1014</a></label>
  <ul>
  <li class="bullet" id="1014">
    <i>マークアップ</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#1015" class="lnkocn">1015</a></label>
  <p class="i0" id="1015">
    最初は*{pot}*ファイル、後には*{po}*ファイルについて作業する翻訳者は多数のマークアップ機能を文字列に確認できるでしょう。文は翻訳できるものである限り翻訳できますが、それが元の英語版と全く同一のマークアップを採用しているということは極めて重要です。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#1016" class="lnkocn">1016</a></label>
  <ul>
  <li class="bullet" id="1016">
    <i>コードブロック</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#1017" class="lnkocn">1017</a></label>
  <p class="i0" id="1017">
    コードブロックは通常翻訳できませんが、翻訳にそれを含めることが、翻訳率 100% を達成する唯一の方法です。コードが変更されると翻訳者による介入が必要となるため最初は余計な作業になりますが、長期的に見るとこれが .po ファイルの整合性を確認したときに何が既に翻訳済みで何が未翻訳なのか識別する最善の方法です。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#1018" class="lnkocn">1018</a></label>
  <ul>
  <li class="bullet" id="1018">
    <i>改行</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#1019" class="lnkocn">1019</a></label>
  <p class="i0" id="1019">
    翻訳文には元の文と全く同じだけの改行が必要です。元のファイルに改行があるときは注意して「Enter」キーを押すか*{\n}*を打ち込んでください。改行は例えばコードブロック中でよく使われます。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#1020" class="lnkocn">1020</a></label>
  <p class="i0" id="1020">
    勘違いしないでください。これは翻訳文を英語版と同一の長さにする必要がある、ということではありません。それはほぼ不可能です。
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#1021" class="lnkocn">1021</a></label>
  <ul>
  <li class="bullet" id="1021">
    <i>翻訳できない、してはいけない文字列</i>
  </li>
  </ul>
</div>

<div class="substance">
  <label class="ocn"><a href="#1022" class="lnkocn">1022</a></label>
  <p class="i0" id="1022">
    翻訳者が決して翻訳すべきでないもの:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#1023" class="lnkocn">1023</a></label>
  <p class="i0" id="1023">
    - リリースのコード名 (小文字で書くべき)
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#1024" class="lnkocn">1024</a></label>
  <p class="i0" id="1024">
    - プログラムの名前
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#1025" class="lnkocn">1025</a></label>
  <p class="i0" id="1025">
    - 例示するコマンド
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#1026" class="lnkocn">1026</a></label>
  <p class="i0" id="1026">
    - メタ情報 (前後にコロンが置かれることが多い <b>:メタ情報:</b>)
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#1027" class="lnkocn">1027</a></label>
  <p class="i0" id="1027">
    - リンク
  </p>
</div>

<div class="substance">
  <label class="ocn"><a href="#1028" class="lnkocn">1028</a></label>
  <p class="i0" id="1028">
    - パス
  </p>
</div>

</div>

<div class="main_column">
<table summary="table of contents scroll navigation band" id="toc" width="100%" bgcolor="#ffffff">
<tr><td width="20%">
   <table summary="home button / home information" border="0" cellpadding="3" cellspacing="0">
 <tr><td align="left" bgcolor="#ffffff">
  <p class="tiny_left"><a href="http://debian-live.alioth.debian.org/manual" target="_top">
    Live manual
  </a></p>
  <p class="tiny_left"><a href="http://debian-live.alioth.debian.org" target="_top">
    Live Systems
  </a></p>
 </td></tr>
 </table>
</td>
<td width="75%" align="center">
  
<table summary="segment navigation available documents types: toc,doc,pdf,concordance" border="0" cellpadding="3" cellspacing="0">
<tr>
<td align="center" bgcolor="#ffffff">
  
  
</tr></table>
</td>
<td width="20%">
  &nbsp;
</td></tr>
</table>
<p>

<a name="bottom" id="bottom"></a>
<a name="end" id="end"></a>
</div>

</body>
</html>

